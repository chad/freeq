(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))u(f);new MutationObserver(f=>{for(const m of f)if(m.type==="childList")for(const h of m.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function r(f){const m={};return f.integrity&&(m.integrity=f.integrity),f.referrerPolicy&&(m.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?m.credentials="include":f.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function u(f){if(f.ep)return;f.ep=!0;const m=r(f);fetch(f.href,m)}})();function a0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Co={exports:{}},us={};var jh;function n0(){if(jh)return us;jh=1;var i=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function r(u,f,m){var h=null;if(m!==void 0&&(h=""+m),f.key!==void 0&&(h=""+f.key),"key"in f){m={};for(var y in f)y!=="key"&&(m[y]=f[y])}else m=f;return f=m.ref,{$$typeof:i,type:u,key:h,ref:f!==void 0?f:null,props:m}}return us.Fragment=o,us.jsx=r,us.jsxs=r,us}var Sh;function l0(){return Sh||(Sh=1,Co.exports=n0()),Co.exports}var l=l0(),Eo={exports:{}},me={};var wh;function s0(){if(wh)return me;wh=1;var i=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),h=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),N=Symbol.iterator;function _(S){return S===null||typeof S!="object"?null:(S=N&&S[N]||S["@@iterator"],typeof S=="function"?S:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,I={};function te(S,H,D){this.props=S,this.context=H,this.refs=I,this.updater=D||X}te.prototype.isReactComponent={},te.prototype.setState=function(S,H){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,H,"setState")},te.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function $(){}$.prototype=te.prototype;function L(S,H,D){this.props=S,this.context=H,this.refs=I,this.updater=D||X}var ae=L.prototype=new $;ae.constructor=L,z(ae,te.prototype),ae.isPureReactComponent=!0;var J=Array.isArray;function V(){}var Z={H:null,A:null,T:null,S:null},de=Object.prototype.hasOwnProperty;function F(S,H,D){var Q=D.ref;return{$$typeof:i,type:S,key:H,ref:Q!==void 0?Q:null,props:D}}function Le(S,H){return F(S.type,H,S.props)}function Ce(S){return typeof S=="object"&&S!==null&&S.$$typeof===i}function pe(S){var H={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(D){return H[D]})}var ue=/\/+/g;function ye(S,H){return typeof S=="object"&&S!==null&&S.key!=null?pe(""+S.key):H.toString(36)}function ze(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(V,V):(S.status="pending",S.then(function(H){S.status==="pending"&&(S.status="fulfilled",S.value=H)},function(H){S.status==="pending"&&(S.status="rejected",S.reason=H)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function R(S,H,D,Q,le){var fe=typeof S;(fe==="undefined"||fe==="boolean")&&(S=null);var be=!1;if(S===null)be=!0;else switch(fe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(S.$$typeof){case i:case o:be=!0;break;case j:return be=S._init,R(be(S._payload),H,D,Q,le)}}if(be)return le=le(S),be=Q===""?"."+ye(S,0):Q,J(le)?(D="",be!=null&&(D=be.replace(ue,"$&/")+"/"),R(le,H,D,"",function(ba){return ba})):le!=null&&(Ce(le)&&(le=Le(le,D+(le.key==null||S&&S.key===le.key?"":(""+le.key).replace(ue,"$&/")+"/")+be)),H.push(le)),1;be=0;var Pe=Q===""?".":Q+":";if(J(S))for(var Ue=0;Ue<S.length;Ue++)Q=S[Ue],fe=Pe+ye(Q,Ue),be+=R(Q,H,D,fe,le);else if(Ue=_(S),typeof Ue=="function")for(S=Ue.call(S),Ue=0;!(Q=S.next()).done;)Q=Q.value,fe=Pe+ye(Q,Ue++),be+=R(Q,H,D,fe,le);else if(fe==="object"){if(typeof S.then=="function")return R(ze(S),H,D,Q,le);throw H=String(S),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return be}function G(S,H,D){if(S==null)return S;var Q=[],le=0;return R(S,Q,"","",function(fe){return H.call(D,fe,le++)}),Q}function K(S){if(S._status===-1){var H=S._result;H=H(),H.then(function(D){(S._status===0||S._status===-1)&&(S._status=1,S._result=D)},function(D){(S._status===0||S._status===-1)&&(S._status=2,S._result=D)}),S._status===-1&&(S._status=0,S._result=H)}if(S._status===1)return S._result.default;throw S._result}var ie=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},ne={map:G,forEach:function(S,H,D){G(S,function(){H.apply(this,arguments)},D)},count:function(S){var H=0;return G(S,function(){H++}),H},toArray:function(S){return G(S,function(H){return H})||[]},only:function(S){if(!Ce(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return me.Activity=b,me.Children=ne,me.Component=te,me.Fragment=r,me.Profiler=f,me.PureComponent=L,me.StrictMode=u,me.Suspense=x,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,me.__COMPILER_RUNTIME={__proto__:null,c:function(S){return Z.H.useMemoCache(S)}},me.cache=function(S){return function(){return S.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(S,H,D){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var Q=z({},S.props),le=S.key;if(H!=null)for(fe in H.key!==void 0&&(le=""+H.key),H)!de.call(H,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&H.ref===void 0||(Q[fe]=H[fe]);var fe=arguments.length-2;if(fe===1)Q.children=D;else if(1<fe){for(var be=Array(fe),Pe=0;Pe<fe;Pe++)be[Pe]=arguments[Pe+2];Q.children=be}return F(S.type,le,Q)},me.createContext=function(S){return S={$$typeof:h,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:m,_context:S},S},me.createElement=function(S,H,D){var Q,le={},fe=null;if(H!=null)for(Q in H.key!==void 0&&(fe=""+H.key),H)de.call(H,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(le[Q]=H[Q]);var be=arguments.length-2;if(be===1)le.children=D;else if(1<be){for(var Pe=Array(be),Ue=0;Ue<be;Ue++)Pe[Ue]=arguments[Ue+2];le.children=Pe}if(S&&S.defaultProps)for(Q in be=S.defaultProps,be)le[Q]===void 0&&(le[Q]=be[Q]);return F(S,fe,le)},me.createRef=function(){return{current:null}},me.forwardRef=function(S){return{$$typeof:y,render:S}},me.isValidElement=Ce,me.lazy=function(S){return{$$typeof:j,_payload:{_status:-1,_result:S},_init:K}},me.memo=function(S,H){return{$$typeof:p,type:S,compare:H===void 0?null:H}},me.startTransition=function(S){var H=Z.T,D={};Z.T=D;try{var Q=S(),le=Z.S;le!==null&&le(D,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(V,ie)}catch(fe){ie(fe)}finally{H!==null&&D.types!==null&&(H.types=D.types),Z.T=H}},me.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},me.use=function(S){return Z.H.use(S)},me.useActionState=function(S,H,D){return Z.H.useActionState(S,H,D)},me.useCallback=function(S,H){return Z.H.useCallback(S,H)},me.useContext=function(S){return Z.H.useContext(S)},me.useDebugValue=function(){},me.useDeferredValue=function(S,H){return Z.H.useDeferredValue(S,H)},me.useEffect=function(S,H){return Z.H.useEffect(S,H)},me.useEffectEvent=function(S){return Z.H.useEffectEvent(S)},me.useId=function(){return Z.H.useId()},me.useImperativeHandle=function(S,H,D){return Z.H.useImperativeHandle(S,H,D)},me.useInsertionEffect=function(S,H){return Z.H.useInsertionEffect(S,H)},me.useLayoutEffect=function(S,H){return Z.H.useLayoutEffect(S,H)},me.useMemo=function(S,H){return Z.H.useMemo(S,H)},me.useOptimistic=function(S,H){return Z.H.useOptimistic(S,H)},me.useReducer=function(S,H,D){return Z.H.useReducer(S,H,D)},me.useRef=function(S){return Z.H.useRef(S)},me.useState=function(S){return Z.H.useState(S)},me.useSyncExternalStore=function(S,H,D){return Z.H.useSyncExternalStore(S,H,D)},me.useTransition=function(){return Z.H.useTransition()},me.version="19.2.4",me}var Nh;function ru(){return Nh||(Nh=1,Eo.exports=s0()),Eo.exports}var C=ru();const hs=a0(C);var To={exports:{}},fs={},Ao={exports:{}},Mo={};var Ch;function i0(){return Ch||(Ch=1,(function(i){function o(R,G){var K=R.length;R.push(G);e:for(;0<K;){var ie=K-1>>>1,ne=R[ie];if(0<f(ne,G))R[ie]=G,R[K]=ne,K=ie;else break e}}function r(R){return R.length===0?null:R[0]}function u(R){if(R.length===0)return null;var G=R[0],K=R.pop();if(K!==G){R[0]=K;e:for(var ie=0,ne=R.length,S=ne>>>1;ie<S;){var H=2*(ie+1)-1,D=R[H],Q=H+1,le=R[Q];if(0>f(D,K))Q<ne&&0>f(le,D)?(R[ie]=le,R[Q]=K,ie=Q):(R[ie]=D,R[H]=K,ie=H);else if(Q<ne&&0>f(le,K))R[ie]=le,R[Q]=K,ie=Q;else break e}}return G}function f(R,G){var K=R.sortIndex-G.sortIndex;return K!==0?K:R.id-G.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;i.unstable_now=function(){return m.now()}}else{var h=Date,y=h.now();i.unstable_now=function(){return h.now()-y}}var x=[],p=[],j=1,b=null,N=3,_=!1,X=!1,z=!1,I=!1,te=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function ae(R){for(var G=r(p);G!==null;){if(G.callback===null)u(p);else if(G.startTime<=R)u(p),G.sortIndex=G.expirationTime,o(x,G);else break;G=r(p)}}function J(R){if(z=!1,ae(R),!X)if(r(x)!==null)X=!0,V||(V=!0,pe());else{var G=r(p);G!==null&&ze(J,G.startTime-R)}}var V=!1,Z=-1,de=5,F=-1;function Le(){return I?!0:!(i.unstable_now()-F<de)}function Ce(){if(I=!1,V){var R=i.unstable_now();F=R;var G=!0;try{e:{X=!1,z&&(z=!1,$(Z),Z=-1),_=!0;var K=N;try{t:{for(ae(R),b=r(x);b!==null&&!(b.expirationTime>R&&Le());){var ie=b.callback;if(typeof ie=="function"){b.callback=null,N=b.priorityLevel;var ne=ie(b.expirationTime<=R);if(R=i.unstable_now(),typeof ne=="function"){b.callback=ne,ae(R),G=!0;break t}b===r(x)&&u(x),ae(R)}else u(x);b=r(x)}if(b!==null)G=!0;else{var S=r(p);S!==null&&ze(J,S.startTime-R),G=!1}}break e}finally{b=null,N=K,_=!1}G=void 0}}finally{G?pe():V=!1}}}var pe;if(typeof L=="function")pe=function(){L(Ce)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,ye=ue.port2;ue.port1.onmessage=Ce,pe=function(){ye.postMessage(null)}}else pe=function(){te(Ce,0)};function ze(R,G){Z=te(function(){R(i.unstable_now())},G)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(R){R.callback=null},i.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<R?Math.floor(1e3/R):5},i.unstable_getCurrentPriorityLevel=function(){return N},i.unstable_next=function(R){switch(N){case 1:case 2:case 3:var G=3;break;default:G=N}var K=N;N=G;try{return R()}finally{N=K}},i.unstable_requestPaint=function(){I=!0},i.unstable_runWithPriority=function(R,G){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var K=N;N=R;try{return G()}finally{N=K}},i.unstable_scheduleCallback=function(R,G,K){var ie=i.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ie+K:ie):K=ie,R){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=K+ne,R={id:j++,callback:G,priorityLevel:R,startTime:K,expirationTime:ne,sortIndex:-1},K>ie?(R.sortIndex=K,o(p,R),r(x)===null&&R===r(p)&&(z?($(Z),Z=-1):z=!0,ze(J,K-ie))):(R.sortIndex=ne,o(x,R),X||_||(X=!0,V||(V=!0,pe()))),R},i.unstable_shouldYield=Le,i.unstable_wrapCallback=function(R){var G=N;return function(){var K=N;N=G;try{return R.apply(this,arguments)}finally{N=K}}}})(Mo)),Mo}var Eh;function c0(){return Eh||(Eh=1,Ao.exports=i0()),Ao.exports}var ko={exports:{}},ut={};var Th;function r0(){if(Th)return ut;Th=1;var i=ru();function o(x){var p="https://react.dev/errors/"+x;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)p+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+x+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var u={d:{f:r,r:function(){throw Error(o(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},f=Symbol.for("react.portal");function m(x,p,j){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:b==null?null:""+b,children:x,containerInfo:p,implementation:j}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(x,p){if(x==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ut.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,ut.createPortal=function(x,p){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(o(299));return m(x,p,null,j)},ut.flushSync=function(x){var p=h.T,j=u.p;try{if(h.T=null,u.p=2,x)return x()}finally{h.T=p,u.p=j,u.d.f()}},ut.preconnect=function(x,p){typeof x=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,u.d.C(x,p))},ut.prefetchDNS=function(x){typeof x=="string"&&u.d.D(x)},ut.preinit=function(x,p){if(typeof x=="string"&&p&&typeof p.as=="string"){var j=p.as,b=y(j,p.crossOrigin),N=typeof p.integrity=="string"?p.integrity:void 0,_=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;j==="style"?u.d.S(x,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:N,fetchPriority:_}):j==="script"&&u.d.X(x,{crossOrigin:b,integrity:N,fetchPriority:_,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ut.preinitModule=function(x,p){if(typeof x=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var j=y(p.as,p.crossOrigin);u.d.M(x,{crossOrigin:j,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&u.d.M(x)},ut.preload=function(x,p){if(typeof x=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var j=p.as,b=y(j,p.crossOrigin);u.d.L(x,j,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ut.preloadModule=function(x,p){if(typeof x=="string")if(p){var j=y(p.as,p.crossOrigin);u.d.m(x,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:j,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else u.d.m(x)},ut.requestFormReset=function(x){u.d.r(x)},ut.unstable_batchedUpdates=function(x,p){return x(p)},ut.useFormState=function(x,p,j){return h.H.useFormState(x,p,j)},ut.useFormStatus=function(){return h.H.useHostTransitionStatus()},ut.version="19.2.4",ut}var Ah;function o0(){if(Ah)return ko.exports;Ah=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(o){console.error(o)}}return i(),ko.exports=r0(),ko.exports}var Mh;function u0(){if(Mh)return fs;Mh=1;var i=c0(),o=ru(),r=o0();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x(e){if(m(e)!==e)throw Error(u(188))}function p(e){var t=e.alternate;if(!t){if(t=m(e),t===null)throw Error(u(188));return t!==e?null:e}for(var a=e,n=t;;){var s=a.return;if(s===null)break;var c=s.alternate;if(c===null){if(n=s.return,n!==null){a=n;continue}break}if(s.child===c.child){for(c=s.child;c;){if(c===a)return x(s),e;if(c===n)return x(s),t;c=c.sibling}throw Error(u(188))}if(a.return!==n.return)a=s,n=c;else{for(var d=!1,g=s.child;g;){if(g===a){d=!0,a=s,n=c;break}if(g===n){d=!0,n=s,a=c;break}g=g.sibling}if(!d){for(g=c.child;g;){if(g===a){d=!0,a=c,n=s;break}if(g===n){d=!0,n=c,a=s;break}g=g.sibling}if(!d)throw Error(u(189))}}if(a.alternate!==n)throw Error(u(190))}if(a.tag!==3)throw Error(u(188));return a.stateNode.current===a?e:t}function j(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=j(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,N=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),L=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),Le=Symbol.for("react.memo_cache_sentinel"),Ce=Symbol.iterator;function pe(e){return e===null||typeof e!="object"?null:(e=Ce&&e[Ce]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Symbol.for("react.client.reference");function ye(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ue?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case te:return"Profiler";case I:return"StrictMode";case J:return"Suspense";case V:return"SuspenseList";case F:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case X:return"Portal";case L:return e.displayName||"Context";case $:return(e._context.displayName||"Context")+".Consumer";case ae:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z:return t=e.displayName||null,t!==null?t:ye(e.type)||"Memo";case de:t=e._payload,e=e._init;try{return ye(e(t))}catch{}}return null}var ze=Array.isArray,R=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},ie=[],ne=-1;function S(e){return{current:e}}function H(e){0>ne||(e.current=ie[ne],ie[ne]=null,ne--)}function D(e,t){ne++,ie[ne]=e.current,e.current=t}var Q=S(null),le=S(null),fe=S(null),be=S(null);function Pe(e,t){switch(D(fe,t),D(le,e),D(Q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Vm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Vm(t),e=Xm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(Q),D(Q,e)}function Ue(){H(Q),H(le),H(fe)}function ba(e){e.memoizedState!==null&&D(be,e);var t=Q.current,a=Xm(t,e.type);t!==a&&(D(le,e),D(Q,a))}function U(e){le.current===e&&(H(Q),H(le)),be.current===e&&(H(be),is._currentValue=K)}var W,re;function oe(e){if(W===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);W=t&&t[1]||"",re=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+W+e+re}var Be=!1;function Ge(e,t){if(!e||Be)return"";Be=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(O){var k=O}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(O){k=O}e.call(Y.prototype)}}else{try{throw Error()}catch(O){k=O}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(O){if(O&&k&&typeof O.stack=="string")return[O.stack,k.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=n.DetermineComponentFrameRoot(),d=c[0],g=c[1];if(d&&g){var v=d.split(`
`),M=g.split(`
`);for(s=n=0;n<v.length&&!v[n].includes("DetermineComponentFrameRoot");)n++;for(;s<M.length&&!M[s].includes("DetermineComponentFrameRoot");)s++;if(n===v.length||s===M.length)for(n=v.length-1,s=M.length-1;1<=n&&0<=s&&v[n]!==M[s];)s--;for(;1<=n&&0<=s;n--,s--)if(v[n]!==M[s]){if(n!==1||s!==1)do if(n--,s--,0>s||v[n]!==M[s]){var B=`
`+v[n].replace(" at new "," at ");return e.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",e.displayName)),B}while(1<=n&&0<=s);break}}}finally{Be=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?oe(a):""}function lt(e,t){switch(e.tag){case 26:case 27:case 5:return oe(e.type);case 16:return oe("Lazy");case 13:return e.child!==t&&t!==null?oe("Suspense Fallback"):oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return Ge(e.type,!1);case 11:return Ge(e.type.render,!1);case 1:return Ge(e.type,!0);case 31:return oe("Activity");default:return""}}function tt(e){try{var t="",a=null;do t+=lt(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var vt=Object.prototype.hasOwnProperty,$a=i.unstable_scheduleCallback,pl=i.unstable_cancelCallback,fc=i.unstable_shouldYield,Lg=i.unstable_requestPaint,jt=i.unstable_now,Rg=i.unstable_getCurrentPriorityLevel,ju=i.unstable_ImmediatePriority,Su=i.unstable_UserBlockingPriority,Es=i.unstable_NormalPriority,Ug=i.unstable_LowPriority,wu=i.unstable_IdlePriority,Bg=i.log,Hg=i.unstable_setDisableYieldValue,yl=null,St=null;function va(e){if(typeof Bg=="function"&&Hg(e),St&&typeof St.setStrictMode=="function")try{St.setStrictMode(yl,e)}catch{}}var wt=Math.clz32?Math.clz32:Kg,qg=Math.log,Yg=Math.LN2;function Kg(e){return e>>>=0,e===0?32:31-(qg(e)/Yg|0)|0}var Ts=256,As=262144,Ms=4194304;function Wa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ks(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var s=0,c=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var g=n&134217727;return g!==0?(n=g&~c,n!==0?s=Wa(n):(d&=g,d!==0?s=Wa(d):a||(a=g&~e,a!==0&&(s=Wa(a))))):(g=n&~c,g!==0?s=Wa(g):d!==0?s=Wa(d):a||(a=n&~e,a!==0&&(s=Wa(a)))),s===0?0:t!==0&&t!==s&&(t&c)===0&&(c=s&-s,a=t&-t,c>=a||c===32&&(a&4194048)!==0)?t:s}function bl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Gg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nu(){var e=Ms;return Ms<<=1,(Ms&62914560)===0&&(Ms=4194304),e}function dc(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function vl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Vg(e,t,a,n,s,c){var d=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var g=e.entanglements,v=e.expirationTimes,M=e.hiddenUpdates;for(a=d&~a;0<a;){var B=31-wt(a),Y=1<<B;g[B]=0,v[B]=-1;var k=M[B];if(k!==null)for(M[B]=null,B=0;B<k.length;B++){var O=k[B];O!==null&&(O.lane&=-536870913)}a&=~Y}n!==0&&Cu(e,n,0),c!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=c&~(d&~t))}function Cu(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-wt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function Eu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-wt(a),s=1<<n;s&t|e[n]&t&&(e[n]|=t),a&=~s}}function Tu(e,t){var a=t&-t;return a=(a&42)!==0?1:mc(a),(a&(e.suspendedLanes|t))!==0?0:a}function mc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function hc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Au(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:hh(e.type))}function Mu(e,t){var a=G.p;try{return G.p=e,t()}finally{G.p=a}}var ja=Math.random().toString(36).slice(2),st="__reactFiber$"+ja,mt="__reactProps$"+ja,Sn="__reactContainer$"+ja,gc="__reactEvents$"+ja,Xg="__reactListeners$"+ja,Qg="__reactHandles$"+ja,ku="__reactResources$"+ja,jl="__reactMarker$"+ja;function xc(e){delete e[st],delete e[mt],delete e[gc],delete e[Xg],delete e[Qg]}function wn(e){var t=e[st];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Sn]||a[st]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Fm(e);e!==null;){if(a=e[st])return a;e=Fm(e)}return t}e=a,a=e.parentNode}return null}function Nn(e){if(e=e[st]||e[Sn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Sl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function Cn(e){var t=e[ku];return t||(t=e[ku]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function at(e){e[jl]=!0}var zu=new Set,Du={};function Ia(e,t){En(e,t),En(e+"Capture",t)}function En(e,t){for(Du[e]=t,e=0;e<t.length;e++)zu.add(t[e])}var Zg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_u={},Ou={};function Jg(e){return vt.call(Ou,e)?!0:vt.call(_u,e)?!1:Zg.test(e)?Ou[e]=!0:(_u[e]=!0,!1)}function zs(e,t,a){if(Jg(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Ds(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Pt(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function _t(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $g(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(d){a=""+d,c.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pc(e){if(!e._valueTracker){var t=Lu(e)?"checked":"value";e._valueTracker=$g(e,t,""+e[t])}}function Ru(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=Lu(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function _s(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Wg=/[\n"\\]/g;function Ot(e){return e.replace(Wg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function yc(e,t,a,n,s,c,d,g){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),t!=null?d==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+_t(t)):e.value!==""+_t(t)&&(e.value=""+_t(t)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),t!=null?bc(e,d,_t(t)):a!=null?bc(e,d,_t(a)):n!=null&&e.removeAttribute("value"),s==null&&c!=null&&(e.defaultChecked=!!c),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.name=""+_t(g):e.removeAttribute("name")}function Uu(e,t,a,n,s,c,d,g){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||a!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){pc(e);return}a=a!=null?""+_t(a):"",t=t!=null?""+_t(t):a,g||t===e.value||(e.value=t),e.defaultValue=t}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=g?e.checked:!!n,e.defaultChecked=!!n,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),pc(e)}function bc(e,t,a){t==="number"&&_s(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Tn(e,t,a,n){if(e=e.options,t){t={};for(var s=0;s<a.length;s++)t["$"+a[s]]=!0;for(a=0;a<e.length;a++)s=t.hasOwnProperty("$"+e[a].value),e[a].selected!==s&&(e[a].selected=s),s&&n&&(e[a].defaultSelected=!0)}else{for(a=""+_t(a),t=null,s=0;s<e.length;s++){if(e[s].value===a){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Bu(e,t,a){if(t!=null&&(t=""+_t(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+_t(a):""}function Hu(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(u(92));if(ze(n)){if(1<n.length)throw Error(u(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=_t(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),pc(e)}function An(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Ig=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qu(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||Ig.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Yu(e,t,a){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&a[s]!==n&&qu(e,s,n)}else for(var c in t)t.hasOwnProperty(c)&&qu(e,c,t[c])}function vc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Os(e){return Pg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ea(){}var jc=null;function Sc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mn=null,kn=null;function Ku(e){var t=Nn(e);if(t&&(e=t.stateNode)){var a=e[mt]||null;e:switch(e=t.stateNode,t.type){case"input":if(yc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ot(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var s=n[mt]||null;if(!s)throw Error(u(90));yc(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&Ru(n)}break e;case"textarea":Bu(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Tn(e,!!a.multiple,t,!1)}}}var wc=!1;function Gu(e,t,a){if(wc)return e(t,a);wc=!0;try{var n=e(t);return n}finally{if(wc=!1,(Mn!==null||kn!==null)&&(ji(),Mn&&(t=Mn,e=kn,kn=Mn=null,Ku(t),e)))for(t=0;t<e.length;t++)Ku(e[t])}}function wl(e,t){var a=e.stateNode;if(a===null)return null;var n=a[mt]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(u(231,t,typeof a));return a}var ta=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nc=!1;if(ta)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){Nc=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{Nc=!1}var Sa=null,Cc=null,Ls=null;function Vu(){if(Ls)return Ls;var e,t=Cc,a=t.length,n,s="value"in Sa?Sa.value:Sa.textContent,c=s.length;for(e=0;e<a&&t[e]===s[e];e++);var d=a-e;for(n=1;n<=d&&t[a-n]===s[c-n];n++);return Ls=s.slice(e,1<n?1-n:void 0)}function Rs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Us(){return!0}function Xu(){return!1}function ht(e){function t(a,n,s,c,d){this._reactName=a,this._targetInst=s,this.type=n,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(a=e[g],this[g]=a?a(c):c[g]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Us:Xu,this.isPropagationStopped=Xu,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Us)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Us)},persist:function(){},isPersistent:Us}),t}var Fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bs=ht(Fa),Cl=b({},Fa,{view:0,detail:0}),ex=ht(Cl),Ec,Tc,El,Hs=b({},Cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==El&&(El&&e.type==="mousemove"?(Ec=e.screenX-El.screenX,Tc=e.screenY-El.screenY):Tc=Ec=0,El=e),Ec)},movementY:function(e){return"movementY"in e?e.movementY:Tc}}),Qu=ht(Hs),tx=b({},Hs,{dataTransfer:0}),ax=ht(tx),nx=b({},Cl,{relatedTarget:0}),Ac=ht(nx),lx=b({},Fa,{animationName:0,elapsedTime:0,pseudoElement:0}),sx=ht(lx),ix=b({},Fa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cx=ht(ix),rx=b({},Fa,{data:0}),Zu=ht(rx),ox={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ux={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fx[e])?!!t[e]:!1}function Mc(){return dx}var mx=b({},Cl,{key:function(e){if(e.key){var t=ox[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ux[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mc,charCode:function(e){return e.type==="keypress"?Rs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hx=ht(mx),gx=b({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ju=ht(gx),xx=b({},Cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mc}),px=ht(xx),yx=b({},Fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),bx=ht(yx),vx=b({},Hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jx=ht(vx),Sx=b({},Fa,{newState:0,oldState:0}),wx=ht(Sx),Nx=[9,13,27,32],kc=ta&&"CompositionEvent"in window,Tl=null;ta&&"documentMode"in document&&(Tl=document.documentMode);var Cx=ta&&"TextEvent"in window&&!Tl,$u=ta&&(!kc||Tl&&8<Tl&&11>=Tl),Wu=" ",Iu=!1;function Fu(e,t){switch(e){case"keyup":return Nx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zn=!1;function Ex(e,t){switch(e){case"compositionend":return Pu(t);case"keypress":return t.which!==32?null:(Iu=!0,Wu);case"textInput":return e=t.data,e===Wu&&Iu?null:e;default:return null}}function Tx(e,t){if(zn)return e==="compositionend"||!kc&&Fu(e,t)?(e=Vu(),Ls=Cc=Sa=null,zn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $u&&t.locale!=="ko"?null:t.data;default:return null}}var Ax={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ef(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ax[e.type]:t==="textarea"}function tf(e,t,a,n){Mn?kn?kn.push(n):kn=[n]:Mn=n,t=Ai(t,"onChange"),0<t.length&&(a=new Bs("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var Al=null,Ml=null;function Mx(e){Bm(e,0)}function qs(e){var t=Sl(e);if(Ru(t))return e}function af(e,t){if(e==="change")return t}var nf=!1;if(ta){var zc;if(ta){var Dc="oninput"in document;if(!Dc){var lf=document.createElement("div");lf.setAttribute("oninput","return;"),Dc=typeof lf.oninput=="function"}zc=Dc}else zc=!1;nf=zc&&(!document.documentMode||9<document.documentMode)}function sf(){Al&&(Al.detachEvent("onpropertychange",cf),Ml=Al=null)}function cf(e){if(e.propertyName==="value"&&qs(Ml)){var t=[];tf(t,Ml,e,Sc(e)),Gu(Mx,t)}}function kx(e,t,a){e==="focusin"?(sf(),Al=t,Ml=a,Al.attachEvent("onpropertychange",cf)):e==="focusout"&&sf()}function zx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qs(Ml)}function Dx(e,t){if(e==="click")return qs(t)}function _x(e,t){if(e==="input"||e==="change")return qs(t)}function Ox(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nt=typeof Object.is=="function"?Object.is:Ox;function kl(e,t){if(Nt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var s=a[n];if(!vt.call(t,s)||!Nt(e[s],t[s]))return!1}return!0}function rf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function of(e,t){var a=rf(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=rf(a)}}function uf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ff(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=_s(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=_s(e.document)}return t}function _c(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Lx=ta&&"documentMode"in document&&11>=document.documentMode,Dn=null,Oc=null,zl=null,Lc=!1;function df(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Lc||Dn==null||Dn!==_s(n)||(n=Dn,"selectionStart"in n&&_c(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),zl&&kl(zl,n)||(zl=n,n=Ai(Oc,"onSelect"),0<n.length&&(t=new Bs("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=Dn)))}function Pa(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var _n={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionrun:Pa("Transition","TransitionRun"),transitionstart:Pa("Transition","TransitionStart"),transitioncancel:Pa("Transition","TransitionCancel"),transitionend:Pa("Transition","TransitionEnd")},Rc={},mf={};ta&&(mf=document.createElement("div").style,"AnimationEvent"in window||(delete _n.animationend.animation,delete _n.animationiteration.animation,delete _n.animationstart.animation),"TransitionEvent"in window||delete _n.transitionend.transition);function en(e){if(Rc[e])return Rc[e];if(!_n[e])return e;var t=_n[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in mf)return Rc[e]=t[a];return e}var hf=en("animationend"),gf=en("animationiteration"),xf=en("animationstart"),Rx=en("transitionrun"),Ux=en("transitionstart"),Bx=en("transitioncancel"),pf=en("transitionend"),yf=new Map,Uc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uc.push("scrollEnd");function Vt(e,t){yf.set(e,t),Ia(t,[e])}var Ys=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Lt=[],On=0,Bc=0;function Ks(){for(var e=On,t=Bc=On=0;t<e;){var a=Lt[t];Lt[t++]=null;var n=Lt[t];Lt[t++]=null;var s=Lt[t];Lt[t++]=null;var c=Lt[t];if(Lt[t++]=null,n!==null&&s!==null){var d=n.pending;d===null?s.next=s:(s.next=d.next,d.next=s),n.pending=s}c!==0&&bf(a,s,c)}}function Gs(e,t,a,n){Lt[On++]=e,Lt[On++]=t,Lt[On++]=a,Lt[On++]=n,Bc|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Hc(e,t,a,n){return Gs(e,t,a,n),Vs(e)}function tn(e,t){return Gs(e,null,null,t),Vs(e)}function bf(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var s=!1,c=e.return;c!==null;)c.childLanes|=a,n=c.alternate,n!==null&&(n.childLanes|=a),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(s=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,s&&t!==null&&(s=31-wt(a),e=c.hiddenUpdates,n=e[s],n===null?e[s]=[t]:n.push(t),t.lane=a|536870912),c):null}function Vs(e){if(50<Pl)throw Pl=0,Jr=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ln={};function Hx(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,a,n){return new Hx(e,t,a,n)}function qc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function aa(e,t){var a=e.alternate;return a===null?(a=Ct(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function vf(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Xs(e,t,a,n,s,c){var d=0;if(n=e,typeof e=="function")qc(e)&&(d=1);else if(typeof e=="string")d=Vp(e,a,Q.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case F:return e=Ct(31,a,t,s),e.elementType=F,e.lanes=c,e;case z:return an(a.children,s,c,t);case I:d=8,s|=24;break;case te:return e=Ct(12,a,t,s|2),e.elementType=te,e.lanes=c,e;case J:return e=Ct(13,a,t,s),e.elementType=J,e.lanes=c,e;case V:return e=Ct(19,a,t,s),e.elementType=V,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:d=10;break e;case $:d=9;break e;case ae:d=11;break e;case Z:d=14;break e;case de:d=16,n=null;break e}d=29,a=Error(u(130,e===null?"null":typeof e,"")),n=null}return t=Ct(d,a,t,s),t.elementType=e,t.type=n,t.lanes=c,t}function an(e,t,a,n){return e=Ct(7,e,n,t),e.lanes=a,e}function Yc(e,t,a){return e=Ct(6,e,null,t),e.lanes=a,e}function jf(e){var t=Ct(18,null,null,0);return t.stateNode=e,t}function Kc(e,t,a){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Sf=new WeakMap;function Rt(e,t){if(typeof e=="object"&&e!==null){var a=Sf.get(e);return a!==void 0?a:(t={value:e,source:t,stack:tt(t)},Sf.set(e,t),t)}return{value:e,source:t,stack:tt(t)}}var Rn=[],Un=0,Qs=null,Dl=0,Ut=[],Bt=0,wa=null,Jt=1,$t="";function na(e,t){Rn[Un++]=Dl,Rn[Un++]=Qs,Qs=e,Dl=t}function wf(e,t,a){Ut[Bt++]=Jt,Ut[Bt++]=$t,Ut[Bt++]=wa,wa=e;var n=Jt;e=$t;var s=32-wt(n)-1;n&=~(1<<s),a+=1;var c=32-wt(t)+s;if(30<c){var d=s-s%5;c=(n&(1<<d)-1).toString(32),n>>=d,s-=d,Jt=1<<32-wt(t)+s|a<<s|n,$t=c+e}else Jt=1<<c|a<<s|n,$t=e}function Gc(e){e.return!==null&&(na(e,1),wf(e,1,0))}function Vc(e){for(;e===Qs;)Qs=Rn[--Un],Rn[Un]=null,Dl=Rn[--Un],Rn[Un]=null;for(;e===wa;)wa=Ut[--Bt],Ut[Bt]=null,$t=Ut[--Bt],Ut[Bt]=null,Jt=Ut[--Bt],Ut[Bt]=null}function Nf(e,t){Ut[Bt++]=Jt,Ut[Bt++]=$t,Ut[Bt++]=wa,Jt=t.id,$t=t.overflow,wa=e}var it=null,qe=null,Ne=!1,Na=null,Ht=!1,Xc=Error(u(519));function Ca(e){var t=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l(Rt(t,e)),Xc}function Cf(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[st]=e,t[mt]=n,a){case"dialog":je("cancel",t),je("close",t);break;case"iframe":case"object":case"embed":je("load",t);break;case"video":case"audio":for(a=0;a<ts.length;a++)je(ts[a],t);break;case"source":je("error",t);break;case"img":case"image":case"link":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"input":je("invalid",t),Uu(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":je("invalid",t);break;case"textarea":je("invalid",t),Hu(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||Km(t.textContent,a)?(n.popover!=null&&(je("beforetoggle",t),je("toggle",t)),n.onScroll!=null&&je("scroll",t),n.onScrollEnd!=null&&je("scrollend",t),n.onClick!=null&&(t.onclick=ea),t=!0):t=!1,t||Ca(e,!0)}function Ef(e){for(it=e.return;it;)switch(it.tag){case 5:case 31:case 13:Ht=!1;return;case 27:case 3:Ht=!0;return;default:it=it.return}}function Bn(e){if(e!==it)return!1;if(!Ne)return Ef(e),Ne=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||oo(e.type,e.memoizedProps)),a=!a),a&&qe&&Ca(e),Ef(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));qe=Im(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));qe=Im(e)}else t===27?(t=qe,Ha(e.type)?(e=go,go=null,qe=e):qe=t):qe=it?Yt(e.stateNode.nextSibling):null;return!0}function nn(){qe=it=null,Ne=!1}function Qc(){var e=Na;return e!==null&&(yt===null?yt=e:yt.push.apply(yt,e),Na=null),e}function _l(e){Na===null?Na=[e]:Na.push(e)}var Zc=S(null),ln=null,la=null;function Ea(e,t,a){D(Zc,t._currentValue),t._currentValue=a}function sa(e){e._currentValue=Zc.current,H(Zc)}function Jc(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function $c(e,t,a,n){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){var d=s.child;c=c.firstContext;e:for(;c!==null;){var g=c;c=s;for(var v=0;v<t.length;v++)if(g.context===t[v]){c.lanes|=a,g=c.alternate,g!==null&&(g.lanes|=a),Jc(c.return,a,e),n||(d=null);break e}c=g.next}}else if(s.tag===18){if(d=s.return,d===null)throw Error(u(341));d.lanes|=a,c=d.alternate,c!==null&&(c.lanes|=a),Jc(d,a,e),d=null}else d=s.child;if(d!==null)d.return=s;else for(d=s;d!==null;){if(d===e){d=null;break}if(s=d.sibling,s!==null){s.return=d.return,d=s;break}d=d.return}s=d}}function Hn(e,t,a,n){e=null;for(var s=t,c=!1;s!==null;){if(!c){if((s.flags&524288)!==0)c=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var d=s.alternate;if(d===null)throw Error(u(387));if(d=d.memoizedProps,d!==null){var g=s.type;Nt(s.pendingProps.value,d.value)||(e!==null?e.push(g):e=[g])}}else if(s===be.current){if(d=s.alternate,d===null)throw Error(u(387));d.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(is):e=[is])}s=s.return}e!==null&&$c(t,e,a,n),t.flags|=262144}function Zs(e){for(e=e.firstContext;e!==null;){if(!Nt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function sn(e){ln=e,la=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ct(e){return Tf(ln,e)}function Js(e,t){return ln===null&&sn(e),Tf(e,t)}function Tf(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},la===null){if(e===null)throw Error(u(308));la=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else la=la.next=t;return a}var qx=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Yx=i.unstable_scheduleCallback,Kx=i.unstable_NormalPriority,$e={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wc(){return{controller:new qx,data:new Map,refCount:0}}function Ol(e){e.refCount--,e.refCount===0&&Yx(Kx,function(){e.controller.abort()})}var Ll=null,Ic=0,qn=0,Yn=null;function Gx(e,t){if(Ll===null){var a=Ll=[];Ic=0,qn=eo(),Yn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return Ic++,t.then(Af,Af),t}function Af(){if(--Ic===0&&Ll!==null){Yn!==null&&(Yn.status="fulfilled");var e=Ll;Ll=null,qn=0,Yn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Vx(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(s){a.push(s)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var s=0;s<a.length;s++)(0,a[s])(t)},function(s){for(n.status="rejected",n.reason=s,s=0;s<a.length;s++)(0,a[s])(void 0)}),n}var Mf=R.S;R.S=function(e,t){dm=jt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Gx(e,t),Mf!==null&&Mf(e,t)};var cn=S(null);function Fc(){var e=cn.current;return e!==null?e:Re.pooledCache}function $s(e,t){t===null?D(cn,cn.current):D(cn,t.pool)}function kf(){var e=Fc();return e===null?null:{parent:$e._currentValue,pool:e}}var Kn=Error(u(460)),Pc=Error(u(474)),Ws=Error(u(542)),Is={then:function(){}};function zf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Df(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ea,ea),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Of(e),e;default:if(typeof t.status=="string")t.then(ea,ea);else{if(e=Re,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=n}},function(n){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Of(e),e}throw on=t,Kn}}function rn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(on=a,Kn):a}}var on=null;function _f(){if(on===null)throw Error(u(459));var e=on;return on=null,e}function Of(e){if(e===Kn||e===Ws)throw Error(u(483))}var Gn=null,Rl=0;function Fs(e){var t=Rl;return Rl+=1,Gn===null&&(Gn=[]),Df(Gn,e,t)}function Ul(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ps(e,t){throw t.$$typeof===N?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Lf(e){function t(E,w){if(e){var A=E.deletions;A===null?(E.deletions=[w],E.flags|=16):A.push(w)}}function a(E,w){if(!e)return null;for(;w!==null;)t(E,w),w=w.sibling;return null}function n(E){for(var w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function s(E,w){return E=aa(E,w),E.index=0,E.sibling=null,E}function c(E,w,A){return E.index=A,e?(A=E.alternate,A!==null?(A=A.index,A<w?(E.flags|=67108866,w):A):(E.flags|=67108866,w)):(E.flags|=1048576,w)}function d(E){return e&&E.alternate===null&&(E.flags|=67108866),E}function g(E,w,A,q){return w===null||w.tag!==6?(w=Yc(A,E.mode,q),w.return=E,w):(w=s(w,A),w.return=E,w)}function v(E,w,A,q){var se=A.type;return se===z?B(E,w,A.props.children,q,A.key):w!==null&&(w.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===de&&rn(se)===w.type)?(w=s(w,A.props),Ul(w,A),w.return=E,w):(w=Xs(A.type,A.key,A.props,null,E.mode,q),Ul(w,A),w.return=E,w)}function M(E,w,A,q){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=Kc(A,E.mode,q),w.return=E,w):(w=s(w,A.children||[]),w.return=E,w)}function B(E,w,A,q,se){return w===null||w.tag!==7?(w=an(A,E.mode,q,se),w.return=E,w):(w=s(w,A),w.return=E,w)}function Y(E,w,A){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=Yc(""+w,E.mode,A),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _:return A=Xs(w.type,w.key,w.props,null,E.mode,A),Ul(A,w),A.return=E,A;case X:return w=Kc(w,E.mode,A),w.return=E,w;case de:return w=rn(w),Y(E,w,A)}if(ze(w)||pe(w))return w=an(w,E.mode,A,null),w.return=E,w;if(typeof w.then=="function")return Y(E,Fs(w),A);if(w.$$typeof===L)return Y(E,Js(E,w),A);Ps(E,w)}return null}function k(E,w,A,q){var se=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return se!==null?null:g(E,w,""+A,q);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case _:return A.key===se?v(E,w,A,q):null;case X:return A.key===se?M(E,w,A,q):null;case de:return A=rn(A),k(E,w,A,q)}if(ze(A)||pe(A))return se!==null?null:B(E,w,A,q,null);if(typeof A.then=="function")return k(E,w,Fs(A),q);if(A.$$typeof===L)return k(E,w,Js(E,A),q);Ps(E,A)}return null}function O(E,w,A,q,se){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return E=E.get(A)||null,g(w,E,""+q,se);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case _:return E=E.get(q.key===null?A:q.key)||null,v(w,E,q,se);case X:return E=E.get(q.key===null?A:q.key)||null,M(w,E,q,se);case de:return q=rn(q),O(E,w,A,q,se)}if(ze(q)||pe(q))return E=E.get(A)||null,B(w,E,q,se,null);if(typeof q.then=="function")return O(E,w,A,Fs(q),se);if(q.$$typeof===L)return O(E,w,A,Js(w,q),se);Ps(w,q)}return null}function P(E,w,A,q){for(var se=null,Ee=null,ee=w,xe=w=0,we=null;ee!==null&&xe<A.length;xe++){ee.index>xe?(we=ee,ee=null):we=ee.sibling;var Te=k(E,ee,A[xe],q);if(Te===null){ee===null&&(ee=we);break}e&&ee&&Te.alternate===null&&t(E,ee),w=c(Te,w,xe),Ee===null?se=Te:Ee.sibling=Te,Ee=Te,ee=we}if(xe===A.length)return a(E,ee),Ne&&na(E,xe),se;if(ee===null){for(;xe<A.length;xe++)ee=Y(E,A[xe],q),ee!==null&&(w=c(ee,w,xe),Ee===null?se=ee:Ee.sibling=ee,Ee=ee);return Ne&&na(E,xe),se}for(ee=n(ee);xe<A.length;xe++)we=O(ee,E,xe,A[xe],q),we!==null&&(e&&we.alternate!==null&&ee.delete(we.key===null?xe:we.key),w=c(we,w,xe),Ee===null?se=we:Ee.sibling=we,Ee=we);return e&&ee.forEach(function(Va){return t(E,Va)}),Ne&&na(E,xe),se}function ce(E,w,A,q){if(A==null)throw Error(u(151));for(var se=null,Ee=null,ee=w,xe=w=0,we=null,Te=A.next();ee!==null&&!Te.done;xe++,Te=A.next()){ee.index>xe?(we=ee,ee=null):we=ee.sibling;var Va=k(E,ee,Te.value,q);if(Va===null){ee===null&&(ee=we);break}e&&ee&&Va.alternate===null&&t(E,ee),w=c(Va,w,xe),Ee===null?se=Va:Ee.sibling=Va,Ee=Va,ee=we}if(Te.done)return a(E,ee),Ne&&na(E,xe),se;if(ee===null){for(;!Te.done;xe++,Te=A.next())Te=Y(E,Te.value,q),Te!==null&&(w=c(Te,w,xe),Ee===null?se=Te:Ee.sibling=Te,Ee=Te);return Ne&&na(E,xe),se}for(ee=n(ee);!Te.done;xe++,Te=A.next())Te=O(ee,E,xe,Te.value,q),Te!==null&&(e&&Te.alternate!==null&&ee.delete(Te.key===null?xe:Te.key),w=c(Te,w,xe),Ee===null?se=Te:Ee.sibling=Te,Ee=Te);return e&&ee.forEach(function(t0){return t(E,t0)}),Ne&&na(E,xe),se}function Oe(E,w,A,q){if(typeof A=="object"&&A!==null&&A.type===z&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case _:e:{for(var se=A.key;w!==null;){if(w.key===se){if(se=A.type,se===z){if(w.tag===7){a(E,w.sibling),q=s(w,A.props.children),q.return=E,E=q;break e}}else if(w.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===de&&rn(se)===w.type){a(E,w.sibling),q=s(w,A.props),Ul(q,A),q.return=E,E=q;break e}a(E,w);break}else t(E,w);w=w.sibling}A.type===z?(q=an(A.props.children,E.mode,q,A.key),q.return=E,E=q):(q=Xs(A.type,A.key,A.props,null,E.mode,q),Ul(q,A),q.return=E,E=q)}return d(E);case X:e:{for(se=A.key;w!==null;){if(w.key===se)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){a(E,w.sibling),q=s(w,A.children||[]),q.return=E,E=q;break e}else{a(E,w);break}else t(E,w);w=w.sibling}q=Kc(A,E.mode,q),q.return=E,E=q}return d(E);case de:return A=rn(A),Oe(E,w,A,q)}if(ze(A))return P(E,w,A,q);if(pe(A)){if(se=pe(A),typeof se!="function")throw Error(u(150));return A=se.call(A),ce(E,w,A,q)}if(typeof A.then=="function")return Oe(E,w,Fs(A),q);if(A.$$typeof===L)return Oe(E,w,Js(E,A),q);Ps(E,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,w!==null&&w.tag===6?(a(E,w.sibling),q=s(w,A),q.return=E,E=q):(a(E,w),q=Yc(A,E.mode,q),q.return=E,E=q),d(E)):a(E,w)}return function(E,w,A,q){try{Rl=0;var se=Oe(E,w,A,q);return Gn=null,se}catch(ee){if(ee===Kn||ee===Ws)throw ee;var Ee=Ct(29,ee,null,E.mode);return Ee.lanes=q,Ee.return=E,Ee}}}var un=Lf(!0),Rf=Lf(!1),Ta=!1;function er(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Aa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ma(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Ae&2)!==0){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=Vs(e),bf(e,null,a),t}return Gs(e,n,t,a),Vs(e)}function Bl(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Eu(e,a)}}function ar(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var s=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var d={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};c===null?s=c=d:c=c.next=d,a=a.next}while(a!==null);c===null?s=c=t:c=c.next=t}else s=c=t;a={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:c,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var nr=!1;function Hl(){if(nr){var e=Yn;if(e!==null)throw e}}function ql(e,t,a,n){nr=!1;var s=e.updateQueue;Ta=!1;var c=s.firstBaseUpdate,d=s.lastBaseUpdate,g=s.shared.pending;if(g!==null){s.shared.pending=null;var v=g,M=v.next;v.next=null,d===null?c=M:d.next=M,d=v;var B=e.alternate;B!==null&&(B=B.updateQueue,g=B.lastBaseUpdate,g!==d&&(g===null?B.firstBaseUpdate=M:g.next=M,B.lastBaseUpdate=v))}if(c!==null){var Y=s.baseState;d=0,B=M=v=null,g=c;do{var k=g.lane&-536870913,O=k!==g.lane;if(O?(Se&k)===k:(n&k)===k){k!==0&&k===qn&&(nr=!0),B!==null&&(B=B.next={lane:0,tag:g.tag,payload:g.payload,callback:null,next:null});e:{var P=e,ce=g;k=t;var Oe=a;switch(ce.tag){case 1:if(P=ce.payload,typeof P=="function"){Y=P.call(Oe,Y,k);break e}Y=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=ce.payload,k=typeof P=="function"?P.call(Oe,Y,k):P,k==null)break e;Y=b({},Y,k);break e;case 2:Ta=!0}}k=g.callback,k!==null&&(e.flags|=64,O&&(e.flags|=8192),O=s.callbacks,O===null?s.callbacks=[k]:O.push(k))}else O={lane:k,tag:g.tag,payload:g.payload,callback:g.callback,next:null},B===null?(M=B=O,v=Y):B=B.next=O,d|=k;if(g=g.next,g===null){if(g=s.shared.pending,g===null)break;O=g,g=O.next,O.next=null,s.lastBaseUpdate=O,s.shared.pending=null}}while(!0);B===null&&(v=Y),s.baseState=v,s.firstBaseUpdate=M,s.lastBaseUpdate=B,c===null&&(s.shared.lanes=0),Oa|=d,e.lanes=d,e.memoizedState=Y}}function Uf(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function Bf(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Uf(a[e],t)}var Vn=S(null),ei=S(0);function Hf(e,t){e=ha,D(ei,e),D(Vn,t),ha=e|t.baseLanes}function lr(){D(ei,ha),D(Vn,Vn.current)}function sr(){ha=ei.current,H(Vn),H(ei)}var Et=S(null),qt=null;function ka(e){var t=e.alternate;D(Ze,Ze.current&1),D(Et,e),qt===null&&(t===null||Vn.current!==null||t.memoizedState!==null)&&(qt=e)}function ir(e){D(Ze,Ze.current),D(Et,e),qt===null&&(qt=e)}function qf(e){e.tag===22?(D(Ze,Ze.current),D(Et,e),qt===null&&(qt=e)):za()}function za(){D(Ze,Ze.current),D(Et,Et.current)}function Tt(e){H(Et),qt===e&&(qt=null),H(Ze)}var Ze=S(0);function ti(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||mo(a)||ho(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ia=0,he=null,De=null,We=null,ai=!1,Xn=!1,fn=!1,ni=0,Yl=0,Qn=null,Xx=0;function Xe(){throw Error(u(321))}function cr(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Nt(e[a],t[a]))return!1;return!0}function rr(e,t,a,n,s,c){return ia=c,he=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=e===null||e.memoizedState===null?wd:wr,fn=!1,c=a(n,s),fn=!1,Xn&&(c=Kf(t,a,n,s)),Yf(e),c}function Yf(e){R.H=Vl;var t=De!==null&&De.next!==null;if(ia=0,We=De=he=null,ai=!1,Yl=0,Qn=null,t)throw Error(u(300));e===null||Ie||(e=e.dependencies,e!==null&&Zs(e)&&(Ie=!0))}function Kf(e,t,a,n){he=e;var s=0;do{if(Xn&&(Qn=null),Yl=0,Xn=!1,25<=s)throw Error(u(301));if(s+=1,We=De=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}R.H=Nd,c=t(a,n)}while(Xn);return c}function Qx(){var e=R.H,t=e.useState()[0];return t=typeof t.then=="function"?Kl(t):t,e=e.useState()[0],(De!==null?De.memoizedState:null)!==e&&(he.flags|=1024),t}function or(){var e=ni!==0;return ni=0,e}function ur(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function fr(e){if(ai){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ai=!1}ia=0,We=De=he=null,Xn=!1,Yl=ni=0,Qn=null}function ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?he.memoizedState=We=e:We=We.next=e,We}function Je(){if(De===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var t=We===null?he.memoizedState:We.next;if(t!==null)We=t,De=e;else{if(e===null)throw he.alternate===null?Error(u(467)):Error(u(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},We===null?he.memoizedState=We=e:We=We.next=e}return We}function li(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(e){var t=Yl;return Yl+=1,Qn===null&&(Qn=[]),e=Df(Qn,e,t),t=he,(We===null?t.memoizedState:We.next)===null&&(t=t.alternate,R.H=t===null||t.memoizedState===null?wd:wr),e}function si(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Kl(e);if(e.$$typeof===L)return ct(e)}throw Error(u(438,String(e)))}function dr(e){var t=null,a=he.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=he.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=li(),he.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=Le;return t.index++,a}function ca(e,t){return typeof t=="function"?t(e):t}function ii(e){var t=Je();return mr(t,De,e)}function mr(e,t,a){var n=e.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=a;var s=e.baseQueue,c=n.pending;if(c!==null){if(s!==null){var d=s.next;s.next=c.next,c.next=d}t.baseQueue=s=c,n.pending=null}if(c=e.baseState,s===null)e.memoizedState=c;else{t=s.next;var g=d=null,v=null,M=t,B=!1;do{var Y=M.lane&-536870913;if(Y!==M.lane?(Se&Y)===Y:(ia&Y)===Y){var k=M.revertLane;if(k===0)v!==null&&(v=v.next={lane:0,revertLane:0,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),Y===qn&&(B=!0);else if((ia&k)===k){M=M.next,k===qn&&(B=!0);continue}else Y={lane:0,revertLane:M.revertLane,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},v===null?(g=v=Y,d=c):v=v.next=Y,he.lanes|=k,Oa|=k;Y=M.action,fn&&a(c,Y),c=M.hasEagerState?M.eagerState:a(c,Y)}else k={lane:Y,revertLane:M.revertLane,gesture:M.gesture,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},v===null?(g=v=k,d=c):v=v.next=k,he.lanes|=Y,Oa|=Y;M=M.next}while(M!==null&&M!==t);if(v===null?d=c:v.next=g,!Nt(c,e.memoizedState)&&(Ie=!0,B&&(a=Yn,a!==null)))throw a;e.memoizedState=c,e.baseState=d,e.baseQueue=v,n.lastRenderedState=c}return s===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function hr(e){var t=Je(),a=t.queue;if(a===null)throw Error(u(311));a.lastRenderedReducer=e;var n=a.dispatch,s=a.pending,c=t.memoizedState;if(s!==null){a.pending=null;var d=s=s.next;do c=e(c,d.action),d=d.next;while(d!==s);Nt(c,t.memoizedState)||(Ie=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),a.lastRenderedState=c}return[c,n]}function Gf(e,t,a){var n=he,s=Je(),c=Ne;if(c){if(a===void 0)throw Error(u(407));a=a()}else a=t();var d=!Nt((De||s).memoizedState,a);if(d&&(s.memoizedState=a,Ie=!0),s=s.queue,pr(Qf.bind(null,n,s,e),[e]),s.getSnapshot!==t||d||We!==null&&We.memoizedState.tag&1){if(n.flags|=2048,Zn(9,{destroy:void 0},Xf.bind(null,n,s,a,t),null),Re===null)throw Error(u(349));c||(ia&127)!==0||Vf(n,t,a)}return a}function Vf(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=he.updateQueue,t===null?(t=li(),he.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Xf(e,t,a,n){t.value=a,t.getSnapshot=n,Zf(t)&&Jf(e)}function Qf(e,t,a){return a(function(){Zf(t)&&Jf(e)})}function Zf(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Nt(e,a)}catch{return!0}}function Jf(e){var t=tn(e,2);t!==null&&bt(t,e,2)}function gr(e){var t=ft();if(typeof e=="function"){var a=e;if(e=a(),fn){va(!0);try{a()}finally{va(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e},t}function $f(e,t,a,n){return e.baseState=a,mr(e,De,typeof n=="function"?n:ca)}function Zx(e,t,a,n,s){if(oi(e))throw Error(u(485));if(e=t.action,e!==null){var c={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){c.listeners.push(d)}};R.T!==null?a(!0):c.isTransition=!1,n(c),a=t.pending,a===null?(c.next=t.pending=c,Wf(t,c)):(c.next=a.next,t.pending=a.next=c)}}function Wf(e,t){var a=t.action,n=t.payload,s=e.state;if(t.isTransition){var c=R.T,d={};R.T=d;try{var g=a(s,n),v=R.S;v!==null&&v(d,g),If(e,t,g)}catch(M){xr(e,t,M)}finally{c!==null&&d.types!==null&&(c.types=d.types),R.T=c}}else try{c=a(s,n),If(e,t,c)}catch(M){xr(e,t,M)}}function If(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Ff(e,t,n)},function(n){return xr(e,t,n)}):Ff(e,t,a)}function Ff(e,t,a){t.status="fulfilled",t.value=a,Pf(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Wf(e,a)))}function xr(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,Pf(t),t=t.next;while(t!==n)}e.action=null}function Pf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ed(e,t){return t}function td(e,t){if(Ne){var a=Re.formState;if(a!==null){e:{var n=he;if(Ne){if(qe){t:{for(var s=qe,c=Ht;s.nodeType!==8;){if(!c){s=null;break t}if(s=Yt(s.nextSibling),s===null){s=null;break t}}c=s.data,s=c==="F!"||c==="F"?s:null}if(s){qe=Yt(s.nextSibling),n=s.data==="F!";break e}}Ca(n)}n=!1}n&&(t=a[0])}}return a=ft(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ed,lastRenderedState:t},a.queue=n,a=vd.bind(null,he,n),n.dispatch=a,n=gr(!1),c=Sr.bind(null,he,!1,n.queue),n=ft(),s={state:t,dispatch:null,action:e,pending:null},n.queue=s,a=Zx.bind(null,he,s,c,a),s.dispatch=a,n.memoizedState=e,[t,a,!1]}function ad(e){var t=Je();return nd(t,De,e)}function nd(e,t,a){if(t=mr(e,t,ed)[0],e=ii(ca)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=Kl(t)}catch(d){throw d===Kn?Ws:d}else n=t;t=Je();var s=t.queue,c=s.dispatch;return a!==t.memoizedState&&(he.flags|=2048,Zn(9,{destroy:void 0},Jx.bind(null,s,a),null)),[n,c,e]}function Jx(e,t){e.action=t}function ld(e){var t=Je(),a=De;if(a!==null)return nd(t,a,e);Je(),t=t.memoizedState,a=Je();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function Zn(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=he.updateQueue,t===null&&(t=li(),he.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function sd(){return Je().memoizedState}function ci(e,t,a,n){var s=ft();he.flags|=e,s.memoizedState=Zn(1|t,{destroy:void 0},a,n===void 0?null:n)}function ri(e,t,a,n){var s=Je();n=n===void 0?null:n;var c=s.memoizedState.inst;De!==null&&n!==null&&cr(n,De.memoizedState.deps)?s.memoizedState=Zn(t,c,a,n):(he.flags|=e,s.memoizedState=Zn(1|t,c,a,n))}function id(e,t){ci(8390656,8,e,t)}function pr(e,t){ri(2048,8,e,t)}function $x(e){he.flags|=4;var t=he.updateQueue;if(t===null)t=li(),he.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function cd(e){var t=Je().memoizedState;return $x({ref:t,nextImpl:e}),function(){if((Ae&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}function rd(e,t){return ri(4,2,e,t)}function od(e,t){return ri(4,4,e,t)}function ud(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fd(e,t,a){a=a!=null?a.concat([e]):null,ri(4,4,ud.bind(null,t,e),a)}function yr(){}function dd(e,t){var a=Je();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&cr(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function md(e,t){var a=Je();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&cr(t,n[1]))return n[0];if(n=e(),fn){va(!0);try{e()}finally{va(!1)}}return a.memoizedState=[n,t],n}function br(e,t,a){return a===void 0||(ia&1073741824)!==0&&(Se&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=hm(),he.lanes|=e,Oa|=e,a)}function hd(e,t,a,n){return Nt(a,t)?a:Vn.current!==null?(e=br(e,a,n),Nt(e,t)||(Ie=!0),e):(ia&42)===0||(ia&1073741824)!==0&&(Se&261930)===0?(Ie=!0,e.memoizedState=a):(e=hm(),he.lanes|=e,Oa|=e,t)}function gd(e,t,a,n,s){var c=G.p;G.p=c!==0&&8>c?c:8;var d=R.T,g={};R.T=g,Sr(e,!1,t,a);try{var v=s(),M=R.S;if(M!==null&&M(g,v),v!==null&&typeof v=="object"&&typeof v.then=="function"){var B=Vx(v,n);Gl(e,t,B,kt(e))}else Gl(e,t,n,kt(e))}catch(Y){Gl(e,t,{then:function(){},status:"rejected",reason:Y},kt())}finally{G.p=c,d!==null&&g.types!==null&&(d.types=g.types),R.T=d}}function Wx(){}function vr(e,t,a,n){if(e.tag!==5)throw Error(u(476));var s=xd(e).queue;gd(e,s,t,K,a===null?Wx:function(){return pd(e),a(n)})}function xd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:K},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function pd(e){var t=xd(e);t.next===null&&(t=e.alternate.memoizedState),Gl(e,t.next.queue,{},kt())}function jr(){return ct(is)}function yd(){return Je().memoizedState}function bd(){return Je().memoizedState}function Ix(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=kt();e=Aa(a);var n=Ma(t,e,a);n!==null&&(bt(n,t,a),Bl(n,t,a)),t={cache:Wc()},e.payload=t;return}t=t.return}}function Fx(e,t,a){var n=kt();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},oi(e)?jd(t,a):(a=Hc(e,t,a,n),a!==null&&(bt(a,e,n),Sd(a,t,n)))}function vd(e,t,a){var n=kt();Gl(e,t,a,n)}function Gl(e,t,a,n){var s={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(oi(e))jd(t,s);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var d=t.lastRenderedState,g=c(d,a);if(s.hasEagerState=!0,s.eagerState=g,Nt(g,d))return Gs(e,t,s,0),Re===null&&Ks(),!1}catch{}if(a=Hc(e,t,s,n),a!==null)return bt(a,e,n),Sd(a,t,n),!0}return!1}function Sr(e,t,a,n){if(n={lane:2,revertLane:eo(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},oi(e)){if(t)throw Error(u(479))}else t=Hc(e,a,n,2),t!==null&&bt(t,e,2)}function oi(e){var t=e.alternate;return e===he||t!==null&&t===he}function jd(e,t){Xn=ai=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Sd(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Eu(e,a)}}var Vl={readContext:ct,use:si,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};Vl.useEffectEvent=Xe;var wd={readContext:ct,use:si,useCallback:function(e,t){return ft().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:id,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,ci(4194308,4,ud.bind(null,t,e),a)},useLayoutEffect:function(e,t){return ci(4194308,4,e,t)},useInsertionEffect:function(e,t){ci(4,2,e,t)},useMemo:function(e,t){var a=ft();t=t===void 0?null:t;var n=e();if(fn){va(!0);try{e()}finally{va(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=ft();if(a!==void 0){var s=a(t);if(fn){va(!0);try{a(t)}finally{va(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=Fx.bind(null,he,e),[n.memoizedState,e]},useRef:function(e){var t=ft();return e={current:e},t.memoizedState=e},useState:function(e){e=gr(e);var t=e.queue,a=vd.bind(null,he,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:yr,useDeferredValue:function(e,t){var a=ft();return br(a,e,t)},useTransition:function(){var e=gr(!1);return e=gd.bind(null,he,e.queue,!0,!1),ft().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=he,s=ft();if(Ne){if(a===void 0)throw Error(u(407));a=a()}else{if(a=t(),Re===null)throw Error(u(349));(Se&127)!==0||Vf(n,t,a)}s.memoizedState=a;var c={value:a,getSnapshot:t};return s.queue=c,id(Qf.bind(null,n,c,e),[e]),n.flags|=2048,Zn(9,{destroy:void 0},Xf.bind(null,n,c,a,t),null),a},useId:function(){var e=ft(),t=Re.identifierPrefix;if(Ne){var a=$t,n=Jt;a=(n&~(1<<32-wt(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=ni++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Xx++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:jr,useFormState:td,useActionState:td,useOptimistic:function(e){var t=ft();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Sr.bind(null,he,!0,a),a.dispatch=t,[e,t]},useMemoCache:dr,useCacheRefresh:function(){return ft().memoizedState=Ix.bind(null,he)},useEffectEvent:function(e){var t=ft(),a={impl:e};return t.memoizedState=a,function(){if((Ae&2)!==0)throw Error(u(440));return a.impl.apply(void 0,arguments)}}},wr={readContext:ct,use:si,useCallback:dd,useContext:ct,useEffect:pr,useImperativeHandle:fd,useInsertionEffect:rd,useLayoutEffect:od,useMemo:md,useReducer:ii,useRef:sd,useState:function(){return ii(ca)},useDebugValue:yr,useDeferredValue:function(e,t){var a=Je();return hd(a,De.memoizedState,e,t)},useTransition:function(){var e=ii(ca)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:Kl(e),t]},useSyncExternalStore:Gf,useId:yd,useHostTransitionStatus:jr,useFormState:ad,useActionState:ad,useOptimistic:function(e,t){var a=Je();return $f(a,De,e,t)},useMemoCache:dr,useCacheRefresh:bd};wr.useEffectEvent=cd;var Nd={readContext:ct,use:si,useCallback:dd,useContext:ct,useEffect:pr,useImperativeHandle:fd,useInsertionEffect:rd,useLayoutEffect:od,useMemo:md,useReducer:hr,useRef:sd,useState:function(){return hr(ca)},useDebugValue:yr,useDeferredValue:function(e,t){var a=Je();return De===null?br(a,e,t):hd(a,De.memoizedState,e,t)},useTransition:function(){var e=hr(ca)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:Kl(e),t]},useSyncExternalStore:Gf,useId:yd,useHostTransitionStatus:jr,useFormState:ld,useActionState:ld,useOptimistic:function(e,t){var a=Je();return De!==null?$f(a,De,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:dr,useCacheRefresh:bd};Nd.useEffectEvent=cd;function Nr(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:b({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Cr={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=kt(),s=Aa(n);s.payload=t,a!=null&&(s.callback=a),t=Ma(e,s,n),t!==null&&(bt(t,e,n),Bl(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=kt(),s=Aa(n);s.tag=1,s.payload=t,a!=null&&(s.callback=a),t=Ma(e,s,n),t!==null&&(bt(t,e,n),Bl(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=kt(),n=Aa(a);n.tag=2,t!=null&&(n.callback=t),t=Ma(e,n,a),t!==null&&(bt(t,e,a),Bl(t,e,a))}};function Cd(e,t,a,n,s,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,c,d):t.prototype&&t.prototype.isPureReactComponent?!kl(a,n)||!kl(s,c):!0}function Ed(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Cr.enqueueReplaceState(t,t.state,null)}function dn(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=b({},a));for(var s in e)a[s]===void 0&&(a[s]=e[s])}return a}function Td(e){Ys(e)}function Ad(e){console.error(e)}function Md(e){Ys(e)}function ui(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function kd(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Er(e,t,a){return a=Aa(a),a.tag=3,a.payload={element:null},a.callback=function(){ui(e,t)},a}function zd(e){return e=Aa(e),e.tag=3,e}function Dd(e,t,a,n){var s=a.type.getDerivedStateFromError;if(typeof s=="function"){var c=n.value;e.payload=function(){return s(c)},e.callback=function(){kd(t,a,n)}}var d=a.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){kd(t,a,n),typeof s!="function"&&(La===null?La=new Set([this]):La.add(this));var g=n.stack;this.componentDidCatch(n.value,{componentStack:g!==null?g:""})})}function Px(e,t,a,n,s){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&Hn(t,a,s,!0),a=Et.current,a!==null){switch(a.tag){case 31:case 13:return qt===null?Si():a.alternate===null&&Qe===0&&(Qe=3),a.flags&=-257,a.flags|=65536,a.lanes=s,n===Is?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),Ir(e,n,s)),!1;case 22:return a.flags|=65536,n===Is?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),Ir(e,n,s)),!1}throw Error(u(435,a.tag))}return Ir(e,n,s),Si(),!1}if(Ne)return t=Et.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==Xc&&(e=Error(u(422),{cause:n}),_l(Rt(e,a)))):(n!==Xc&&(t=Error(u(423),{cause:n}),_l(Rt(t,a))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,n=Rt(n,a),s=Er(e.stateNode,n,s),ar(e,s),Qe!==4&&(Qe=2)),!1;var c=Error(u(520),{cause:n});if(c=Rt(c,a),Fl===null?Fl=[c]:Fl.push(c),Qe!==4&&(Qe=2),t===null)return!0;n=Rt(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=s&-s,a.lanes|=e,e=Er(a.stateNode,n,e),ar(a,e),!1;case 1:if(t=a.type,c=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(La===null||!La.has(c))))return a.flags|=65536,s&=-s,a.lanes|=s,s=zd(s),Dd(s,e,a,n),ar(a,s),!1}a=a.return}while(a!==null);return!1}var Tr=Error(u(461)),Ie=!1;function rt(e,t,a,n){t.child=e===null?Rf(t,null,a,n):un(t,e.child,a,n)}function _d(e,t,a,n,s){a=a.render;var c=t.ref;if("ref"in n){var d={};for(var g in n)g!=="ref"&&(d[g]=n[g])}else d=n;return sn(t),n=rr(e,t,a,d,c,s),g=or(),e!==null&&!Ie?(ur(e,t,s),ra(e,t,s)):(Ne&&g&&Gc(t),t.flags|=1,rt(e,t,n,s),t.child)}function Od(e,t,a,n,s){if(e===null){var c=a.type;return typeof c=="function"&&!qc(c)&&c.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=c,Ld(e,t,c,n,s)):(e=Xs(a.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!Lr(e,s)){var d=c.memoizedProps;if(a=a.compare,a=a!==null?a:kl,a(d,n)&&e.ref===t.ref)return ra(e,t,s)}return t.flags|=1,e=aa(c,n),e.ref=t.ref,e.return=t,t.child=e}function Ld(e,t,a,n,s){if(e!==null){var c=e.memoizedProps;if(kl(c,n)&&e.ref===t.ref)if(Ie=!1,t.pendingProps=n=c,Lr(e,s))(e.flags&131072)!==0&&(Ie=!0);else return t.lanes=e.lanes,ra(e,t,s)}return Ar(e,t,a,n,s)}function Rd(e,t,a,n){var s=n.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|a:a,e!==null){for(n=t.child=e.child,s=0;n!==null;)s=s|n.lanes|n.childLanes,n=n.sibling;n=s&~c}else n=0,t.child=null;return Ud(e,t,c,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&$s(t,c!==null?c.cachePool:null),c!==null?Hf(t,c):lr(),qf(t);else return n=t.lanes=536870912,Ud(e,t,c!==null?c.baseLanes|a:a,a,n)}else c!==null?($s(t,c.cachePool),Hf(t,c),za(),t.memoizedState=null):(e!==null&&$s(t,null),lr(),za());return rt(e,t,s,a),t.child}function Xl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ud(e,t,a,n,s){var c=Fc();return c=c===null?null:{parent:$e._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&$s(t,null),lr(),qf(t),e!==null&&Hn(e,t,n,!0),t.childLanes=s,null}function fi(e,t){return t=mi({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Bd(e,t,a){return un(t,e.child,null,a),e=fi(t,t.pendingProps),e.flags|=2,Tt(t),t.memoizedState=null,e}function ep(e,t,a){var n=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ne){if(n.mode==="hidden")return e=fi(t,n),t.lanes=536870912,Xl(null,e);if(ir(t),(e=qe)?(e=Wm(e,Ht),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wa!==null?{id:Jt,overflow:$t}:null,retryLane:536870912,hydrationErrors:null},a=jf(e),a.return=t,t.child=a,it=t,qe=null)):e=null,e===null)throw Ca(t);return t.lanes=536870912,null}return fi(t,n)}var c=e.memoizedState;if(c!==null){var d=c.dehydrated;if(ir(t),s)if(t.flags&256)t.flags&=-257,t=Bd(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(u(558));else if(Ie||Hn(e,t,a,!1),s=(a&e.childLanes)!==0,Ie||s){if(n=Re,n!==null&&(d=Tu(n,a),d!==0&&d!==c.retryLane))throw c.retryLane=d,tn(e,d),bt(n,e,d),Tr;Si(),t=Bd(e,t,a)}else e=c.treeContext,qe=Yt(d.nextSibling),it=t,Ne=!0,Na=null,Ht=!1,e!==null&&Nf(t,e),t=fi(t,n),t.flags|=4096;return t}return e=aa(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function di(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(u(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Ar(e,t,a,n,s){return sn(t),a=rr(e,t,a,n,void 0,s),n=or(),e!==null&&!Ie?(ur(e,t,s),ra(e,t,s)):(Ne&&n&&Gc(t),t.flags|=1,rt(e,t,a,s),t.child)}function Hd(e,t,a,n,s,c){return sn(t),t.updateQueue=null,a=Kf(t,n,a,s),Yf(e),n=or(),e!==null&&!Ie?(ur(e,t,c),ra(e,t,c)):(Ne&&n&&Gc(t),t.flags|=1,rt(e,t,a,c),t.child)}function qd(e,t,a,n,s){if(sn(t),t.stateNode===null){var c=Ln,d=a.contextType;typeof d=="object"&&d!==null&&(c=ct(d)),c=new a(n,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Cr,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=n,c.state=t.memoizedState,c.refs={},er(t),d=a.contextType,c.context=typeof d=="object"&&d!==null?ct(d):Ln,c.state=t.memoizedState,d=a.getDerivedStateFromProps,typeof d=="function"&&(Nr(t,a,d,n),c.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(d=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),d!==c.state&&Cr.enqueueReplaceState(c,c.state,null),ql(t,n,c,s),Hl(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){c=t.stateNode;var g=t.memoizedProps,v=dn(a,g);c.props=v;var M=c.context,B=a.contextType;d=Ln,typeof B=="object"&&B!==null&&(d=ct(B));var Y=a.getDerivedStateFromProps;B=typeof Y=="function"||typeof c.getSnapshotBeforeUpdate=="function",g=t.pendingProps!==g,B||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(g||M!==d)&&Ed(t,c,n,d),Ta=!1;var k=t.memoizedState;c.state=k,ql(t,n,c,s),Hl(),M=t.memoizedState,g||k!==M||Ta?(typeof Y=="function"&&(Nr(t,a,Y,n),M=t.memoizedState),(v=Ta||Cd(t,a,v,n,k,M,d))?(B||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=M),c.props=n,c.state=M,c.context=d,n=v):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{c=t.stateNode,tr(e,t),d=t.memoizedProps,B=dn(a,d),c.props=B,Y=t.pendingProps,k=c.context,M=a.contextType,v=Ln,typeof M=="object"&&M!==null&&(v=ct(M)),g=a.getDerivedStateFromProps,(M=typeof g=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==Y||k!==v)&&Ed(t,c,n,v),Ta=!1,k=t.memoizedState,c.state=k,ql(t,n,c,s),Hl();var O=t.memoizedState;d!==Y||k!==O||Ta||e!==null&&e.dependencies!==null&&Zs(e.dependencies)?(typeof g=="function"&&(Nr(t,a,g,n),O=t.memoizedState),(B=Ta||Cd(t,a,B,n,k,O,v)||e!==null&&e.dependencies!==null&&Zs(e.dependencies))?(M||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,O,v),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,O,v)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=O),c.props=n,c.state=O,c.context=v,n=B):(typeof c.componentDidUpdate!="function"||d===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),n=!1)}return c=n,di(e,t),n=(t.flags&128)!==0,c||n?(c=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&n?(t.child=un(t,e.child,null,s),t.child=un(t,null,a,s)):rt(e,t,a,s),t.memoizedState=c.state,e=t.child):e=ra(e,t,s),e}function Yd(e,t,a,n){return nn(),t.flags|=256,rt(e,t,a,n),t.child}var Mr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kr(e){return{baseLanes:e,cachePool:kf()}}function zr(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Mt),e}function Kd(e,t,a){var n=t.pendingProps,s=!1,c=(t.flags&128)!==0,d;if((d=c)||(d=e!==null&&e.memoizedState===null?!1:(Ze.current&2)!==0),d&&(s=!0,t.flags&=-129),d=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ne){if(s?ka(t):za(),(e=qe)?(e=Wm(e,Ht),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wa!==null?{id:Jt,overflow:$t}:null,retryLane:536870912,hydrationErrors:null},a=jf(e),a.return=t,t.child=a,it=t,qe=null)):e=null,e===null)throw Ca(t);return ho(e)?t.lanes=32:t.lanes=536870912,null}var g=n.children;return n=n.fallback,s?(za(),s=t.mode,g=mi({mode:"hidden",children:g},s),n=an(n,s,a,null),g.return=t,n.return=t,g.sibling=n,t.child=g,n=t.child,n.memoizedState=kr(a),n.childLanes=zr(e,d,a),t.memoizedState=Mr,Xl(null,n)):(ka(t),Dr(t,g))}var v=e.memoizedState;if(v!==null&&(g=v.dehydrated,g!==null)){if(c)t.flags&256?(ka(t),t.flags&=-257,t=_r(e,t,a)):t.memoizedState!==null?(za(),t.child=e.child,t.flags|=128,t=null):(za(),g=n.fallback,s=t.mode,n=mi({mode:"visible",children:n.children},s),g=an(g,s,a,null),g.flags|=2,n.return=t,g.return=t,n.sibling=g,t.child=n,un(t,e.child,null,a),n=t.child,n.memoizedState=kr(a),n.childLanes=zr(e,d,a),t.memoizedState=Mr,t=Xl(null,n));else if(ka(t),ho(g)){if(d=g.nextSibling&&g.nextSibling.dataset,d)var M=d.dgst;d=M,n=Error(u(419)),n.stack="",n.digest=d,_l({value:n,source:null,stack:null}),t=_r(e,t,a)}else if(Ie||Hn(e,t,a,!1),d=(a&e.childLanes)!==0,Ie||d){if(d=Re,d!==null&&(n=Tu(d,a),n!==0&&n!==v.retryLane))throw v.retryLane=n,tn(e,n),bt(d,e,n),Tr;mo(g)||Si(),t=_r(e,t,a)}else mo(g)?(t.flags|=192,t.child=e.child,t=null):(e=v.treeContext,qe=Yt(g.nextSibling),it=t,Ne=!0,Na=null,Ht=!1,e!==null&&Nf(t,e),t=Dr(t,n.children),t.flags|=4096);return t}return s?(za(),g=n.fallback,s=t.mode,v=e.child,M=v.sibling,n=aa(v,{mode:"hidden",children:n.children}),n.subtreeFlags=v.subtreeFlags&65011712,M!==null?g=aa(M,g):(g=an(g,s,a,null),g.flags|=2),g.return=t,n.return=t,n.sibling=g,t.child=n,Xl(null,n),n=t.child,g=e.child.memoizedState,g===null?g=kr(a):(s=g.cachePool,s!==null?(v=$e._currentValue,s=s.parent!==v?{parent:v,pool:v}:s):s=kf(),g={baseLanes:g.baseLanes|a,cachePool:s}),n.memoizedState=g,n.childLanes=zr(e,d,a),t.memoizedState=Mr,Xl(e.child,n)):(ka(t),a=e.child,e=a.sibling,a=aa(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(d=t.deletions,d===null?(t.deletions=[e],t.flags|=16):d.push(e)),t.child=a,t.memoizedState=null,a)}function Dr(e,t){return t=mi({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function mi(e,t){return e=Ct(22,e,null,t),e.lanes=0,e}function _r(e,t,a){return un(t,e.child,null,a),e=Dr(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Gd(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Jc(e.return,t,a)}function Or(e,t,a,n,s,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:s,treeForkCount:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=n,d.tail=a,d.tailMode=s,d.treeForkCount=c)}function Vd(e,t,a){var n=t.pendingProps,s=n.revealOrder,c=n.tail;n=n.children;var d=Ze.current,g=(d&2)!==0;if(g?(d=d&1|2,t.flags|=128):d&=1,D(Ze,d),rt(e,t,n,a),n=Ne?Dl:0,!g&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gd(e,a,t);else if(e.tag===19)Gd(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(a=t.child,s=null;a!==null;)e=a.alternate,e!==null&&ti(e)===null&&(s=a),a=a.sibling;a=s,a===null?(s=t.child,t.child=null):(s=a.sibling,a.sibling=null),Or(t,!1,s,a,c,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ti(e)===null){t.child=s;break}e=s.sibling,s.sibling=a,a=s,s=e}Or(t,!0,a,null,c,n);break;case"together":Or(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function ra(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Oa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Hn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,a=aa(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=aa(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Lr(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Zs(e)))}function tp(e,t,a){switch(t.tag){case 3:Pe(t,t.stateNode.containerInfo),Ea(t,$e,e.memoizedState.cache),nn();break;case 27:case 5:ba(t);break;case 4:Pe(t,t.stateNode.containerInfo);break;case 10:Ea(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ir(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(ka(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Kd(e,t,a):(ka(t),e=ra(e,t,a),e!==null?e.sibling:null);ka(t);break;case 19:var s=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(Hn(e,t,a,!1),n=(a&t.childLanes)!==0),s){if(n)return Vd(e,t,a);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),D(Ze,Ze.current),n)break;return null;case 22:return t.lanes=0,Rd(e,t,a,t.pendingProps);case 24:Ea(t,$e,e.memoizedState.cache)}return ra(e,t,a)}function Xd(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ie=!0;else{if(!Lr(e,a)&&(t.flags&128)===0)return Ie=!1,tp(e,t,a);Ie=(e.flags&131072)!==0}else Ie=!1,Ne&&(t.flags&1048576)!==0&&wf(t,Dl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=rn(t.elementType),t.type=e,typeof e=="function")qc(e)?(n=dn(e,n),t.tag=1,t=qd(null,t,e,n,a)):(t.tag=0,t=Ar(null,t,e,n,a));else{if(e!=null){var s=e.$$typeof;if(s===ae){t.tag=11,t=_d(null,t,e,n,a);break e}else if(s===Z){t.tag=14,t=Od(null,t,e,n,a);break e}}throw t=ye(e)||e,Error(u(306,t,""))}}return t;case 0:return Ar(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,s=dn(n,t.pendingProps),qd(e,t,n,s,a);case 3:e:{if(Pe(t,t.stateNode.containerInfo),e===null)throw Error(u(387));n=t.pendingProps;var c=t.memoizedState;s=c.element,tr(e,t),ql(t,n,null,a);var d=t.memoizedState;if(n=d.cache,Ea(t,$e,n),n!==c.cache&&$c(t,[$e],a,!0),Hl(),n=d.element,c.isDehydrated)if(c={element:n,isDehydrated:!1,cache:d.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=Yd(e,t,n,a);break e}else if(n!==s){s=Rt(Error(u(424)),t),_l(s),t=Yd(e,t,n,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,qe=Yt(e.firstChild),it=t,Ne=!0,Na=null,Ht=!0,a=Rf(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(nn(),n===s){t=ra(e,t,a);break e}rt(e,t,n,a)}t=t.child}return t;case 26:return di(e,t),e===null?(a=ah(t.type,null,t.pendingProps,null))?t.memoizedState=a:Ne||(a=t.type,e=t.pendingProps,n=Mi(fe.current).createElement(a),n[st]=t,n[mt]=e,ot(n,a,e),at(n),t.stateNode=n):t.memoizedState=ah(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ba(t),e===null&&Ne&&(n=t.stateNode=Pm(t.type,t.pendingProps,fe.current),it=t,Ht=!0,s=qe,Ha(t.type)?(go=s,qe=Yt(n.firstChild)):qe=s),rt(e,t,t.pendingProps.children,a),di(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ne&&((s=n=qe)&&(n=zp(n,t.type,t.pendingProps,Ht),n!==null?(t.stateNode=n,it=t,qe=Yt(n.firstChild),Ht=!1,s=!0):s=!1),s||Ca(t)),ba(t),s=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,n=c.children,oo(s,c)?n=null:d!==null&&oo(s,d)&&(t.flags|=32),t.memoizedState!==null&&(s=rr(e,t,Qx,null,null,a),is._currentValue=s),di(e,t),rt(e,t,n,a),t.child;case 6:return e===null&&Ne&&((e=a=qe)&&(a=Dp(a,t.pendingProps,Ht),a!==null?(t.stateNode=a,it=t,qe=null,e=!0):e=!1),e||Ca(t)),null;case 13:return Kd(e,t,a);case 4:return Pe(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=un(t,null,n,a):rt(e,t,n,a),t.child;case 11:return _d(e,t,t.type,t.pendingProps,a);case 7:return rt(e,t,t.pendingProps,a),t.child;case 8:return rt(e,t,t.pendingProps.children,a),t.child;case 12:return rt(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,Ea(t,t.type,n.value),rt(e,t,n.children,a),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,sn(t),s=ct(s),n=n(s),t.flags|=1,rt(e,t,n,a),t.child;case 14:return Od(e,t,t.type,t.pendingProps,a);case 15:return Ld(e,t,t.type,t.pendingProps,a);case 19:return Vd(e,t,a);case 31:return ep(e,t,a);case 22:return Rd(e,t,a,t.pendingProps);case 24:return sn(t),n=ct($e),e===null?(s=Fc(),s===null&&(s=Re,c=Wc(),s.pooledCache=c,c.refCount++,c!==null&&(s.pooledCacheLanes|=a),s=c),t.memoizedState={parent:n,cache:s},er(t),Ea(t,$e,s)):((e.lanes&a)!==0&&(tr(e,t),ql(t,null,null,a),Hl()),s=e.memoizedState,c=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Ea(t,$e,n)):(n=c.cache,Ea(t,$e,n),n!==s.cache&&$c(t,[$e],a,!0))),rt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function oa(e){e.flags|=4}function Rr(e,t,a,n,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(ym())e.flags|=8192;else throw on=Is,Pc}else e.flags&=-16777217}function Qd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ch(t))if(ym())e.flags|=8192;else throw on=Is,Pc}function hi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Nu():536870912,e.lanes|=t,In|=t)}function Ql(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var s=e.child;s!==null;)a|=s.lanes|s.childLanes,n|=s.subtreeFlags&65011712,n|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)a|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function ap(e,t,a){var n=t.pendingProps;switch(Vc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return Ye(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),sa($e),Ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Bn(t)?oa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Qc())),Ye(t),null;case 26:var s=t.type,c=t.memoizedState;return e===null?(oa(t),c!==null?(Ye(t),Qd(t,c)):(Ye(t),Rr(t,s,null,n,a))):c?c!==e.memoizedState?(oa(t),Ye(t),Qd(t,c)):(Ye(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&oa(t),Ye(t),Rr(t,s,e,n,a)),null;case 27:if(U(t),a=fe.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&oa(t);else{if(!n){if(t.stateNode===null)throw Error(u(166));return Ye(t),null}e=Q.current,Bn(t)?Cf(t):(e=Pm(s,n,a),t.stateNode=e,oa(t))}return Ye(t),null;case 5:if(U(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&oa(t);else{if(!n){if(t.stateNode===null)throw Error(u(166));return Ye(t),null}if(c=Q.current,Bn(t))Cf(t);else{var d=Mi(fe.current);switch(c){case 1:c=d.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:c=d.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":c=d.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":c=d.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":c=d.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof n.is=="string"?d.createElement("select",{is:n.is}):d.createElement("select"),n.multiple?c.multiple=!0:n.size&&(c.size=n.size);break;default:c=typeof n.is=="string"?d.createElement(s,{is:n.is}):d.createElement(s)}}c[st]=t,c[mt]=n;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)c.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=c;e:switch(ot(c,s,n),s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&oa(t)}}return Ye(t),Rr(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&oa(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(u(166));if(e=fe.current,Bn(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,s=it,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}e[st]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||Km(e.nodeValue,a)),e||Ca(t,!0)}else e=Mi(e).createTextNode(n),e[st]=t,t.stateNode=e}return Ye(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=Bn(t),a!==null){if(e===null){if(!n)throw Error(u(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[st]=t}else nn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),e=!1}else a=Qc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Tt(t),t):(Tt(t),null);if((t.flags&128)!==0)throw Error(u(558))}return Ye(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=Bn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(u(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(u(317));s[st]=t}else nn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),s=!1}else s=Qc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Tt(t),t):(Tt(t),null)}return Tt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==s&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),hi(t,t.updateQueue),Ye(t),null);case 4:return Ue(),e===null&&lo(t.stateNode.containerInfo),Ye(t),null;case 10:return sa(t.type),Ye(t),null;case 19:if(H(Ze),n=t.memoizedState,n===null)return Ye(t),null;if(s=(t.flags&128)!==0,c=n.rendering,c===null)if(s)Ql(n,!1);else{if(Qe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=ti(e),c!==null){for(t.flags|=128,Ql(n,!1),e=c.updateQueue,t.updateQueue=e,hi(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)vf(a,e),a=a.sibling;return D(Ze,Ze.current&1|2),Ne&&na(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&jt()>bi&&(t.flags|=128,s=!0,Ql(n,!1),t.lanes=4194304)}else{if(!s)if(e=ti(c),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,hi(t,e),Ql(n,!0),n.tail===null&&n.tailMode==="hidden"&&!c.alternate&&!Ne)return Ye(t),null}else 2*jt()-n.renderingStartTime>bi&&a!==536870912&&(t.flags|=128,s=!0,Ql(n,!1),t.lanes=4194304);n.isBackwards?(c.sibling=t.child,t.child=c):(e=n.last,e!==null?e.sibling=c:t.child=c,n.last=c)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=jt(),e.sibling=null,a=Ze.current,D(Ze,s?a&1|2:a&1),Ne&&na(t,n.treeForkCount),e):(Ye(t),null);case 22:case 23:return Tt(t),sr(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),a=t.updateQueue,a!==null&&hi(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&H(cn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),sa($e),Ye(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function np(e,t){switch(Vc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sa($e),Ue(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return U(t),null;case 31:if(t.memoizedState!==null){if(Tt(t),t.alternate===null)throw Error(u(340));nn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Tt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));nn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(Ze),null;case 4:return Ue(),null;case 10:return sa(t.type),null;case 22:case 23:return Tt(t),sr(),e!==null&&H(cn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return sa($e),null;case 25:return null;default:return null}}function Zd(e,t){switch(Vc(t),t.tag){case 3:sa($e),Ue();break;case 26:case 27:case 5:U(t);break;case 4:Ue();break;case 31:t.memoizedState!==null&&Tt(t);break;case 13:Tt(t);break;case 19:H(Ze);break;case 10:sa(t.type);break;case 22:case 23:Tt(t),sr(),e!==null&&H(cn);break;case 24:sa($e)}}function Zl(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var s=n.next;a=s;do{if((a.tag&e)===e){n=void 0;var c=a.create,d=a.inst;n=c(),d.destroy=n}a=a.next}while(a!==s)}}catch(g){ke(t,t.return,g)}}function Da(e,t,a){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var c=s.next;n=c;do{if((n.tag&e)===e){var d=n.inst,g=d.destroy;if(g!==void 0){d.destroy=void 0,s=t;var v=a,M=g;try{M()}catch(B){ke(s,v,B)}}}n=n.next}while(n!==c)}}catch(B){ke(t,t.return,B)}}function Jd(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Bf(t,a)}catch(n){ke(e,e.return,n)}}}function $d(e,t,a){a.props=dn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){ke(e,t,n)}}function Jl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(s){ke(e,t,s)}}function Wt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(s){ke(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(s){ke(e,t,s)}else a.current=null}function Wd(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(s){ke(e,e.return,s)}}function Ur(e,t,a){try{var n=e.stateNode;Cp(n,e.type,a,t),n[mt]=t}catch(s){ke(e,e.return,s)}}function Id(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ha(e.type)||e.tag===4}function Br(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Id(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ha(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hr(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ea));else if(n!==4&&(n===27&&Ha(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Hr(e,t,a),e=e.sibling;e!==null;)Hr(e,t,a),e=e.sibling}function gi(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&Ha(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(gi(e,t,a),e=e.sibling;e!==null;)gi(e,t,a),e=e.sibling}function Fd(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ot(t,n,a),t[st]=e,t[mt]=a}catch(c){ke(e,e.return,c)}}var ua=!1,Fe=!1,qr=!1,Pd=typeof WeakSet=="function"?WeakSet:Set,nt=null;function lp(e,t){if(e=e.containerInfo,co=Ri,e=ff(e),_c(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var s=n.anchorOffset,c=n.focusNode;n=n.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var d=0,g=-1,v=-1,M=0,B=0,Y=e,k=null;t:for(;;){for(var O;Y!==a||s!==0&&Y.nodeType!==3||(g=d+s),Y!==c||n!==0&&Y.nodeType!==3||(v=d+n),Y.nodeType===3&&(d+=Y.nodeValue.length),(O=Y.firstChild)!==null;)k=Y,Y=O;for(;;){if(Y===e)break t;if(k===a&&++M===s&&(g=d),k===c&&++B===n&&(v=d),(O=Y.nextSibling)!==null)break;Y=k,k=Y.parentNode}Y=O}a=g===-1||v===-1?null:{start:g,end:v}}else a=null}a=a||{start:0,end:0}}else a=null;for(ro={focusedElem:e,selectionRange:a},Ri=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){switch(t=nt,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)s=e[a],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,a=t,s=c.memoizedProps,c=c.memoizedState,n=a.stateNode;try{var P=dn(a.type,s);e=n.getSnapshotBeforeUpdate(P,c),n.__reactInternalSnapshotBeforeUpdate=e}catch(ce){ke(a,a.return,ce)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)fo(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}}function em(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:da(e,a),n&4&&Zl(5,a);break;case 1:if(da(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(d){ke(a,a.return,d)}else{var s=dn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(d){ke(a,a.return,d)}}n&64&&Jd(a),n&512&&Jl(a,a.return);break;case 3:if(da(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Bf(e,t)}catch(d){ke(a,a.return,d)}}break;case 27:t===null&&n&4&&Fd(a);case 26:case 5:da(e,a),t===null&&n&4&&Wd(a),n&512&&Jl(a,a.return);break;case 12:da(e,a);break;case 31:da(e,a),n&4&&nm(e,a);break;case 13:da(e,a),n&4&&lm(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=mp.bind(null,a),_p(e,a))));break;case 22:if(n=a.memoizedState!==null||ua,!n){t=t!==null&&t.memoizedState!==null||Fe,s=ua;var c=Fe;ua=n,(Fe=t)&&!c?ma(e,a,(a.subtreeFlags&8772)!==0):da(e,a),ua=s,Fe=c}break;case 30:break;default:da(e,a)}}function tm(e){var t=e.alternate;t!==null&&(e.alternate=null,tm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&xc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ke=null,gt=!1;function fa(e,t,a){for(a=a.child;a!==null;)am(e,t,a),a=a.sibling}function am(e,t,a){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(yl,a)}catch{}switch(a.tag){case 26:Fe||Wt(a,t),fa(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Fe||Wt(a,t);var n=Ke,s=gt;Ha(a.type)&&(Ke=a.stateNode,gt=!1),fa(e,t,a),ns(a.stateNode),Ke=n,gt=s;break;case 5:Fe||Wt(a,t);case 6:if(n=Ke,s=gt,Ke=null,fa(e,t,a),Ke=n,gt=s,Ke!==null)if(gt)try{(Ke.nodeType===9?Ke.body:Ke.nodeName==="HTML"?Ke.ownerDocument.body:Ke).removeChild(a.stateNode)}catch(c){ke(a,t,c)}else try{Ke.removeChild(a.stateNode)}catch(c){ke(a,t,c)}break;case 18:Ke!==null&&(gt?(e=Ke,Jm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),sl(e)):Jm(Ke,a.stateNode));break;case 4:n=Ke,s=gt,Ke=a.stateNode.containerInfo,gt=!0,fa(e,t,a),Ke=n,gt=s;break;case 0:case 11:case 14:case 15:Da(2,a,t),Fe||Da(4,a,t),fa(e,t,a);break;case 1:Fe||(Wt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&$d(a,t,n)),fa(e,t,a);break;case 21:fa(e,t,a);break;case 22:Fe=(n=Fe)||a.memoizedState!==null,fa(e,t,a),Fe=n;break;default:fa(e,t,a)}}function nm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{sl(e)}catch(a){ke(t,t.return,a)}}}function lm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{sl(e)}catch(a){ke(t,t.return,a)}}function sp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Pd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Pd),t;default:throw Error(u(435,e.tag))}}function xi(e,t){var a=sp(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var s=hp.bind(null,e,n);n.then(s,s)}})}function xt(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var s=a[n],c=e,d=t,g=d;e:for(;g!==null;){switch(g.tag){case 27:if(Ha(g.type)){Ke=g.stateNode,gt=!1;break e}break;case 5:Ke=g.stateNode,gt=!1;break e;case 3:case 4:Ke=g.stateNode.containerInfo,gt=!0;break e}g=g.return}if(Ke===null)throw Error(u(160));am(c,d,s),Ke=null,gt=!1,c=s.alternate,c!==null&&(c.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)sm(t,e),t=t.sibling}var Xt=null;function sm(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xt(t,e),pt(e),n&4&&(Da(3,e,e.return),Zl(3,e),Da(5,e,e.return));break;case 1:xt(t,e),pt(e),n&512&&(Fe||a===null||Wt(a,a.return)),n&64&&ua&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var s=Xt;if(xt(t,e),pt(e),n&512&&(Fe||a===null||Wt(a,a.return)),n&4){var c=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":c=s.getElementsByTagName("title")[0],(!c||c[jl]||c[st]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=s.createElement(n),s.head.insertBefore(c,s.querySelector("head > title"))),ot(c,n,a),c[st]=e,at(c),n=c;break e;case"link":var d=sh("link","href",s).get(n+(a.href||""));if(d){for(var g=0;g<d.length;g++)if(c=d[g],c.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&c.getAttribute("rel")===(a.rel==null?null:a.rel)&&c.getAttribute("title")===(a.title==null?null:a.title)&&c.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){d.splice(g,1);break t}}c=s.createElement(n),ot(c,n,a),s.head.appendChild(c);break;case"meta":if(d=sh("meta","content",s).get(n+(a.content||""))){for(g=0;g<d.length;g++)if(c=d[g],c.getAttribute("content")===(a.content==null?null:""+a.content)&&c.getAttribute("name")===(a.name==null?null:a.name)&&c.getAttribute("property")===(a.property==null?null:a.property)&&c.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&c.getAttribute("charset")===(a.charSet==null?null:a.charSet)){d.splice(g,1);break t}}c=s.createElement(n),ot(c,n,a),s.head.appendChild(c);break;default:throw Error(u(468,n))}c[st]=e,at(c),n=c}e.stateNode=n}else ih(s,e.type,e.stateNode);else e.stateNode=lh(s,n,e.memoizedProps);else c!==n?(c===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):c.count--,n===null?ih(s,e.type,e.stateNode):lh(s,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Ur(e,e.memoizedProps,a.memoizedProps)}break;case 27:xt(t,e),pt(e),n&512&&(Fe||a===null||Wt(a,a.return)),a!==null&&n&4&&Ur(e,e.memoizedProps,a.memoizedProps);break;case 5:if(xt(t,e),pt(e),n&512&&(Fe||a===null||Wt(a,a.return)),e.flags&32){s=e.stateNode;try{An(s,"")}catch(P){ke(e,e.return,P)}}n&4&&e.stateNode!=null&&(s=e.memoizedProps,Ur(e,s,a!==null?a.memoizedProps:s)),n&1024&&(qr=!0);break;case 6:if(xt(t,e),pt(e),n&4){if(e.stateNode===null)throw Error(u(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(P){ke(e,e.return,P)}}break;case 3:if(Di=null,s=Xt,Xt=ki(t.containerInfo),xt(t,e),Xt=s,pt(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{sl(t.containerInfo)}catch(P){ke(e,e.return,P)}qr&&(qr=!1,im(e));break;case 4:n=Xt,Xt=ki(e.stateNode.containerInfo),xt(t,e),pt(e),Xt=n;break;case 12:xt(t,e),pt(e);break;case 31:xt(t,e),pt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,xi(e,n)));break;case 13:xt(t,e),pt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(yi=jt()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,xi(e,n)));break;case 22:s=e.memoizedState!==null;var v=a!==null&&a.memoizedState!==null,M=ua,B=Fe;if(ua=M||s,Fe=B||v,xt(t,e),Fe=B,ua=M,pt(e),n&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(a===null||v||ua||Fe||mn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){v=a=t;try{if(c=v.stateNode,s)d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{g=v.stateNode;var Y=v.memoizedProps.style,k=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;g.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(P){ke(v,v.return,P)}}}else if(t.tag===6){if(a===null){v=t;try{v.stateNode.nodeValue=s?"":v.memoizedProps}catch(P){ke(v,v.return,P)}}}else if(t.tag===18){if(a===null){v=t;try{var O=v.stateNode;s?$m(O,!0):$m(v.stateNode,!1)}catch(P){ke(v,v.return,P)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,xi(e,a))));break;case 19:xt(t,e),pt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,xi(e,n)));break;case 30:break;case 21:break;default:xt(t,e),pt(e)}}function pt(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(Id(n)){a=n;break}n=n.return}if(a==null)throw Error(u(160));switch(a.tag){case 27:var s=a.stateNode,c=Br(e);gi(e,c,s);break;case 5:var d=a.stateNode;a.flags&32&&(An(d,""),a.flags&=-33);var g=Br(e);gi(e,g,d);break;case 3:case 4:var v=a.stateNode.containerInfo,M=Br(e);Hr(e,M,v);break;default:throw Error(u(161))}}catch(B){ke(e,e.return,B)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function im(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;im(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function da(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)em(e,t.alternate,t),t=t.sibling}function mn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Da(4,t,t.return),mn(t);break;case 1:Wt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&$d(t,t.return,a),mn(t);break;case 27:ns(t.stateNode);case 26:case 5:Wt(t,t.return),mn(t);break;case 22:t.memoizedState===null&&mn(t);break;case 30:mn(t);break;default:mn(t)}e=e.sibling}}function ma(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,s=e,c=t,d=c.flags;switch(c.tag){case 0:case 11:case 15:ma(s,c,a),Zl(4,c);break;case 1:if(ma(s,c,a),n=c,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(M){ke(n,n.return,M)}if(n=c,s=n.updateQueue,s!==null){var g=n.stateNode;try{var v=s.shared.hiddenCallbacks;if(v!==null)for(s.shared.hiddenCallbacks=null,s=0;s<v.length;s++)Uf(v[s],g)}catch(M){ke(n,n.return,M)}}a&&d&64&&Jd(c),Jl(c,c.return);break;case 27:Fd(c);case 26:case 5:ma(s,c,a),a&&n===null&&d&4&&Wd(c),Jl(c,c.return);break;case 12:ma(s,c,a);break;case 31:ma(s,c,a),a&&d&4&&nm(s,c);break;case 13:ma(s,c,a),a&&d&4&&lm(s,c);break;case 22:c.memoizedState===null&&ma(s,c,a),Jl(c,c.return);break;case 30:break;default:ma(s,c,a)}t=t.sibling}}function Yr(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ol(a))}function Kr(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ol(e))}function Qt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)cm(e,t,a,n),t=t.sibling}function cm(e,t,a,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Qt(e,t,a,n),s&2048&&Zl(9,t);break;case 1:Qt(e,t,a,n);break;case 3:Qt(e,t,a,n),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ol(e)));break;case 12:if(s&2048){Qt(e,t,a,n),e=t.stateNode;try{var c=t.memoizedProps,d=c.id,g=c.onPostCommit;typeof g=="function"&&g(d,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(v){ke(t,t.return,v)}}else Qt(e,t,a,n);break;case 31:Qt(e,t,a,n);break;case 13:Qt(e,t,a,n);break;case 23:break;case 22:c=t.stateNode,d=t.alternate,t.memoizedState!==null?c._visibility&2?Qt(e,t,a,n):$l(e,t):c._visibility&2?Qt(e,t,a,n):(c._visibility|=2,Jn(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),s&2048&&Yr(d,t);break;case 24:Qt(e,t,a,n),s&2048&&Kr(t.alternate,t);break;default:Qt(e,t,a,n)}}function Jn(e,t,a,n,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,d=t,g=a,v=n,M=d.flags;switch(d.tag){case 0:case 11:case 15:Jn(c,d,g,v,s),Zl(8,d);break;case 23:break;case 22:var B=d.stateNode;d.memoizedState!==null?B._visibility&2?Jn(c,d,g,v,s):$l(c,d):(B._visibility|=2,Jn(c,d,g,v,s)),s&&M&2048&&Yr(d.alternate,d);break;case 24:Jn(c,d,g,v,s),s&&M&2048&&Kr(d.alternate,d);break;default:Jn(c,d,g,v,s)}t=t.sibling}}function $l(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,s=n.flags;switch(n.tag){case 22:$l(a,n),s&2048&&Yr(n.alternate,n);break;case 24:$l(a,n),s&2048&&Kr(n.alternate,n);break;default:$l(a,n)}t=t.sibling}}var Wl=8192;function $n(e,t,a){if(e.subtreeFlags&Wl)for(e=e.child;e!==null;)rm(e,t,a),e=e.sibling}function rm(e,t,a){switch(e.tag){case 26:$n(e,t,a),e.flags&Wl&&e.memoizedState!==null&&Xp(a,Xt,e.memoizedState,e.memoizedProps);break;case 5:$n(e,t,a);break;case 3:case 4:var n=Xt;Xt=ki(e.stateNode.containerInfo),$n(e,t,a),Xt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Wl,Wl=16777216,$n(e,t,a),Wl=n):$n(e,t,a));break;default:$n(e,t,a)}}function om(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Il(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];nt=n,fm(n,e)}om(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)um(e),e=e.sibling}function um(e){switch(e.tag){case 0:case 11:case 15:Il(e),e.flags&2048&&Da(9,e,e.return);break;case 3:Il(e);break;case 12:Il(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,pi(e)):Il(e);break;default:Il(e)}}function pi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];nt=n,fm(n,e)}om(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Da(8,t,t.return),pi(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,pi(t));break;default:pi(t)}e=e.sibling}}function fm(e,t){for(;nt!==null;){var a=nt;switch(a.tag){case 0:case 11:case 15:Da(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Ol(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,nt=n;else e:for(a=e;nt!==null;){n=nt;var s=n.sibling,c=n.return;if(tm(n),n===a){nt=null;break e}if(s!==null){s.return=c,nt=s;break e}nt=c}}}var ip={getCacheForType:function(e){var t=ct($e),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return ct($e).controller.signal}},cp=typeof WeakMap=="function"?WeakMap:Map,Ae=0,Re=null,ve=null,Se=0,Me=0,At=null,_a=!1,Wn=!1,Gr=!1,ha=0,Qe=0,Oa=0,hn=0,Vr=0,Mt=0,In=0,Fl=null,yt=null,Xr=!1,yi=0,dm=0,bi=1/0,vi=null,La=null,et=0,Ra=null,Fn=null,ga=0,Qr=0,Zr=null,mm=null,Pl=0,Jr=null;function kt(){return(Ae&2)!==0&&Se!==0?Se&-Se:R.T!==null?eo():Au()}function hm(){if(Mt===0)if((Se&536870912)===0||Ne){var e=As;As<<=1,(As&3932160)===0&&(As=262144),Mt=e}else Mt=536870912;return e=Et.current,e!==null&&(e.flags|=32),Mt}function bt(e,t,a){(e===Re&&(Me===2||Me===9)||e.cancelPendingCommit!==null)&&(Pn(e,0),Ua(e,Se,Mt,!1)),vl(e,a),((Ae&2)===0||e!==Re)&&(e===Re&&((Ae&2)===0&&(hn|=a),Qe===4&&Ua(e,Se,Mt,!1)),It(e))}function gm(e,t,a){if((Ae&6)!==0)throw Error(u(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||bl(e,t),s=n?up(e,t):Wr(e,t,!0),c=n;do{if(s===0){Wn&&!n&&Ua(e,t,0,!1);break}else{if(a=e.current.alternate,c&&!rp(a)){s=Wr(e,t,!1),c=!1;continue}if(s===2){if(c=t,e.errorRecoveryDisabledLanes&c)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){t=d;e:{var g=e;s=Fl;var v=g.current.memoizedState.isDehydrated;if(v&&(Pn(g,d).flags|=256),d=Wr(g,d,!1),d!==2){if(Gr&&!v){g.errorRecoveryDisabledLanes|=c,hn|=c,s=4;break e}c=yt,yt=s,c!==null&&(yt===null?yt=c:yt.push.apply(yt,c))}s=d}if(c=!1,s!==2)continue}}if(s===1){Pn(e,0),Ua(e,t,0,!0);break}e:{switch(n=e,c=s,c){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:Ua(n,t,Mt,!_a);break e;case 2:yt=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(s=yi+300-jt(),10<s)){if(Ua(n,t,Mt,!_a),ks(n,0,!0)!==0)break e;ga=t,n.timeoutHandle=Qm(xm.bind(null,n,a,yt,vi,Xr,t,Mt,hn,In,_a,c,"Throttled",-0,0),s);break e}xm(n,a,yt,vi,Xr,t,Mt,hn,In,_a,c,null,-0,0)}}break}while(!0);It(e)}function xm(e,t,a,n,s,c,d,g,v,M,B,Y,k,O){if(e.timeoutHandle=-1,Y=t.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ea},rm(t,c,Y);var P=(c&62914560)===c?yi-jt():(c&4194048)===c?dm-jt():0;if(P=Qp(Y,P),P!==null){ga=c,e.cancelPendingCommit=P(Nm.bind(null,e,t,c,a,n,s,d,g,v,B,Y,null,k,O)),Ua(e,c,d,!M);return}}Nm(e,t,c,a,n,s,d,g,v)}function rp(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var s=a[n],c=s.getSnapshot;s=s.value;try{if(!Nt(c(),s))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ua(e,t,a,n){t&=~Vr,t&=~hn,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var c=31-wt(s),d=1<<c;n[c]=-1,s&=~d}a!==0&&Cu(e,a,t)}function ji(){return(Ae&6)===0?(es(0),!1):!0}function $r(){if(ve!==null){if(Me===0)var e=ve.return;else e=ve,la=ln=null,fr(e),Gn=null,Rl=0,e=ve;for(;e!==null;)Zd(e.alternate,e),e=e.return;ve=null}}function Pn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Ap(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ga=0,$r(),Re=e,ve=a=aa(e.current,null),Se=t,Me=0,At=null,_a=!1,Wn=bl(e,t),Gr=!1,In=Mt=Vr=hn=Oa=Qe=0,yt=Fl=null,Xr=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var s=31-wt(n),c=1<<s;t|=e[s],n&=~c}return ha=t,Ks(),a}function pm(e,t){he=null,R.H=Vl,t===Kn||t===Ws?(t=_f(),Me=3):t===Pc?(t=_f(),Me=4):Me=t===Tr?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,At=t,ve===null&&(Qe=1,ui(e,Rt(t,e.current)))}function ym(){var e=Et.current;return e===null?!0:(Se&4194048)===Se?qt===null:(Se&62914560)===Se||(Se&536870912)!==0?e===qt:!1}function bm(){var e=R.H;return R.H=Vl,e===null?Vl:e}function vm(){var e=R.A;return R.A=ip,e}function Si(){Qe=4,_a||(Se&4194048)!==Se&&Et.current!==null||(Wn=!0),(Oa&134217727)===0&&(hn&134217727)===0||Re===null||Ua(Re,Se,Mt,!1)}function Wr(e,t,a){var n=Ae;Ae|=2;var s=bm(),c=vm();(Re!==e||Se!==t)&&(vi=null,Pn(e,t)),t=!1;var d=Qe;e:do try{if(Me!==0&&ve!==null){var g=ve,v=At;switch(Me){case 8:$r(),d=6;break e;case 3:case 2:case 9:case 6:Et.current===null&&(t=!0);var M=Me;if(Me=0,At=null,el(e,g,v,M),a&&Wn){d=0;break e}break;default:M=Me,Me=0,At=null,el(e,g,v,M)}}op(),d=Qe;break}catch(B){pm(e,B)}while(!0);return t&&e.shellSuspendCounter++,la=ln=null,Ae=n,R.H=s,R.A=c,ve===null&&(Re=null,Se=0,Ks()),d}function op(){for(;ve!==null;)jm(ve)}function up(e,t){var a=Ae;Ae|=2;var n=bm(),s=vm();Re!==e||Se!==t?(vi=null,bi=jt()+500,Pn(e,t)):Wn=bl(e,t);e:do try{if(Me!==0&&ve!==null){t=ve;var c=At;t:switch(Me){case 1:Me=0,At=null,el(e,t,c,1);break;case 2:case 9:if(zf(c)){Me=0,At=null,Sm(t);break}t=function(){Me!==2&&Me!==9||Re!==e||(Me=7),It(e)},c.then(t,t);break e;case 3:Me=7;break e;case 4:Me=5;break e;case 7:zf(c)?(Me=0,At=null,Sm(t)):(Me=0,At=null,el(e,t,c,7));break;case 5:var d=null;switch(ve.tag){case 26:d=ve.memoizedState;case 5:case 27:var g=ve;if(d?ch(d):g.stateNode.complete){Me=0,At=null;var v=g.sibling;if(v!==null)ve=v;else{var M=g.return;M!==null?(ve=M,wi(M)):ve=null}break t}}Me=0,At=null,el(e,t,c,5);break;case 6:Me=0,At=null,el(e,t,c,6);break;case 8:$r(),Qe=6;break e;default:throw Error(u(462))}}fp();break}catch(B){pm(e,B)}while(!0);return la=ln=null,R.H=n,R.A=s,Ae=a,ve!==null?0:(Re=null,Se=0,Ks(),Qe)}function fp(){for(;ve!==null&&!fc();)jm(ve)}function jm(e){var t=Xd(e.alternate,e,ha);e.memoizedProps=e.pendingProps,t===null?wi(e):ve=t}function Sm(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Hd(a,t,t.pendingProps,t.type,void 0,Se);break;case 11:t=Hd(a,t,t.pendingProps,t.type.render,t.ref,Se);break;case 5:fr(t);default:Zd(a,t),t=ve=vf(t,ha),t=Xd(a,t,ha)}e.memoizedProps=e.pendingProps,t===null?wi(e):ve=t}function el(e,t,a,n){la=ln=null,fr(t),Gn=null,Rl=0;var s=t.return;try{if(Px(e,s,t,a,Se)){Qe=1,ui(e,Rt(a,e.current)),ve=null;return}}catch(c){if(s!==null)throw ve=s,c;Qe=1,ui(e,Rt(a,e.current)),ve=null;return}t.flags&32768?(Ne||n===1?e=!0:Wn||(Se&536870912)!==0?e=!1:(_a=e=!0,(n===2||n===9||n===3||n===6)&&(n=Et.current,n!==null&&n.tag===13&&(n.flags|=16384))),wm(t,e)):wi(t)}function wi(e){var t=e;do{if((t.flags&32768)!==0){wm(t,_a);return}e=t.return;var a=ap(t.alternate,t,ha);if(a!==null){ve=a;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);Qe===0&&(Qe=5)}function wm(e,t){do{var a=np(e.alternate,e);if(a!==null){a.flags&=32767,ve=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ve=e;return}ve=e=a}while(e!==null);Qe=6,ve=null}function Nm(e,t,a,n,s,c,d,g,v){e.cancelPendingCommit=null;do Ni();while(et!==0);if((Ae&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(c=t.lanes|t.childLanes,c|=Bc,Vg(e,a,c,d,g,v),e===Re&&(ve=Re=null,Se=0),Fn=t,Ra=e,ga=a,Qr=c,Zr=s,mm=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,gp(Es,function(){return Mm(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=R.T,R.T=null,s=G.p,G.p=2,d=Ae,Ae|=4;try{lp(e,t,a)}finally{Ae=d,G.p=s,R.T=n}}et=1,Cm(),Em(),Tm()}}function Cm(){if(et===1){et=0;var e=Ra,t=Fn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=R.T,R.T=null;var n=G.p;G.p=2;var s=Ae;Ae|=4;try{sm(t,e);var c=ro,d=ff(e.containerInfo),g=c.focusedElem,v=c.selectionRange;if(d!==g&&g&&g.ownerDocument&&uf(g.ownerDocument.documentElement,g)){if(v!==null&&_c(g)){var M=v.start,B=v.end;if(B===void 0&&(B=M),"selectionStart"in g)g.selectionStart=M,g.selectionEnd=Math.min(B,g.value.length);else{var Y=g.ownerDocument||document,k=Y&&Y.defaultView||window;if(k.getSelection){var O=k.getSelection(),P=g.textContent.length,ce=Math.min(v.start,P),Oe=v.end===void 0?ce:Math.min(v.end,P);!O.extend&&ce>Oe&&(d=Oe,Oe=ce,ce=d);var E=of(g,ce),w=of(g,Oe);if(E&&w&&(O.rangeCount!==1||O.anchorNode!==E.node||O.anchorOffset!==E.offset||O.focusNode!==w.node||O.focusOffset!==w.offset)){var A=Y.createRange();A.setStart(E.node,E.offset),O.removeAllRanges(),ce>Oe?(O.addRange(A),O.extend(w.node,w.offset)):(A.setEnd(w.node,w.offset),O.addRange(A))}}}}for(Y=[],O=g;O=O.parentNode;)O.nodeType===1&&Y.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<Y.length;g++){var q=Y[g];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}Ri=!!co,ro=co=null}finally{Ae=s,G.p=n,R.T=a}}e.current=t,et=2}}function Em(){if(et===2){et=0;var e=Ra,t=Fn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=R.T,R.T=null;var n=G.p;G.p=2;var s=Ae;Ae|=4;try{em(e,t.alternate,t)}finally{Ae=s,G.p=n,R.T=a}}et=3}}function Tm(){if(et===4||et===3){et=0,Lg();var e=Ra,t=Fn,a=ga,n=mm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?et=5:(et=0,Fn=Ra=null,Am(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(La=null),hc(a),t=t.stateNode,St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(yl,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=R.T,s=G.p,G.p=2,R.T=null;try{for(var c=e.onRecoverableError,d=0;d<n.length;d++){var g=n[d];c(g.value,{componentStack:g.stack})}}finally{R.T=t,G.p=s}}(ga&3)!==0&&Ni(),It(e),s=e.pendingLanes,(a&261930)!==0&&(s&42)!==0?e===Jr?Pl++:(Pl=0,Jr=e):Pl=0,es(0)}}function Am(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ol(t)))}function Ni(){return Cm(),Em(),Tm(),Mm()}function Mm(){if(et!==5)return!1;var e=Ra,t=Qr;Qr=0;var a=hc(ga),n=R.T,s=G.p;try{G.p=32>a?32:a,R.T=null,a=Zr,Zr=null;var c=Ra,d=ga;if(et=0,Fn=Ra=null,ga=0,(Ae&6)!==0)throw Error(u(331));var g=Ae;if(Ae|=4,um(c.current),cm(c,c.current,d,a),Ae=g,es(0,!1),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(yl,c)}catch{}return!0}finally{G.p=s,R.T=n,Am(e,t)}}function km(e,t,a){t=Rt(a,t),t=Er(e.stateNode,t,2),e=Ma(e,t,2),e!==null&&(vl(e,2),It(e))}function ke(e,t,a){if(e.tag===3)km(e,e,a);else for(;t!==null;){if(t.tag===3){km(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(La===null||!La.has(n))){e=Rt(a,e),a=zd(2),n=Ma(t,a,2),n!==null&&(Dd(a,n,t,e),vl(n,2),It(n));break}}t=t.return}}function Ir(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new cp;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(a)||(Gr=!0,s.add(a),e=dp.bind(null,e,t,a),t.then(e,e))}function dp(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Re===e&&(Se&a)===a&&(Qe===4||Qe===3&&(Se&62914560)===Se&&300>jt()-yi?(Ae&2)===0&&Pn(e,0):Vr|=a,In===Se&&(In=0)),It(e)}function zm(e,t){t===0&&(t=Nu()),e=tn(e,t),e!==null&&(vl(e,t),It(e))}function mp(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),zm(e,a)}function hp(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(a=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(u(314))}n!==null&&n.delete(t),zm(e,a)}function gp(e,t){return $a(e,t)}var Ci=null,tl=null,Fr=!1,Ei=!1,Pr=!1,Ba=0;function It(e){e!==tl&&e.next===null&&(tl===null?Ci=tl=e:tl=tl.next=e),Ei=!0,Fr||(Fr=!0,pp())}function es(e,t){if(!Pr&&Ei){Pr=!0;do for(var a=!1,n=Ci;n!==null;){if(e!==0){var s=n.pendingLanes;if(s===0)var c=0;else{var d=n.suspendedLanes,g=n.pingedLanes;c=(1<<31-wt(42|e)+1)-1,c&=s&~(d&~g),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(a=!0,Lm(n,c))}else c=Se,c=ks(n,n===Re?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(c&3)===0||bl(n,c)||(a=!0,Lm(n,c));n=n.next}while(a);Pr=!1}}function xp(){Dm()}function Dm(){Ei=Fr=!1;var e=0;Ba!==0&&Tp()&&(e=Ba);for(var t=jt(),a=null,n=Ci;n!==null;){var s=n.next,c=_m(n,t);c===0?(n.next=null,a===null?Ci=s:a.next=s,s===null&&(tl=a)):(a=n,(e!==0||(c&3)!==0)&&(Ei=!0)),n=s}et!==0&&et!==5||es(e),Ba!==0&&(Ba=0)}function _m(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var d=31-wt(c),g=1<<d,v=s[d];v===-1?((g&a)===0||(g&n)!==0)&&(s[d]=Gg(g,t)):v<=t&&(e.expiredLanes|=g),c&=~g}if(t=Re,a=Se,a=ks(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(Me===2||Me===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&pl(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||bl(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&pl(n),hc(a)){case 2:case 8:a=Su;break;case 32:a=Es;break;case 268435456:a=wu;break;default:a=Es}return n=Om.bind(null,e),a=$a(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&pl(n),e.callbackPriority=2,e.callbackNode=null,2}function Om(e,t){if(et!==0&&et!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ni()&&e.callbackNode!==a)return null;var n=Se;return n=ks(e,e===Re?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(gm(e,n,t),_m(e,jt()),e.callbackNode!=null&&e.callbackNode===a?Om.bind(null,e):null)}function Lm(e,t){if(Ni())return null;gm(e,t,!0)}function pp(){Mp(function(){(Ae&6)!==0?$a(ju,xp):Dm()})}function eo(){if(Ba===0){var e=qn;e===0&&(e=Ts,Ts<<=1,(Ts&261888)===0&&(Ts=256)),Ba=e}return Ba}function Rm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Os(""+e)}function Um(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function yp(e,t,a,n,s){if(t==="submit"&&a&&a.stateNode===s){var c=Rm((s[mt]||null).action),d=n.submitter;d&&(t=(t=d[mt]||null)?Rm(t.formAction):d.getAttribute("formAction"),t!==null&&(c=t,d=null));var g=new Bs("action","action",null,n,s);e.push({event:g,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ba!==0){var v=d?Um(s,d):new FormData(s);vr(a,{pending:!0,data:v,method:s.method,action:c},null,v)}}else typeof c=="function"&&(g.preventDefault(),v=d?Um(s,d):new FormData(s),vr(a,{pending:!0,data:v,method:s.method,action:c},c,v))},currentTarget:s}]})}}for(var to=0;to<Uc.length;to++){var ao=Uc[to],bp=ao.toLowerCase(),vp=ao[0].toUpperCase()+ao.slice(1);Vt(bp,"on"+vp)}Vt(hf,"onAnimationEnd"),Vt(gf,"onAnimationIteration"),Vt(xf,"onAnimationStart"),Vt("dblclick","onDoubleClick"),Vt("focusin","onFocus"),Vt("focusout","onBlur"),Vt(Rx,"onTransitionRun"),Vt(Ux,"onTransitionStart"),Vt(Bx,"onTransitionCancel"),Vt(pf,"onTransitionEnd"),En("onMouseEnter",["mouseout","mouseover"]),En("onMouseLeave",["mouseout","mouseover"]),En("onPointerEnter",["pointerout","pointerover"]),En("onPointerLeave",["pointerout","pointerover"]),Ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ia("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ts));function Bm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],s=n.event;n=n.listeners;e:{var c=void 0;if(t)for(var d=n.length-1;0<=d;d--){var g=n[d],v=g.instance,M=g.currentTarget;if(g=g.listener,v!==c&&s.isPropagationStopped())break e;c=g,s.currentTarget=M;try{c(s)}catch(B){Ys(B)}s.currentTarget=null,c=v}else for(d=0;d<n.length;d++){if(g=n[d],v=g.instance,M=g.currentTarget,g=g.listener,v!==c&&s.isPropagationStopped())break e;c=g,s.currentTarget=M;try{c(s)}catch(B){Ys(B)}s.currentTarget=null,c=v}}}}function je(e,t){var a=t[gc];a===void 0&&(a=t[gc]=new Set);var n=e+"__bubble";a.has(n)||(Hm(t,e,2,!1),a.add(n))}function no(e,t,a){var n=0;t&&(n|=4),Hm(a,e,n,t)}var Ti="_reactListening"+Math.random().toString(36).slice(2);function lo(e){if(!e[Ti]){e[Ti]=!0,zu.forEach(function(a){a!=="selectionchange"&&(jp.has(a)||no(a,!1,e),no(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ti]||(t[Ti]=!0,no("selectionchange",!1,t))}}function Hm(e,t,a,n){switch(hh(t)){case 2:var s=$p;break;case 8:s=Wp;break;default:s=vo}a=s.bind(null,t,a,e),s=void 0,!Nc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,a,{capture:!0,passive:s}):e.addEventListener(t,a,!0):s!==void 0?e.addEventListener(t,a,{passive:s}):e.addEventListener(t,a,!1)}function so(e,t,a,n,s){var c=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var d=n.tag;if(d===3||d===4){var g=n.stateNode.containerInfo;if(g===s)break;if(d===4)for(d=n.return;d!==null;){var v=d.tag;if((v===3||v===4)&&d.stateNode.containerInfo===s)return;d=d.return}for(;g!==null;){if(d=wn(g),d===null)return;if(v=d.tag,v===5||v===6||v===26||v===27){n=c=d;continue e}g=g.parentNode}}n=n.return}Gu(function(){var M=c,B=Sc(a),Y=[];e:{var k=yf.get(e);if(k!==void 0){var O=Bs,P=e;switch(e){case"keypress":if(Rs(a)===0)break e;case"keydown":case"keyup":O=hx;break;case"focusin":P="focus",O=Ac;break;case"focusout":P="blur",O=Ac;break;case"beforeblur":case"afterblur":O=Ac;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=ax;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=px;break;case hf:case gf:case xf:O=sx;break;case pf:O=bx;break;case"scroll":case"scrollend":O=ex;break;case"wheel":O=jx;break;case"copy":case"cut":case"paste":O=cx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Ju;break;case"toggle":case"beforetoggle":O=wx}var ce=(t&4)!==0,Oe=!ce&&(e==="scroll"||e==="scrollend"),E=ce?k!==null?k+"Capture":null:k;ce=[];for(var w=M,A;w!==null;){var q=w;if(A=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||A===null||E===null||(q=wl(w,E),q!=null&&ce.push(as(w,q,A))),Oe)break;w=w.return}0<ce.length&&(k=new O(k,P,null,a,B),Y.push({event:k,listeners:ce}))}}if((t&7)===0){e:{if(k=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",k&&a!==jc&&(P=a.relatedTarget||a.fromElement)&&(wn(P)||P[Sn]))break e;if((O||k)&&(k=B.window===B?B:(k=B.ownerDocument)?k.defaultView||k.parentWindow:window,O?(P=a.relatedTarget||a.toElement,O=M,P=P?wn(P):null,P!==null&&(Oe=m(P),ce=P.tag,P!==Oe||ce!==5&&ce!==27&&ce!==6)&&(P=null)):(O=null,P=M),O!==P)){if(ce=Qu,q="onMouseLeave",E="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(ce=Ju,q="onPointerLeave",E="onPointerEnter",w="pointer"),Oe=O==null?k:Sl(O),A=P==null?k:Sl(P),k=new ce(q,w+"leave",O,a,B),k.target=Oe,k.relatedTarget=A,q=null,wn(B)===M&&(ce=new ce(E,w+"enter",P,a,B),ce.target=A,ce.relatedTarget=Oe,q=ce),Oe=q,O&&P)t:{for(ce=Sp,E=O,w=P,A=0,q=E;q;q=ce(q))A++;q=0;for(var se=w;se;se=ce(se))q++;for(;0<A-q;)E=ce(E),A--;for(;0<q-A;)w=ce(w),q--;for(;A--;){if(E===w||w!==null&&E===w.alternate){ce=E;break t}E=ce(E),w=ce(w)}ce=null}else ce=null;O!==null&&qm(Y,k,O,ce,!1),P!==null&&Oe!==null&&qm(Y,Oe,P,ce,!0)}}e:{if(k=M?Sl(M):window,O=k.nodeName&&k.nodeName.toLowerCase(),O==="select"||O==="input"&&k.type==="file")var Ee=af;else if(ef(k))if(nf)Ee=_x;else{Ee=zx;var ee=kx}else O=k.nodeName,!O||O.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?M&&vc(M.elementType)&&(Ee=af):Ee=Dx;if(Ee&&(Ee=Ee(e,M))){tf(Y,Ee,a,B);break e}ee&&ee(e,k,M),e==="focusout"&&M&&k.type==="number"&&M.memoizedProps.value!=null&&bc(k,"number",k.value)}switch(ee=M?Sl(M):window,e){case"focusin":(ef(ee)||ee.contentEditable==="true")&&(Dn=ee,Oc=M,zl=null);break;case"focusout":zl=Oc=Dn=null;break;case"mousedown":Lc=!0;break;case"contextmenu":case"mouseup":case"dragend":Lc=!1,df(Y,a,B);break;case"selectionchange":if(Lx)break;case"keydown":case"keyup":df(Y,a,B)}var xe;if(kc)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else zn?Fu(e,a)&&(we="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&($u&&a.locale!=="ko"&&(zn||we!=="onCompositionStart"?we==="onCompositionEnd"&&zn&&(xe=Vu()):(Sa=B,Cc="value"in Sa?Sa.value:Sa.textContent,zn=!0)),ee=Ai(M,we),0<ee.length&&(we=new Zu(we,e,null,a,B),Y.push({event:we,listeners:ee}),xe?we.data=xe:(xe=Pu(a),xe!==null&&(we.data=xe)))),(xe=Cx?Ex(e,a):Tx(e,a))&&(we=Ai(M,"onBeforeInput"),0<we.length&&(ee=new Zu("onBeforeInput","beforeinput",null,a,B),Y.push({event:ee,listeners:we}),ee.data=xe)),yp(Y,e,M,a,B)}Bm(Y,t)})}function as(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Ai(e,t){for(var a=t+"Capture",n=[];e!==null;){var s=e,c=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||c===null||(s=wl(e,a),s!=null&&n.unshift(as(e,s,c)),s=wl(e,t),s!=null&&n.push(as(e,s,c))),e.tag===3)return n;e=e.return}return[]}function Sp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function qm(e,t,a,n,s){for(var c=t._reactName,d=[];a!==null&&a!==n;){var g=a,v=g.alternate,M=g.stateNode;if(g=g.tag,v!==null&&v===n)break;g!==5&&g!==26&&g!==27||M===null||(v=M,s?(M=wl(a,c),M!=null&&d.unshift(as(a,M,v))):s||(M=wl(a,c),M!=null&&d.push(as(a,M,v)))),a=a.return}d.length!==0&&e.push({event:t,listeners:d})}var wp=/\r\n?/g,Np=/\u0000|\uFFFD/g;function Ym(e){return(typeof e=="string"?e:""+e).replace(wp,`
`).replace(Np,"")}function Km(e,t){return t=Ym(t),Ym(e)===t}function _e(e,t,a,n,s,c){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||An(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&An(e,""+n);break;case"className":Ds(e,"class",n);break;case"tabIndex":Ds(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Ds(e,a,n);break;case"style":Yu(e,n,c);break;case"data":if(t!=="object"){Ds(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Os(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(a==="formAction"?(t!=="input"&&_e(e,t,"name",s.name,s,null),_e(e,t,"formEncType",s.formEncType,s,null),_e(e,t,"formMethod",s.formMethod,s,null),_e(e,t,"formTarget",s.formTarget,s,null)):(_e(e,t,"encType",s.encType,s,null),_e(e,t,"method",s.method,s,null),_e(e,t,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Os(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=ea);break;case"onScroll":n!=null&&je("scroll",e);break;case"onScrollEnd":n!=null&&je("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(a=n.__html,a!=null){if(s.children!=null)throw Error(u(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=Os(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":je("beforetoggle",e),je("toggle",e),zs(e,"popover",n);break;case"xlinkActuate":Pt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Pt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Pt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Pt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Pt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Pt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":zs(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Fg.get(a)||a,zs(e,a,n))}}function io(e,t,a,n,s,c){switch(a){case"style":Yu(e,n,c);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(a=n.__html,a!=null){if(s.children!=null)throw Error(u(60));e.innerHTML=a}}break;case"children":typeof n=="string"?An(e,n):(typeof n=="number"||typeof n=="bigint")&&An(e,""+n);break;case"onScroll":n!=null&&je("scroll",e);break;case"onScrollEnd":n!=null&&je("scrollend",e);break;case"onClick":n!=null&&(e.onclick=ea);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Du.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(s=a.endsWith("Capture"),t=a.slice(2,s?a.length-7:void 0),c=e[mt]||null,c=c!=null?c[a]:null,typeof c=="function"&&e.removeEventListener(t,c,s),typeof n=="function")){typeof c!="function"&&c!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,s);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):zs(e,a,n)}}}function ot(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",e),je("load",e);var n=!1,s=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(d!=null)switch(c){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:_e(e,t,c,d,a,null)}}s&&_e(e,t,"srcSet",a.srcSet,a,null),n&&_e(e,t,"src",a.src,a,null);return;case"input":je("invalid",e);var g=c=d=s=null,v=null,M=null;for(n in a)if(a.hasOwnProperty(n)){var B=a[n];if(B!=null)switch(n){case"name":s=B;break;case"type":d=B;break;case"checked":v=B;break;case"defaultChecked":M=B;break;case"value":c=B;break;case"defaultValue":g=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(u(137,t));break;default:_e(e,t,n,B,a,null)}}Uu(e,c,g,v,M,d,s,!1);return;case"select":je("invalid",e),n=d=c=null;for(s in a)if(a.hasOwnProperty(s)&&(g=a[s],g!=null))switch(s){case"value":c=g;break;case"defaultValue":d=g;break;case"multiple":n=g;default:_e(e,t,s,g,a,null)}t=c,a=d,e.multiple=!!n,t!=null?Tn(e,!!n,t,!1):a!=null&&Tn(e,!!n,a,!0);return;case"textarea":je("invalid",e),c=s=n=null;for(d in a)if(a.hasOwnProperty(d)&&(g=a[d],g!=null))switch(d){case"value":n=g;break;case"defaultValue":s=g;break;case"children":c=g;break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(u(91));break;default:_e(e,t,d,g,a,null)}Hu(e,n,s,c);return;case"option":for(v in a)a.hasOwnProperty(v)&&(n=a[v],n!=null)&&(v==="selected"?e.selected=n&&typeof n!="function"&&typeof n!="symbol":_e(e,t,v,n,a,null));return;case"dialog":je("beforetoggle",e),je("toggle",e),je("cancel",e),je("close",e);break;case"iframe":case"object":je("load",e);break;case"video":case"audio":for(n=0;n<ts.length;n++)je(ts[n],e);break;case"image":je("error",e),je("load",e);break;case"details":je("toggle",e);break;case"embed":case"source":case"link":je("error",e),je("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(M in a)if(a.hasOwnProperty(M)&&(n=a[M],n!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:_e(e,t,M,n,a,null)}return;default:if(vc(t)){for(B in a)a.hasOwnProperty(B)&&(n=a[B],n!==void 0&&io(e,t,B,n,a,void 0));return}}for(g in a)a.hasOwnProperty(g)&&(n=a[g],n!=null&&_e(e,t,g,n,a,null))}function Cp(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,c=null,d=null,g=null,v=null,M=null,B=null;for(O in a){var Y=a[O];if(a.hasOwnProperty(O)&&Y!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":v=Y;default:n.hasOwnProperty(O)||_e(e,t,O,null,n,Y)}}for(var k in n){var O=n[k];if(Y=a[k],n.hasOwnProperty(k)&&(O!=null||Y!=null))switch(k){case"type":c=O;break;case"name":s=O;break;case"checked":M=O;break;case"defaultChecked":B=O;break;case"value":d=O;break;case"defaultValue":g=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(u(137,t));break;default:O!==Y&&_e(e,t,k,O,n,Y)}}yc(e,d,g,v,M,B,c,s);return;case"select":O=d=g=k=null;for(c in a)if(v=a[c],a.hasOwnProperty(c)&&v!=null)switch(c){case"value":break;case"multiple":O=v;default:n.hasOwnProperty(c)||_e(e,t,c,null,n,v)}for(s in n)if(c=n[s],v=a[s],n.hasOwnProperty(s)&&(c!=null||v!=null))switch(s){case"value":k=c;break;case"defaultValue":g=c;break;case"multiple":d=c;default:c!==v&&_e(e,t,s,c,n,v)}t=g,a=d,n=O,k!=null?Tn(e,!!a,k,!1):!!n!=!!a&&(t!=null?Tn(e,!!a,t,!0):Tn(e,!!a,a?[]:"",!1));return;case"textarea":O=k=null;for(g in a)if(s=a[g],a.hasOwnProperty(g)&&s!=null&&!n.hasOwnProperty(g))switch(g){case"value":break;case"children":break;default:_e(e,t,g,null,n,s)}for(d in n)if(s=n[d],c=a[d],n.hasOwnProperty(d)&&(s!=null||c!=null))switch(d){case"value":k=s;break;case"defaultValue":O=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(u(91));break;default:s!==c&&_e(e,t,d,s,n,c)}Bu(e,k,O);return;case"option":for(var P in a)k=a[P],a.hasOwnProperty(P)&&k!=null&&!n.hasOwnProperty(P)&&(P==="selected"?e.selected=!1:_e(e,t,P,null,n,k));for(v in n)k=n[v],O=a[v],n.hasOwnProperty(v)&&k!==O&&(k!=null||O!=null)&&(v==="selected"?e.selected=k&&typeof k!="function"&&typeof k!="symbol":_e(e,t,v,k,n,O));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in a)k=a[ce],a.hasOwnProperty(ce)&&k!=null&&!n.hasOwnProperty(ce)&&_e(e,t,ce,null,n,k);for(M in n)if(k=n[M],O=a[M],n.hasOwnProperty(M)&&k!==O&&(k!=null||O!=null))switch(M){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(u(137,t));break;default:_e(e,t,M,k,n,O)}return;default:if(vc(t)){for(var Oe in a)k=a[Oe],a.hasOwnProperty(Oe)&&k!==void 0&&!n.hasOwnProperty(Oe)&&io(e,t,Oe,void 0,n,k);for(B in n)k=n[B],O=a[B],!n.hasOwnProperty(B)||k===O||k===void 0&&O===void 0||io(e,t,B,k,n,O);return}}for(var E in a)k=a[E],a.hasOwnProperty(E)&&k!=null&&!n.hasOwnProperty(E)&&_e(e,t,E,null,n,k);for(Y in n)k=n[Y],O=a[Y],!n.hasOwnProperty(Y)||k===O||k==null&&O==null||_e(e,t,Y,k,n,O)}function Gm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ep(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var s=a[n],c=s.transferSize,d=s.initiatorType,g=s.duration;if(c&&g&&Gm(d)){for(d=0,g=s.responseEnd,n+=1;n<a.length;n++){var v=a[n],M=v.startTime;if(M>g)break;var B=v.transferSize,Y=v.initiatorType;B&&Gm(Y)&&(v=v.responseEnd,d+=B*(v<g?1:(g-M)/(v-M)))}if(--n,t+=8*(c+d)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var co=null,ro=null;function Mi(e){return e.nodeType===9?e:e.ownerDocument}function Vm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function oo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uo=null;function Tp(){var e=window.event;return e&&e.type==="popstate"?e===uo?!1:(uo=e,!0):(uo=null,!1)}var Qm=typeof setTimeout=="function"?setTimeout:void 0,Ap=typeof clearTimeout=="function"?clearTimeout:void 0,Zm=typeof Promise=="function"?Promise:void 0,Mp=typeof queueMicrotask=="function"?queueMicrotask:typeof Zm<"u"?function(e){return Zm.resolve(null).then(e).catch(kp)}:Qm;function kp(e){setTimeout(function(){throw e})}function Ha(e){return e==="head"}function Jm(e,t){var a=t,n=0;do{var s=a.nextSibling;if(e.removeChild(a),s&&s.nodeType===8)if(a=s.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(s),sl(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")ns(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ns(a);for(var c=a.firstChild;c;){var d=c.nextSibling,g=c.nodeName;c[jl]||g==="SCRIPT"||g==="STYLE"||g==="LINK"&&c.rel.toLowerCase()==="stylesheet"||a.removeChild(c),c=d}}else a==="body"&&ns(e.ownerDocument.body);a=s}while(a);sl(t)}function $m(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function fo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":fo(a),xc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function zp(e,t,a,n){for(;e.nodeType===1;){var s=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[jl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=Yt(e.nextSibling),e===null)break}return null}function Dp(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Yt(e.nextSibling),e===null))return null;return e}function Wm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Yt(e.nextSibling),e===null))return null;return e}function mo(e){return e.data==="$?"||e.data==="$~"}function ho(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function _p(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Yt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var go=null;function Im(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Yt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Fm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Pm(e,t,a){switch(t=Mi(a),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function ns(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);xc(e)}var Kt=new Map,eh=new Set;function ki(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var xa=G.d;G.d={f:Op,r:Lp,D:Rp,C:Up,L:Bp,m:Hp,X:Yp,S:qp,M:Kp};function Op(){var e=xa.f(),t=ji();return e||t}function Lp(e){var t=Nn(e);t!==null&&t.tag===5&&t.type==="form"?pd(t):xa.r(e)}var al=typeof document>"u"?null:document;function th(e,t,a){var n=al;if(n&&typeof t=="string"&&t){var s=Ot(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof a=="string"&&(s+='[crossorigin="'+a+'"]'),eh.has(s)||(eh.add(s),e={rel:e,crossOrigin:a,href:t},n.querySelector(s)===null&&(t=n.createElement("link"),ot(t,"link",e),at(t),n.head.appendChild(t)))}}function Rp(e){xa.D(e),th("dns-prefetch",e,null)}function Up(e,t){xa.C(e,t),th("preconnect",e,t)}function Bp(e,t,a){xa.L(e,t,a);var n=al;if(n&&e&&t){var s='link[rel="preload"][as="'+Ot(t)+'"]';t==="image"&&a&&a.imageSrcSet?(s+='[imagesrcset="'+Ot(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(s+='[imagesizes="'+Ot(a.imageSizes)+'"]')):s+='[href="'+Ot(e)+'"]';var c=s;switch(t){case"style":c=nl(e);break;case"script":c=ll(e)}Kt.has(c)||(e=b({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Kt.set(c,e),n.querySelector(s)!==null||t==="style"&&n.querySelector(ls(c))||t==="script"&&n.querySelector(ss(c))||(t=n.createElement("link"),ot(t,"link",e),at(t),n.head.appendChild(t)))}}function Hp(e,t){xa.m(e,t);var a=al;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+Ot(n)+'"][href="'+Ot(e)+'"]',c=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=ll(e)}if(!Kt.has(c)&&(e=b({rel:"modulepreload",href:e},t),Kt.set(c,e),a.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ss(c)))return}n=a.createElement("link"),ot(n,"link",e),at(n),a.head.appendChild(n)}}}function qp(e,t,a){xa.S(e,t,a);var n=al;if(n&&e){var s=Cn(n).hoistableStyles,c=nl(e);t=t||"default";var d=s.get(c);if(!d){var g={loading:0,preload:null};if(d=n.querySelector(ls(c)))g.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Kt.get(c))&&xo(e,a);var v=d=n.createElement("link");at(v),ot(v,"link",e),v._p=new Promise(function(M,B){v.onload=M,v.onerror=B}),v.addEventListener("load",function(){g.loading|=1}),v.addEventListener("error",function(){g.loading|=2}),g.loading|=4,zi(d,t,n)}d={type:"stylesheet",instance:d,count:1,state:g},s.set(c,d)}}}function Yp(e,t){xa.X(e,t);var a=al;if(a&&e){var n=Cn(a).hoistableScripts,s=ll(e),c=n.get(s);c||(c=a.querySelector(ss(s)),c||(e=b({src:e,async:!0},t),(t=Kt.get(s))&&po(e,t),c=a.createElement("script"),at(c),ot(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(s,c))}}function Kp(e,t){xa.M(e,t);var a=al;if(a&&e){var n=Cn(a).hoistableScripts,s=ll(e),c=n.get(s);c||(c=a.querySelector(ss(s)),c||(e=b({src:e,async:!0,type:"module"},t),(t=Kt.get(s))&&po(e,t),c=a.createElement("script"),at(c),ot(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(s,c))}}function ah(e,t,a,n){var s=(s=fe.current)?ki(s):null;if(!s)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=nl(a.href),a=Cn(s).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=nl(a.href);var c=Cn(s).hoistableStyles,d=c.get(e);if(d||(s=s.ownerDocument||s,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=s.querySelector(ls(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Kt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kt.set(e,a),c||Gp(s,e,a,d.state))),t&&n===null)throw Error(u(528,""));return d}if(t&&n!==null)throw Error(u(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ll(a),a=Cn(s).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function nl(e){return'href="'+Ot(e)+'"'}function ls(e){return'link[rel="stylesheet"]['+e+"]"}function nh(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Gp(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),ot(t,"link",a),at(t),e.head.appendChild(t))}function ll(e){return'[src="'+Ot(e)+'"]'}function ss(e){return"script[async]"+e}function lh(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Ot(a.href)+'"]');if(n)return t.instance=n,at(n),n;var s=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),at(n),ot(n,"style",s),zi(n,a.precedence,e),t.instance=n;case"stylesheet":s=nl(a.href);var c=e.querySelector(ls(s));if(c)return t.state.loading|=4,t.instance=c,at(c),c;n=nh(a),(s=Kt.get(s))&&xo(n,s),c=(e.ownerDocument||e).createElement("link"),at(c);var d=c;return d._p=new Promise(function(g,v){d.onload=g,d.onerror=v}),ot(c,"link",n),t.state.loading|=4,zi(c,a.precedence,e),t.instance=c;case"script":return c=ll(a.src),(s=e.querySelector(ss(c)))?(t.instance=s,at(s),s):(n=a,(s=Kt.get(c))&&(n=b({},a),po(n,s)),e=e.ownerDocument||e,s=e.createElement("script"),at(s),ot(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,zi(n,a.precedence,e));return t.instance}function zi(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,c=s,d=0;d<n.length;d++){var g=n[d];if(g.dataset.precedence===t)c=g;else if(c!==s)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function xo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function po(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Di=null;function sh(e,t,a){if(Di===null){var n=new Map,s=Di=new Map;s.set(a,n)}else s=Di,n=s.get(a),n||(n=new Map,s.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),s=0;s<a.length;s++){var c=a[s];if(!(c[jl]||c[st]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var d=c.getAttribute(t)||"";d=e+d;var g=n.get(d);g?g.push(c):n.set(d,[c])}}return n}function ih(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Vp(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ch(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Xp(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var s=nl(n.href),c=t.querySelector(ls(s));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=_i.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=c,at(c);return}c=t.ownerDocument||t,n=nh(n),(s=Kt.get(s))&&xo(n,s),c=c.createElement("link"),at(c);var d=c;d._p=new Promise(function(g,v){d.onload=g,d.onerror=v}),ot(c,"link",n),a.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=_i.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var yo=0;function Qp(e,t){return e.stylesheets&&e.count===0&&Li(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&Li(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&yo===0&&(yo=62500*Ep());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Li(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>yo?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(s)}}:null}function _i(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Li(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Oi=null;function Li(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Oi=new Map,t.forEach(Zp,e),Oi=null,_i.call(e))}function Zp(e,t){if(!(t.state.loading&4)){var a=Oi.get(e);if(a)var n=a.get(null);else{a=new Map,Oi.set(e,a);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<s.length;c++){var d=s[c];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(a.set(d.dataset.precedence,d),n=d)}n&&a.set(null,n)}s=t.instance,d=s.getAttribute("data-precedence"),c=a.get(d)||n,c===n&&a.set(null,s),a.set(d,s),this.count++,n=_i.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),c?c.parentNode.insertBefore(s,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var is={$$typeof:L,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Jp(e,t,a,n,s,c,d,g,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dc(0),this.hiddenUpdates=dc(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=c,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function rh(e,t,a,n,s,c,d,g,v,M,B,Y){return e=new Jp(e,t,a,d,v,M,B,Y,g),t=1,c===!0&&(t|=24),c=Ct(3,null,null,t),e.current=c,c.stateNode=e,t=Wc(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:n,isDehydrated:a,cache:t},er(c),e}function oh(e){return e?(e=Ln,e):Ln}function uh(e,t,a,n,s,c){s=oh(s),n.context===null?n.context=s:n.pendingContext=s,n=Aa(t),n.payload={element:a},c=c===void 0?null:c,c!==null&&(n.callback=c),a=Ma(e,n,t),a!==null&&(bt(a,e,t),Bl(a,e,t))}function fh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function bo(e,t){fh(e,t),(e=e.alternate)&&fh(e,t)}function dh(e){if(e.tag===13||e.tag===31){var t=tn(e,67108864);t!==null&&bt(t,e,67108864),bo(e,67108864)}}function mh(e){if(e.tag===13||e.tag===31){var t=kt();t=mc(t);var a=tn(e,t);a!==null&&bt(a,e,t),bo(e,t)}}var Ri=!0;function $p(e,t,a,n){var s=R.T;R.T=null;var c=G.p;try{G.p=2,vo(e,t,a,n)}finally{G.p=c,R.T=s}}function Wp(e,t,a,n){var s=R.T;R.T=null;var c=G.p;try{G.p=8,vo(e,t,a,n)}finally{G.p=c,R.T=s}}function vo(e,t,a,n){if(Ri){var s=jo(n);if(s===null)so(e,t,n,Ui,a),gh(e,n);else if(Fp(s,e,t,a,n))n.stopPropagation();else if(gh(e,n),t&4&&-1<Ip.indexOf(e)){for(;s!==null;){var c=Nn(s);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var d=Wa(c.pendingLanes);if(d!==0){var g=c;for(g.pendingLanes|=2,g.entangledLanes|=2;d;){var v=1<<31-wt(d);g.entanglements[1]|=v,d&=~v}It(c),(Ae&6)===0&&(bi=jt()+500,es(0))}}break;case 31:case 13:g=tn(c,2),g!==null&&bt(g,c,2),ji(),bo(c,2)}if(c=jo(n),c===null&&so(e,t,n,Ui,a),c===s)break;s=c}s!==null&&n.stopPropagation()}else so(e,t,n,null,a)}}function jo(e){return e=Sc(e),So(e)}var Ui=null;function So(e){if(Ui=null,e=wn(e),e!==null){var t=m(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===31){if(e=y(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ui=e,null}function hh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rg()){case ju:return 2;case Su:return 8;case Es:case Ug:return 32;case wu:return 268435456;default:return 32}default:return 32}}var wo=!1,qa=null,Ya=null,Ka=null,cs=new Map,rs=new Map,Ga=[],Ip="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gh(e,t){switch(e){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":cs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rs.delete(t.pointerId)}}function os(e,t,a,n,s,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:c,targetContainers:[s]},t!==null&&(t=Nn(t),t!==null&&dh(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Fp(e,t,a,n,s){switch(t){case"focusin":return qa=os(qa,e,t,a,n,s),!0;case"dragenter":return Ya=os(Ya,e,t,a,n,s),!0;case"mouseover":return Ka=os(Ka,e,t,a,n,s),!0;case"pointerover":var c=s.pointerId;return cs.set(c,os(cs.get(c)||null,e,t,a,n,s)),!0;case"gotpointercapture":return c=s.pointerId,rs.set(c,os(rs.get(c)||null,e,t,a,n,s)),!0}return!1}function xh(e){var t=wn(e.target);if(t!==null){var a=m(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,Mu(e.priority,function(){mh(a)});return}}else if(t===31){if(t=y(a),t!==null){e.blockedOn=t,Mu(e.priority,function(){mh(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=jo(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);jc=n,a.target.dispatchEvent(n),jc=null}else return t=Nn(a),t!==null&&dh(t),e.blockedOn=a,!1;t.shift()}return!0}function ph(e,t,a){Bi(e)&&a.delete(t)}function Pp(){wo=!1,qa!==null&&Bi(qa)&&(qa=null),Ya!==null&&Bi(Ya)&&(Ya=null),Ka!==null&&Bi(Ka)&&(Ka=null),cs.forEach(ph),rs.forEach(ph)}function Hi(e,t){e.blockedOn===t&&(e.blockedOn=null,wo||(wo=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Pp)))}var qi=null;function yh(e){qi!==e&&(qi=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){qi===e&&(qi=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],s=e[t+2];if(typeof n!="function"){if(So(n||a)===null)continue;break}var c=Nn(a);c!==null&&(e.splice(t,3),t-=3,vr(c,{pending:!0,data:s,method:a.method,action:n},n,s))}}))}function sl(e){function t(v){return Hi(v,e)}qa!==null&&Hi(qa,e),Ya!==null&&Hi(Ya,e),Ka!==null&&Hi(Ka,e),cs.forEach(t),rs.forEach(t);for(var a=0;a<Ga.length;a++){var n=Ga[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Ga.length&&(a=Ga[0],a.blockedOn===null);)xh(a),a.blockedOn===null&&Ga.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var s=a[n],c=a[n+1],d=s[mt]||null;if(typeof c=="function")d||yh(a);else if(d){var g=null;if(c&&c.hasAttribute("formAction")){if(s=c,d=c[mt]||null)g=d.formAction;else if(So(s)!==null)continue}else g=d.action;typeof g=="function"?a[n+1]=g:(a.splice(n,3),n-=3),yh(a)}}}function bh(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(d){return s=d})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function No(e){this._internalRoot=e}Yi.prototype.render=No.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var a=t.current,n=kt();uh(a,n,e,t,null,null)},Yi.prototype.unmount=No.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;uh(e.current,2,null,e,null,null),ji(),t[Sn]=null}};function Yi(e){this._internalRoot=e}Yi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Au();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ga.length&&t!==0&&t<Ga[a].priority;a++);Ga.splice(a,0,e),a===0&&xh(e)}};var vh=o.version;if(vh!=="19.2.4")throw Error(u(527,vh,"19.2.4"));G.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=p(t),e=e!==null?j(e):null,e=e===null?null:e.stateNode,e};var e0={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ki=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ki.isDisabled&&Ki.supportsFiber)try{yl=Ki.inject(e0),St=Ki}catch{}}return fs.createRoot=function(e,t){if(!f(e))throw Error(u(299));var a=!1,n="",s=Td,c=Ad,d=Md;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=rh(e,1,!1,null,null,a,n,null,s,c,d,bh),e[Sn]=t.current,lo(e),new No(t)},fs.hydrateRoot=function(e,t,a){if(!f(e))throw Error(u(299));var n=!1,s="",c=Td,d=Ad,g=Md,v=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(s=a.identifierPrefix),a.onUncaughtError!==void 0&&(c=a.onUncaughtError),a.onCaughtError!==void 0&&(d=a.onCaughtError),a.onRecoverableError!==void 0&&(g=a.onRecoverableError),a.formState!==void 0&&(v=a.formState)),t=rh(e,1,!0,t,a??null,n,s,v,c,d,g,bh),t.context=oh(null),a=t.current,n=kt(),n=mc(n),s=Aa(n),s.callback=null,Ma(a,s,n),a=n,t.current.lanes=a,vl(t,a),It(t),e[Sn]=t.current,lo(e),new Yi(t)},fs.version="19.2.4",fs}var kh;function f0(){if(kh)return To.exports;kh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(o){console.error(o)}}return i(),To.exports=u0(),To.exports}var d0=f0();const m0="modulepreload",h0=function(i){return"/"+i},zh={},gl=function(o,r,u){let f=Promise.resolve();if(r&&r.length>0){let p=function(j){return Promise.all(j.map(b=>Promise.resolve(b).then(N=>({status:"fulfilled",value:N}),N=>({status:"rejected",reason:N}))))};var h=p;document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),x=y?.nonce||y?.getAttribute("nonce");f=p(r.map(j=>{if(j=h0(j),j in zh)return;zh[j]=!0;const b=j.endsWith(".css"),N=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${j}"]${N}`))return;const _=document.createElement("link");if(_.rel=b?"stylesheet":m0,b||(_.as="script"),_.crossOrigin="",_.href=j,x&&_.setAttribute("nonce",x),document.head.appendChild(_),b)return new Promise((X,z)=>{_.addEventListener("load",X),_.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${j}`)))})}))}function m(y){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=y,window.dispatchEvent(x),!x.defaultPrevented)throw y}return f.then(y=>{for(const x of y||[])x.status==="rejected"&&m(x.reason);return o().catch(m)})},Dh=i=>{let o;const r=new Set,u=(p,j)=>{const b=typeof p=="function"?p(o):p;if(!Object.is(b,o)){const N=o;o=j??(typeof b!="object"||b===null)?b:Object.assign({},o,b),r.forEach(_=>_(o,N))}},f=()=>o,y={setState:u,getState:f,getInitialState:()=>x,subscribe:p=>(r.add(p),()=>r.delete(p))},x=o=i(u,f,y);return y},g0=(i=>i?Dh(i):Dh),x0=i=>i;function p0(i,o=x0){const r=hs.useSyncExternalStore(i.subscribe,hs.useCallback(()=>o(i.getState()),[i,o]),hs.useCallback(()=>o(i.getInitialState()),[i,o]));return hs.useDebugValue(r),r}const _h=i=>{const o=g0(i),r=u=>p0(o,u);return Object.assign(r,o),r},y0=(i=>i?_h(i):_h),$o=(i,o)=>o.some(r=>i instanceof r);let Oh,Lh;function b0(){return Oh||(Oh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v0(){return Lh||(Lh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wo=new WeakMap,zo=new WeakMap,rc=new WeakMap;function j0(i){const o=new Promise((r,u)=>{const f=()=>{i.removeEventListener("success",m),i.removeEventListener("error",h)},m=()=>{r(bn(i.result)),f()},h=()=>{u(i.error),f()};i.addEventListener("success",m),i.addEventListener("error",h)});return rc.set(o,i),o}function S0(i){if(Wo.has(i))return;const o=new Promise((r,u)=>{const f=()=>{i.removeEventListener("complete",m),i.removeEventListener("error",h),i.removeEventListener("abort",h)},m=()=>{r(),f()},h=()=>{u(i.error||new DOMException("AbortError","AbortError")),f()};i.addEventListener("complete",m),i.addEventListener("error",h),i.addEventListener("abort",h)});Wo.set(i,o)}let Io={get(i,o,r){if(i instanceof IDBTransaction){if(o==="done")return Wo.get(i);if(o==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return bn(i[o])},set(i,o,r){return i[o]=r,!0},has(i,o){return i instanceof IDBTransaction&&(o==="done"||o==="store")?!0:o in i}};function Ih(i){Io=i(Io)}function w0(i){return v0().includes(i)?function(...o){return i.apply(Fo(this),o),bn(this.request)}:function(...o){return bn(i.apply(Fo(this),o))}}function N0(i){return typeof i=="function"?w0(i):(i instanceof IDBTransaction&&S0(i),$o(i,b0())?new Proxy(i,Io):i)}function bn(i){if(i instanceof IDBRequest)return j0(i);if(zo.has(i))return zo.get(i);const o=N0(i);return o!==i&&(zo.set(i,o),rc.set(o,i)),o}const Fo=i=>rc.get(i);function Fh(i,o,{blocked:r,upgrade:u,blocking:f,terminated:m}={}){const h=indexedDB.open(i,o),y=bn(h);return u&&h.addEventListener("upgradeneeded",x=>{u(bn(h.result),x.oldVersion,x.newVersion,bn(h.transaction),x)}),r&&h.addEventListener("blocked",x=>r(x.oldVersion,x.newVersion,x)),y.then(x=>{m&&x.addEventListener("close",()=>m()),f&&x.addEventListener("versionchange",p=>f(p.oldVersion,p.newVersion,p))}).catch(()=>{}),y}const C0=["get","getKey","getAll","getAllKeys","count"],E0=["put","add","delete","clear"],Do=new Map;function Rh(i,o){if(!(i instanceof IDBDatabase&&!(o in i)&&typeof o=="string"))return;if(Do.get(o))return Do.get(o);const r=o.replace(/FromIndex$/,""),u=o!==r,f=E0.includes(r);if(!(r in(u?IDBIndex:IDBObjectStore).prototype)||!(f||C0.includes(r)))return;const m=async function(h,...y){const x=this.transaction(h,f?"readwrite":"readonly");let p=x.store;return u&&(p=p.index(y.shift())),(await Promise.all([p[r](...y),f&&x.done]))[0]};return Do.set(o,m),m}Ih(i=>({...i,get:(o,r,u)=>Rh(o,r)||i.get(o,r,u),has:(o,r)=>!!Rh(o,r)||i.has(o,r)}));const T0=["continue","continuePrimaryKey","advance"],Uh={},Po=new WeakMap,Ph=new WeakMap,A0={get(i,o){if(!T0.includes(o))return i[o];let r=Uh[o];return r||(r=Uh[o]=function(...u){Po.set(this,Ph.get(this)[o](...u))}),r}};async function*M0(...i){let o=this;if(o instanceof IDBCursor||(o=await o.openCursor(...i)),!o)return;o=o;const r=new Proxy(o,A0);for(Ph.set(r,o),rc.set(r,Fo(o));o;)yield r,o=await(Po.get(r)||o.continue()),Po.delete(r)}function Bh(i,o){return o===Symbol.asyncIterator&&$o(i,[IDBIndex,IDBObjectStore,IDBCursor])||o==="iterate"&&$o(i,[IDBIndex,IDBObjectStore])}Ih(i=>({...i,get(o,r,u){return Bh(o,r)?M0:i.get(o,r,u)},has(o,r){return Bh(o,r)||i.has(o,r)}}));const k0="freeq",z0=1;let _o=null;function ou(){return _o||(_o=Fh(k0,z0,{upgrade(i){i.objectStoreNames.contains("readState")||i.createObjectStore("readState"),i.objectStoreNames.contains("preferences")||i.createObjectStore("preferences"),i.objectStoreNames.contains("recentChannels")||i.createObjectStore("recentChannels")}})),_o}async function D0(i,o){await(await ou()).put("readState",o,i.toLowerCase())}const _0={theme:"dark",density:"comfortable",notifications:!0,sounds:!0,fontSize:15,loadExternalMedia:!0};async function eg(){const o=await(await ou()).get("preferences","prefs");return{..._0,...o}}async function Oo(i){const o=await ou(),r=await eg();await o.put("preferences",{...r,...i},"prefs")}function ds(i,o){const r=o.toLowerCase();let u=i.get(r);return u||(u={name:o,topic:"",members:new Map,messages:[],modes:new Set,isEncrypted:!1,unreadCount:0,mentionCount:0,isJoined:!1,pins:[]},i.set(r,u)),u}const T=y0((i,o)=>({connectionState:"disconnected",nick:"",registered:!1,authDid:null,authMessage:null,authError:null,motd:[],motdDismissed:!1,channels:new Map,activeChannel:"server",serverMessages:[],batches:new Map,whoisCache:new Map,replyTo:null,editingMsg:null,theme:localStorage.getItem("freeq-theme")||"dark",messageDensity:localStorage.getItem("freeq-density")||"default",loadExternalMedia:localStorage.getItem("freeq-load-media")!=="false",favorites:new Set(JSON.parse(localStorage.getItem("freeq-favorites")||"[]")),mutedChannels:new Set(JSON.parse(localStorage.getItem("freeq-muted")||"[]")),bookmarks:JSON.parse(localStorage.getItem("freeq-bookmarks")||"[]").map(r=>({...r,timestamp:new Date(r.timestamp)})),bookmarksPanelOpen:!1,searchOpen:!1,scrollToMsgId:null,searchQuery:"",channelListOpen:!1,channelList:[],lightboxUrl:null,threadMsgId:null,threadChannel:null,joinGateChannel:null,channelSettingsOpen:null,setConnectionState:r=>i({connectionState:r}),setNick:r=>i({nick:r}),setRegistered:r=>i({registered:r}),setAuth:(r,u)=>i({authDid:r,authMessage:u,authError:null}),appendMotd:r=>i(u=>({motd:[...u.motd,r]})),dismissMotd:()=>i({motdDismissed:!0}),setAuthError:r=>i({authError:r}),reset:()=>i({connectionState:"disconnected",registered:!1,channels:new Map,activeChannel:"server",serverMessages:[],batches:new Map,motd:[],motdDismissed:!1}),fullReset:()=>i(r=>({connectionState:"disconnected",nick:"",registered:!1,authDid:null,authMessage:null,authError:null,channels:new Map,activeChannel:"server",serverMessages:[],batches:new Map,whoisCache:new Map,replyTo:null,editingMsg:null,searchOpen:!1,searchQuery:"",channelListOpen:!1,channelList:[],lightboxUrl:null,threadMsgId:null,threadChannel:null,joinGateChannel:null,channelSettingsOpen:null,theme:r.theme,messageDensity:r.messageDensity,loadExternalMedia:r.loadExternalMedia,favorites:r.favorites,mutedChannels:r.mutedChannels,bookmarks:r.bookmarks,bookmarksPanelOpen:!1})),addChannel:r=>i(u=>{const f=new Map(u.channels),m=ds(f,r);return m.isJoined=!0,f.set(r.toLowerCase(),m),{channels:f}}),removeChannel:r=>i(u=>{const f=new Map(u.channels);f.delete(r.toLowerCase());const m=u.activeChannel.toLowerCase()===r.toLowerCase()?"server":u.activeChannel;return{channels:f,activeChannel:m}}),setActiveChannel:r=>i(u=>{const f=new Map(u.channels),m=f.get(u.activeChannel.toLowerCase());if(m&&m.messages.length>0){const y=m.messages[m.messages.length-1];m.lastReadMsgId=y.id,f.set(u.activeChannel.toLowerCase(),m)}const h=f.get(r.toLowerCase());return h&&(h.unreadCount=0,h.mentionCount=0,f.set(r.toLowerCase(),{...h})),{activeChannel:r,channels:f}}),setTopic:(r,u,f)=>i(m=>{const h=new Map(m.channels),y=ds(h,r);return y.topic=u,f&&(y.topicSetBy=f),h.set(r.toLowerCase(),y),{channels:h}}),clearMembers:r=>i(u=>{const f=r.toLowerCase(),m=u.channels.get(f);return m&&(m.members=new Map),{}}),addMember:(r,u)=>i(f=>{const m=new Map(f.channels),h=ds(m,r),y=h.members.get(u.nick.toLowerCase());return h.members.set(u.nick.toLowerCase(),{nick:u.nick,did:u.did??y?.did,handle:u.handle??y?.handle,displayName:u.displayName??y?.displayName,avatarUrl:u.avatarUrl??y?.avatarUrl,isOp:u.isOp??y?.isOp??!1,isHalfop:u.isHalfop??y?.isHalfop??!1,isVoiced:u.isVoiced??y?.isVoiced??!1,away:y?.away}),m.set(r.toLowerCase(),h),{channels:m}}),removeMember:(r,u)=>i(f=>{const m=new Map(f.channels),h=m.get(r.toLowerCase());return h&&(h.members.delete(u.toLowerCase()),m.set(r.toLowerCase(),h)),{channels:m}}),removeUserFromAll:(r,u)=>i(f=>{const m=new Map(f.channels);for(const[h,y]of m)y.members.has(r.toLowerCase())&&(y.members.delete(r.toLowerCase()),y.messages=[...y.messages,{id:crypto.randomUUID(),from:"",text:`${r} quit${u?` (${u})`:""}`,timestamp:new Date,tags:{},isSystem:!0}],m.set(h,{...y}));return{channels:m}}),renameUser:(r,u)=>i(f=>{const m=new Map(f.channels);for(const[h,y]of m){const x=y.members.get(r.toLowerCase());x&&(y.members.delete(r.toLowerCase()),y.members.set(u.toLowerCase(),{...x,nick:u}),m.set(h,y))}return{channels:m}}),setUserAway:(r,u)=>i(f=>{const m=new Map(f.channels);for(const[h,y]of m){const x=y.members.get(r.toLowerCase());x&&(y.members.set(r.toLowerCase(),{...x,away:u}),m.set(h,{...y}))}return{channels:m}}),setTyping:(r,u,f)=>i(m=>{const h=new Map(m.channels),y=h.get(r.toLowerCase());if(y){const x=y.members.get(u.toLowerCase());x&&(y.members.set(u.toLowerCase(),{...x,typing:f}),h.set(r.toLowerCase(),{...y}))}return{channels:h}}),updateMemberDid:(r,u)=>i(f=>{const m=new Map(f.channels);for(const[h,y]of m){const x=y.members.get(r.toLowerCase());x&&(y.members.set(r.toLowerCase(),{...x,did:u}),m.set(h,{...y}))}return{channels:m}}),handleMode:(r,u,f,m)=>i(h=>{const y=new Map(h.channels),x=y.get(r.toLowerCase());if(!x)return{channels:y};const p=u.startsWith("+"),j=u.replace(/^[+-]/,"");if((j==="o"||j==="h"||j==="v")&&f){const b=x.members.get(f.toLowerCase());b&&(j==="o"&&(b.isOp=p),j==="h"&&(b.isHalfop=p),j==="v"&&(b.isVoiced=p),x.members.set(f.toLowerCase(),{...b}))}else p?x.modes.add(j):x.modes.delete(j),j==="E"&&(x.isEncrypted=p);return y.set(r.toLowerCase(),{...x}),{channels:y}}),addMessage:(r,u)=>i(f=>{if(r==="server"||r.toLowerCase()==="server")return{serverMessages:[...f.serverMessages,u].slice(-500)};const m=new Map(f.channels),h=ds(m,r);return u.id&&!u.isSystem&&h.messages.some(y=>y.id===u.id)?{}:(h.messages=[...h.messages,u].slice(-1e3),f.activeChannel.toLowerCase()!==r.toLowerCase()&&h.unreadCount++,m.set(r.toLowerCase(),h),{channels:m})}),addSystemMessage:(r,u)=>{const f={id:crypto.randomUUID(),from:"",text:u,timestamp:new Date,tags:{},isSystem:!0};o().addMessage(r,f)},editMessage:(r,u,f,m)=>i(h=>{const y=new Map(h.channels),x=y.get(r.toLowerCase());x&&(x.messages=x.messages.map(j=>j.id===u?{...j,text:f,id:m||j.id,editOf:u}:j),y.set(r.toLowerCase(),{...x}));const p=new Map(h.batches);for(const[j,b]of p)b.target.toLowerCase()===r.toLowerCase()&&(b.messages=b.messages.map(N=>N.id===u?{...N,text:f,id:m||N.id,editOf:u}:N),p.set(j,b));return{channels:y,batches:p}}),deleteMessage:(r,u)=>i(f=>{const m=new Map(f.channels),h=m.get(r.toLowerCase());return h?(h.messages=h.messages.map(y=>y.id===u?{...y,deleted:!0,text:""}:y),m.set(r.toLowerCase(),{...h}),{channels:m}):{channels:m}}),addReaction:(r,u,f,m)=>i(h=>{const y=new Map(h.channels),x=y.get(r.toLowerCase());return x?(x.messages=x.messages.map(p=>{if(p.id!==u)return p;const j=new Map(p.reactions||[]),b=new Set(j.get(f)||[]);return b.add(m),j.set(f,b),{...p,reactions:j}}),y.set(r.toLowerCase(),{...x}),{channels:y}):{channels:y}}),incrementMentions:r=>i(u=>{const f=new Map(u.channels),m=f.get(r.toLowerCase());return m&&u.activeChannel.toLowerCase()!==r.toLowerCase()&&(m.mentionCount++,f.set(r.toLowerCase(),{...m})),{channels:f}}),clearUnread:r=>i(u=>{const f=new Map(u.channels),m=f.get(r.toLowerCase());if(m){m.unreadCount=0,m.mentionCount=0;const h=m.messages[m.messages.length-1];h?.id&&D0(r,h.id).catch(()=>{}),f.set(r.toLowerCase(),{...m})}return{channels:f}}),startBatch:(r,u,f)=>i(m=>{const h=new Map(m.batches);return h.set(r,{type:u,target:f,messages:[]}),{batches:h}}),addBatchMessage:(r,u)=>i(f=>{const m=new Map(f.batches),h=m.get(r);return h?(h.messages=[...h.messages,u],m.set(r,h),{batches:m}):{batches:m}}),endBatch:r=>i(u=>{const f=new Map(u.batches),m=f.get(r);if(f.delete(r),!m)return{batches:f};const h=new Map(u.channels),y=ds(h,m.target),x=new Set(y.messages.map(j=>j.id)),p=m.messages.filter(j=>!j.id||!x.has(j.id));return p.sort((j,b)=>{const N=j.timestamp?.getTime?.()??0,_=b.timestamp?.getTime?.()??0;return N!==_?N-_:(j.id||"").localeCompare(b.id||"")}),y.messages=[...p,...y.messages].slice(-1e3),h.set(m.target.toLowerCase(),y),{channels:h,batches:f}}),updateWhois:(r,u)=>i(f=>{const m=new Map(f.whoisCache),h=r.toLowerCase(),y=m.get(h)||{nick:r,fetchedAt:Date.now()};return m.set(h,{...y,...u,nick:r,fetchedAt:Date.now()}),{whoisCache:m}}),setReplyTo:r=>i({replyTo:r}),setEditingMsg:r=>i({editingMsg:r}),setTheme:r=>{localStorage.setItem("freeq-theme",r),i({theme:r})},setMessageDensity:r=>{localStorage.setItem("freeq-density",r),i({messageDensity:r})},setLoadExternalMedia:r=>{localStorage.setItem("freeq-load-media",r?"true":"false"),i({loadExternalMedia:r})},toggleFavorite:r=>i(u=>{const f=new Set(u.favorites),m=r.toLowerCase();return f.has(m)?f.delete(m):f.add(m),localStorage.setItem("freeq-favorites",JSON.stringify([...f])),{favorites:f}}),toggleMuted:r=>i(u=>{const f=new Set(u.mutedChannels),m=r.toLowerCase();return f.has(m)?f.delete(m):f.add(m),localStorage.setItem("freeq-muted",JSON.stringify([...f])),{mutedChannels:f}}),isFavorite:r=>o().favorites.has(r.toLowerCase()),isMuted:r=>o().mutedChannels.has(r.toLowerCase()),addBookmark:(r,u,f,m,h)=>i(y=>{if(y.bookmarks.some(p=>p.msgId===u))return y;const x=[...y.bookmarks,{channel:r,msgId:u,from:f,text:m,timestamp:h}];return localStorage.setItem("freeq-bookmarks",JSON.stringify(x)),{bookmarks:x}}),removeBookmark:r=>i(u=>{const f=u.bookmarks.filter(m=>m.msgId!==r);return localStorage.setItem("freeq-bookmarks",JSON.stringify(f)),{bookmarks:f}}),setBookmarksPanelOpen:r=>i({bookmarksPanelOpen:r}),setSearchOpen:r=>i({searchOpen:r,searchQuery:""}),setScrollToMsgId:r=>i({scrollToMsgId:r}),setPins:(r,u)=>i(f=>{const m=new Map(f.channels),h=m.get(r.toLowerCase());return h&&(h.pins=u,m.set(r.toLowerCase(),{...h})),{channels:m}}),setSearchQuery:r=>i({searchQuery:r}),setChannelListOpen:r=>i({channelListOpen:r}),setChannelList:r=>i({channelList:r}),addChannelListEntry:r=>i(u=>({channelList:[...u.channelList,r]})),setLightboxUrl:r=>i({lightboxUrl:r}),openThread:(r,u)=>i({threadMsgId:r,threadChannel:u}),closeThread:()=>i({threadMsgId:null,threadChannel:null}),setJoinGateChannel:r=>i({joinGateChannel:r}),setChannelSettingsOpen:r=>i({channelSettingsOpen:r})}));function O0(i,o=[]){C.useEffect(()=>{const r=u=>{const f=u.target,m=f.tagName==="INPUT"||f.tagName==="TEXTAREA"||f.isContentEditable,h=u.metaKey||u.ctrlKey||u.altKey;if(m&&!h)return;const y=[];(u.metaKey||u.ctrlKey)&&y.push("mod"),u.shiftKey&&y.push("shift"),u.altKey&&y.push("alt");let x=u.key.toLowerCase();x===" "&&(x="space"),y.push(x);const p=y.join("+"),j=i[p];j&&(u.preventDefault(),u.stopPropagation(),j())};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},o)}let Qa=0;const Hh=document.title;let il=null;function L0(){try{il||(il=new AudioContext);const i=il.currentTime;[523.25,659.25].forEach((r,u)=>{const f=il.createOscillator(),m=il.createGain();f.connect(m),m.connect(il.destination),f.frequency.value=r,f.type="sine";const h=i+u*.08;m.gain.setValueAtTime(0,h),m.gain.linearRampToValueAtTime(.08,h+.01),m.gain.exponentialRampToValueAtTime(.001,h+.2),f.start(h),f.stop(h+.2)})}catch{}}async function R0(){return"Notification"in window?Notification.permission==="granted"?!0:await Notification.requestPermission()==="granted":!1}let qh=!1;function U0(i,o,r){if(L0(),Qa++,tg(),!qh&&"Notification"in window&&Notification.permission==="default"&&(qh=!0,Notification.requestPermission()),document.hidden&&"Notification"in window&&Notification.permission==="granted")try{const u=new Notification(i,{body:o,icon:"/favicon.png",tag:"freeq-"+i});r&&(u.onclick=()=>{window.focus(),r(),u.close()}),setTimeout(()=>u.close(),5e3)}catch{}}function B0(i){Qa=i,tg()}const Yh=document.querySelector('link[rel="icon"]')?.href||"/favicon.png";let cl=null;function H0(){const i=document.querySelector('link[rel="icon"]');if(!i)return;if(Qa<=0){i.href=Yh;return}cl||(cl=document.createElement("canvas"),cl.width=32,cl.height=32);const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{const r=cl.getContext("2d");r&&(r.clearRect(0,0,32,32),r.drawImage(o,0,0,32,32),r.beginPath(),r.arc(24,8,8,0,2*Math.PI),r.fillStyle="#ff5c5c",r.fill(),Qa<=99&&(r.font="bold 11px sans-serif",r.textAlign="center",r.textBaseline="middle",r.fillStyle="#fff",r.fillText(Qa>9?"9+":String(Qa),24,8.5)),i.href=cl.toDataURL("image/png"))},o.src=Yh}function tg(){document.title=Qa>0?`(${Qa}) ${Hh}`:Hh,H0()}typeof window<"u"&&window.addEventListener("focus",()=>{});function q0(i){const o=i.indexOf("!");return o>0?i.slice(0,o):i}function Y0(i){let o=i.replace(/\r?\n$/,"");const r={};if(o.startsWith("@")){const h=o.indexOf(" "),y=o.substring(1,h);o=o.slice(h+1).trimStart();for(const x of y.split(";")){const p=x.indexOf("=");p>=0?r[x.slice(0,p)]=x.slice(p+1).replace(/\\s/g," ").replace(/\\:/g,";").replace(/\\\\/g,"\\").replace(/\\r/g,"\r").replace(/\\n/g,`
`):r[x]=""}}let u="";if(o.startsWith(":")){const h=o.indexOf(" ");u=o.slice(1,h),o=o.slice(h+1)}const f=[];for(;o.length;){if(o.startsWith(":")){f.push(o.slice(1));break}const h=o.indexOf(" ");if(h<0){f.push(o);break}f.push(o.slice(0,h)),o=o.slice(h+1)}const m=(f.shift()||"").toUpperCase();return{tags:r,prefix:u,command:m,params:f}}function K0(i){return Object.entries(i).map(([o,r])=>{const u=r.replace(/\\/g,"\\\\").replace(/;/g,"\\:").replace(/ /g,"\\s").replace(/\r/g,"\\r").replace(/\n/g,"\\n");return u?`${o}=${u}`:o}).join(";")}function jn(i,o,r){let u="";r&&Object.keys(r).length>0&&(u+=`@${K0(r)} `),u+=i;for(let f=0;f<o.length;f++)f===o.length-1&&(o[f].includes(" ")||o[f].startsWith(":"))?u+=` :${o[f]}`:u+=` ${o[f]}`;return u}class Pi{ws=null;opts;reconnectTimer=null;reconnectAttempts=0;intentionalClose=!1;lastDataReceived=0;heartbeatTimer=null;static PING_INTERVAL=45e3;static DEAD_TIMEOUT=9e4;constructor(o){this.opts=o}connect(){this.intentionalClose=!1,this.opts.onStateChange("connecting");try{this.ws=new WebSocket(this.opts.url)}catch{this.opts.onStateChange("disconnected"),this.scheduleReconnect();return}this.ws.onopen=()=>{this.reconnectAttempts=0,this.lastDataReceived=Date.now(),this.opts.onStateChange("connected"),this.startHeartbeat()},this.ws.onmessage=o=>{this.lastDataReceived=Date.now();const r=typeof o.data=="string"?o.data:"";for(const u of r.split(`
`)){const f=u.replace(/\r$/,"");f&&this.opts.onLine(f)}},this.ws.onclose=()=>{this.stopHeartbeat(),this.opts.onStateChange("disconnected"),this.intentionalClose||this.scheduleReconnect()},this.ws.onerror=()=>{}}send(o){if(this.ws?.readyState===WebSocket.OPEN){if(this.ws.bufferedAmount>65536){console.warn("[transport] High bufferedAmount, forcing reconnect"),this.ws.close();return}this.ws.send(o)}}disconnect(){if(this.intentionalClose=!0,this.stopHeartbeat(),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.ws){try{this.send("QUIT :Leaving")}catch{}this.ws.close(),this.ws=null}this.opts.onStateChange("disconnected")}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=setInterval(()=>{const o=Date.now()-this.lastDataReceived;o>Pi.DEAD_TIMEOUT?(console.warn("[transport] No data for 90s, forcing reconnect"),this.stopHeartbeat(),this.ws&&(this.ws.close(),this.ws=null)):o>Pi.PING_INTERVAL&&this.send("PING :heartbeat")},15e3)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}scheduleReconnect(){if(this.reconnectTimer||this.intentionalClose)return;this.reconnectAttempts++;const o=Math.min(1e3*Math.pow(2,this.reconnectAttempts-1),3e4);this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.connect()},o)}}const bs=new Map,Lo=new Map,G0=600*1e3,V0="https://public.api.bsky.app";async function ws(i){const o=bs.get(i);if(o&&Date.now()-o.fetchedAt<G0)return o.profile;const r=Lo.get(i);if(r)return r;const u=X0(i);Lo.set(i,u);try{return await u}finally{Lo.delete(i)}}async function X0(i){try{const o=`${V0}/xrpc/app.bsky.actor.getProfile?actor=${encodeURIComponent(i)}`,r=await fetch(o);if(!r.ok)return null;const u=await r.json(),f={did:u.did,handle:u.handle,displayName:u.displayName,avatar:u.avatar,description:u.description};return bs.set(i,{profile:f,fetchedAt:Date.now()}),i!==u.did&&bs.set(u.did,{profile:f,fetchedAt:Date.now()}),f}catch{return null}}function Ro(i){for(const o of i)bs.has(o)||ws(o).catch(()=>{})}function uu(i){const o=bs.get(i);return o?o.profile:null}const ec="ENC3:",Q0="freeq-e2ee",Z0=1;let Dt=null,He=null;const Ja=new Map;let Ns=!1;function eu(i){return i.startsWith(ec)}function tu(){return Ns&&He!==null}function ag(i){return Ja.has(i)}function J0(){return He?.publicKey??null}async function ng(i){if(!He)return null;const o=He.publicKey,u=new TextEncoder().encode(i),f=new Uint8Array(64+u.length);Array.from(o).map(p=>p.toString(16).padStart(2,"0")).join("")<i?(f.set(o,0),f.set(u,32)):(f.set(u,0),f.set(o,u.length));const y=new Uint8Array(await crypto.subtle.digest("SHA-256",f)),x=[];for(let p=0;p<12;p++){const j=(y[p*2]<<8|y[p*2+1])%1e5;x.push(j.toString().padStart(5,"0"))}return x.join(" ")}async function lg(i,o){try{await crypto.subtle.generateKey({name:"X25519"},!1,["deriveBits"])}catch{console.warn("[e2ee] X25519 not available in this browser  E2EE disabled");return}Dt=await Fh(Q0,Z0,{upgrade(f){f.objectStoreNames.contains("identity")||f.createObjectStore("identity"),f.objectStoreNames.contains("sessions")||f.createObjectStore("sessions",{keyPath:"remoteDid"})}});const r=await Dt.get("identity",i);if(r){if(He={secretKey:new Uint8Array(r.secretKey),publicKey:new Uint8Array(r.publicKey),spkSecret:new Uint8Array(r.spkSecret),spkPublic:new Uint8Array(r.spkPublic),spkSignature:new Uint8Array(r.spkSignature),spkId:r.spkId,signingPublic:r.signingPublic?new Uint8Array(r.signingPublic):void 0},r.signingPrivate)try{const f=await crypto.subtle.importKey("pkcs8",new Uint8Array(r.signingPrivate),"Ed25519",!1,["sign"]),m=await crypto.subtle.importKey("raw",new Uint8Array(r.signingPublic),"Ed25519",!1,["verify"]);He.signingKey={privateKey:f,publicKey:m}}catch{}}else{He=await W0();const f={secretKey:Array.from(He.secretKey),publicKey:Array.from(He.publicKey),spkSecret:Array.from(He.spkSecret),spkPublic:Array.from(He.spkPublic),spkSignature:Array.from(He.spkSignature),spkId:He.spkId};if(He.signingPublic&&(f.signingPublic=Array.from(He.signingPublic)),He.signingKey)try{const m=await crypto.subtle.exportKey("pkcs8",He.signingKey.privateKey);f.signingPrivate=Array.from(new Uint8Array(m))}catch{}await Dt.put("identity",f,i)}const u=await Dt.getAll("sessions");for(const f of u)Ja.set(f.remoteDid,f);try{await I0(o,i,He)}catch(f){console.warn("[e2ee] Failed to upload pre-key bundle:",f)}Ns=!0,console.log("[e2ee] Initialized for",i)}function $0(){Ns=!1,He=null,Ja.clear(),Dt&&(Dt.close(),Dt=null)}async function W0(){const i=await crypto.subtle.generateKey({name:"X25519"},!0,["deriveBits"]),o=await crypto.subtle.generateKey({name:"X25519"},!0,["deriveBits"]),r=new Uint8Array(await crypto.subtle.exportKey("raw",i.privateKey)),u=new Uint8Array(await crypto.subtle.exportKey("raw",i.publicKey)),f=new Uint8Array(await crypto.subtle.exportKey("raw",o.privateKey)),m=new Uint8Array(await crypto.subtle.exportKey("raw",o.publicKey));let h,y,x;try{h=await crypto.subtle.generateKey("Ed25519",!0,["sign","verify"]),y=new Uint8Array(await crypto.subtle.exportKey("raw",h.publicKey));const p=await crypto.subtle.sign("Ed25519",h.privateKey,m);x=new Uint8Array(p)}catch{x=new Uint8Array(64)}return{secretKey:r,publicKey:u,spkSecret:f,spkPublic:m,spkSignature:x,spkId:1,signingKey:h,signingPublic:y}}async function I0(i,o,r){const u={did:o,identity_key:xn(r.publicKey),signed_pre_key:xn(r.spkPublic),spk_signature:xn(r.spkSignature),spk_id:r.spkId};r.signingPublic&&(u.signing_key=xn(r.signingPublic)),await fetch(`${i}/api/v1/keys`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({did:o,bundle:u})})}async function sg(i,o){try{const r=await fetch(`${i}/api/v1/keys/${encodeURIComponent(o)}`);return r.ok?(await r.json()).bundle:null}catch{return null}}async function ig(i,o,r){if(!Ns||!He)return null;let u=Ja.get(i);if(!u){const f=await rg(i,r);if(!f)return null;u=f}try{const f=JSON.parse(u.state),m=await og(f.sendChainKey,f.sendMsgNum),h=crypto.getRandomValues(new Uint8Array(12));if(f.dhRatchetInitialized&&f.dhRecvPublic&&f.sendMsgNum>0&&f.sendMsgNum%10===0)try{const b=await crypto.subtle.generateKey({name:"X25519"},!0,["deriveBits"]),N=new Uint8Array(await crypto.subtle.exportKey("raw",b.privateKey)),_=new Uint8Array(await crypto.subtle.exportKey("raw",b.publicKey)),X=await gs(N,new Uint8Array(f.dhRecvPublic)),z=await vn(X,"freeq-ratchet-root"),I=await vn(z,"freeq-ratchet-chain");f.prevChainLen=f.sendMsgNum,f.sendMsgNum=0,f.dhSendSecret=Array.from(N),f.dhSendPublic=Array.from(_),f.rootKey=Array.from(z),f.sendChainKey=Array.from(I),console.log("[e2ee] DH ratchet step completed")}catch(b){console.warn("[e2ee] DH ratchet step failed, continuing with chain key:",b)}const y=f.dhSendPublic?new Uint8Array(f.dhSendPublic):He.publicKey,x=new Uint8Array(40);x.set(y,0),new DataView(x.buffer).setUint32(32,f.prevChainLen,!1),new DataView(x.buffer).setUint32(36,f.sendMsgNum,!1);const p=await crypto.subtle.importKey("raw",m,{name:"AES-GCM"},!1,["encrypt"]),j=new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",iv:h,additionalData:x},p,new TextEncoder().encode(o)));return f.sendChainKey=Array.from(await au(f.sendChainKey)),f.sendMsgNum++,u.state=JSON.stringify(f),u.lastUsed=Date.now(),Ja.set(i,u),Dt&&await Dt.put("sessions",u),`${ec}${xn(x)}:${xn(h)}:${xn(j)}`}catch(f){return console.error("[e2ee] Encrypt failed:",f),null}}async function cg(i,o,r){if(!Ns||!o.startsWith(ec))return null;let u=Ja.get(i);if(!u&&r){const f=await rg(i,r);if(!f)return null;u=f}if(!u)return null;try{const m=o.slice(ec.length).split(":");if(m.length!==3)return null;const h=pn(m[0]),y=pn(m[1]),x=pn(m[2]);if(h.length!==40||y.length!==12)return null;const p=h.slice(0,32),j=new DataView(h.buffer,h.byteOffset+36,4).getUint32(0,!1),b=JSON.parse(u.state);if(b.dhRatchetInitialized&&b.dhRecvPublic&&b.dhSendSecret){const I=new Uint8Array(b.dhRecvPublic);if(!F0(p,I))try{const te=await gs(new Uint8Array(b.dhSendSecret),p),$=await vn(te,"freeq-ratchet-root"),L=await vn($,"freeq-ratchet-chain");b.dhRecvPublic=Array.from(p),b.rootKey=Array.from($),b.recvChainKey=Array.from(L),b.recvMsgNum=0,console.log("[e2ee] Receiving DH ratchet step completed")}catch(te){console.warn("[e2ee] Receiving DH ratchet failed:",te)}}let N=b.recvChainKey;for(let I=b.recvMsgNum;I<j;I++)N=Array.from(await au(N));const _=await og(N,j),X=await crypto.subtle.importKey("raw",_,{name:"AES-GCM"},!1,["decrypt"]),z=await crypto.subtle.decrypt({name:"AES-GCM",iv:y,additionalData:h},X,x);return b.recvChainKey=Array.from(await au(N)),b.recvMsgNum=j+1,u.state=JSON.stringify(b),u.lastUsed=Date.now(),Ja.set(i,u),Dt&&await Dt.put("sessions",u),new TextDecoder().decode(z)}catch(f){return console.error("[e2ee] Decrypt failed:",f),null}}async function rg(i,o){if(!He)return null;const r=await sg(o,i);if(!r)return null;try{const u=pn(r.identity_key),f=pn(r.signed_pre_key);if(r.signing_key&&r.spk_signature)try{const J=pn(r.signing_key),V=pn(r.spk_signature),Z=await crypto.subtle.importKey("raw",J,"Ed25519",!1,["verify"]);if(!await crypto.subtle.verify("Ed25519",Z,V,f))return console.error("[e2ee] SPK signature verification failed for",i),null;console.log("[e2ee] SPK signature verified for",i)}catch(J){console.warn("[e2ee] Could not verify SPK signature:",J)}const m=await gs(He.secretKey,f),h=await gs(He.spkSecret,u),y=await gs(He.spkSecret,f),x=He.publicKey,p=ty(x,u)<0,j=p?m:h,b=p?h:m,N=new Uint8Array(96);N.set(j,0),N.set(b,32),N.set(y,64);const _=await vn(N,"freeq-x3dh-v1"),X=await vn(_,"freeq-chain-a"),z=await vn(_,"freeq-chain-b"),I=await crypto.subtle.generateKey({name:"X25519"},!0,["deriveBits"]),te=new Uint8Array(await crypto.subtle.exportKey("raw",I.privateKey)),$=new Uint8Array(await crypto.subtle.exportKey("raw",I.publicKey)),L={sharedSecret:Array.from(_),sendChainKey:Array.from(p?X:z),recvChainKey:Array.from(p?z:X),sendMsgNum:0,recvMsgNum:0,prevChainLen:0,dhSendSecret:Array.from(te),dhSendPublic:Array.from($),dhRecvPublic:Array.from(f),rootKey:Array.from(_),dhRatchetInitialized:!0},ae={remoteDid:i,state:JSON.stringify(L),createdAt:Date.now(),lastUsed:Date.now()};return Ja.set(i,ae),Dt&&await Dt.put("sessions",ae),console.log("[e2ee] Session established with",i),ae}catch(u){return console.error("[e2ee] X3DH failed:",u),null}}function F0(i,o){if(i.length!==o.length)return!1;for(let r=0;r<i.length;r++)if(i[r]!==o[r])return!1;return!0}async function gs(i,o){const r=await crypto.subtle.importKey("raw",i,{name:"X25519"},!1,["deriveBits"]),u=await crypto.subtle.importKey("raw",o,{name:"X25519"},!1,[]),f=await crypto.subtle.deriveBits({name:"X25519",public:u},r,256);return new Uint8Array(f)}async function vn(i,o){const r=await crypto.subtle.importKey("raw",i,"HKDF",!1,["deriveBits"]),u=await crypto.subtle.deriveBits({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(32).fill(255),info:new TextEncoder().encode(o)},r,256);return new Uint8Array(u)}async function og(i,o){const r=new Uint8Array(i),u=await crypto.subtle.importKey("raw",r,{name:"HMAC",hash:"SHA-256"},!1,["sign"]),f=await crypto.subtle.sign("HMAC",u,new Uint8Array([1]));return new Uint8Array(f)}async function au(i){const o=new Uint8Array(i),r=await crypto.subtle.importKey("raw",o,{name:"HMAC",hash:"SHA-256"},!1,["sign"]),u=await crypto.subtle.sign("HMAC",r,new Uint8Array([2]));return new Uint8Array(u)}const tc="ENC1:",Cs=new Map;function ug(i){return i.startsWith(tc)}function nu(i){return Cs.has(i.toLowerCase())}async function P0(i,o){const r=i.toLowerCase(),u=new Uint8Array(await crypto.subtle.digest("SHA-256",new TextEncoder().encode(r))),f=new TextEncoder().encode(o),m=await crypto.subtle.importKey("raw",f,"HKDF",!1,["deriveBits"]),h=await crypto.subtle.deriveBits({name:"HKDF",hash:"SHA-256",salt:u,info:new TextEncoder().encode("freeq-e2ee-v1")},m,256);Cs.set(r,new Uint8Array(h))}function ey(i){Cs.delete(i.toLowerCase())}async function fg(i,o){const r=Cs.get(i.toLowerCase());if(!r)return null;const u=crypto.getRandomValues(new Uint8Array(12)),f=await crypto.subtle.importKey("raw",r,{name:"AES-GCM"},!1,["encrypt"]),m=new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",iv:u},f,new TextEncoder().encode(o))),h=btoa(String.fromCharCode(...u)),y=btoa(String.fromCharCode(...m));return`${tc}${h}:${y}`}async function dg(i,o){const r=Cs.get(i.toLowerCase());if(!r||!o.startsWith(tc))return null;try{const u=o.slice(tc.length),f=u.indexOf(":");if(f===-1)return null;const m=u.slice(0,f),h=u.slice(f+1),y=Uint8Array.from(atob(m),b=>b.charCodeAt(0)),x=Uint8Array.from(atob(h),b=>b.charCodeAt(0));if(y.length!==12)return null;const p=await crypto.subtle.importKey("raw",r,{name:"AES-GCM"},!1,["decrypt"]),j=await crypto.subtle.decrypt({name:"AES-GCM",iv:y},p,x);return new TextDecoder().decode(j)}catch(u){return console.warn("[e2ee] ENC1 decrypt failed:",u),null}}function ty(i,o){const r=Math.min(i.length,o.length);for(let u=0;u<r;u++)if(i[u]!==o[u])return i[u]-o[u];return i.length-o.length}function xn(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function pn(i){const o=i.replace(/-/g,"+").replace(/_/g,"/")+"==".slice(0,(4-i.length%4)%4);return Uint8Array.from(atob(o),r=>r.charCodeAt(0))}const Kh=Object.freeze(Object.defineProperty({__proto__:null,decryptChannel:dg,decryptMessage:cg,encryptChannel:fg,encryptMessage:ig,fetchPreKeyBundle:sg,getIdentityPublicKey:J0,getSafetyNumber:ng,hasChannelKey:nu,hasSession:ag,initialize:lg,isE2eeReady:tu,isENC1:ug,isEncrypted:eu,removeChannelKey:ey,setChannelKey:P0,shutdown:$0},Symbol.toStringTag,{value:"Module"}));let ac=null,lu=null,nc=null;function mg(i){const o=new Uint8Array(i);let r="";for(const u of o)r+=String.fromCharCode(u);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ay(){try{const i=await crypto.subtle.generateKey("Ed25519",!0,["sign","verify"]);ac=i;const o=await crypto.subtle.exportKey("raw",i.publicKey);return lu=mg(o),lu}catch(i){return console.warn("Ed25519 not available in Web Crypto, falling back to server signing:",i),null}}function ny(i){nc=i}async function ly(i,o){if(!ac?.privateKey||!nc)return null;const r=Math.floor(Date.now()/1e3),u=`${nc}\0${i}\0${o}\0${r}`,f=new TextEncoder().encode(u);try{const m=await crypto.subtle.sign("Ed25519",ac.privateKey,f);return mg(m)}catch{return null}}function sy(){ac=null,lu=null,nc=null}let dt=null,Ve="",su="",vs=new Set,ya="",Gt="",fu="",js="",iu=!1,Gi=0,$i=[],Xa=new Set;const hg="freeq-joined-channels";function Uo(){try{localStorage.setItem(hg,JSON.stringify([...Xa]))}catch{}}function iy(){try{const i=localStorage.getItem(hg);if(i)return JSON.parse(i)}catch{}return[]}const pa=new Set;function xs(i,o,r){if(dt){try{dt.disconnect()}catch{}dt=null}Ve=o,su=i,$i=r||[],T.getState().reset(),dt=new Pi({url:i,onLine:ry,onStateChange:f=>{if(T.getState().setConnectionState(f),f==="connected"){vs=new Set;let m=!1;const h=j=>{m||(m=!0,j&&(ya=j),ge("CAP LS 302"),ge(`NICK ${Ve}`),ge(`USER ${Ve} 0 * :freeq web app`))},y=setTimeout(()=>{m||(console.warn("[irc] Registration safety timeout  sending as guest"),ya="",Gt="",js="",h())},8e3),x=localStorage.getItem("freeq-broker-token"),p=localStorage.getItem("freeq-broker-base");if(iu&&ya)iu=!1,clearTimeout(y),h();else if(x&&p&&Gt){const j=new AbortController,b=setTimeout(()=>j.abort(),5e3),N=JSON.stringify({broker_token:x}),_=()=>fetch(`${p}/session`,{method:"POST",headers:{"Content-Type":"application/json"},body:N,signal:j.signal});_().then(X=>(clearTimeout(b),X.status===502?_().then(z=>z.ok?z.json():Promise.reject("broker 502 retry failed")):X.ok?X.json():Promise.reject("broker refresh failed"))).then(X=>{clearTimeout(y),h(X.token)}).catch(()=>{clearTimeout(b),clearTimeout(y),ya="",Gt="",js="",h()})}else clearTimeout(y),h()}}}),dt.connect(),window.addEventListener("beforeunload",()=>{if(dt)try{dt.send("QUIT :Leaving")}catch{}})}function xl(){dt?.disconnect(),dt=null,Ve="",vs=new Set,ya="",Gt="",fu="",js="",Xa.clear(),sy(),T.getState().fullReset()}function du(){if(!su||!Ve)return;dt?.disconnect(),dt=null;const i=[...Xa];T.getState().reset(),xs(su,Ve,i)}function cu(i,o,r,u){ya=i,Gt=o,fu=r,js=u,i&&(iu=!0)}function lc(i){const o=T.getState(),r=i.toLowerCase();for(const u of o.channels.values()){const f=u.members.get(r);if(f?.did)return f.did}}const ml=new Map;function Gh(i,o){if(ml.set(i,{plaintext:o,ts:Date.now()}),ml.size>100){const r=Date.now();for(const[u,f]of ml)r-f.ts>6e4&&ml.delete(u)}}async function Vi(i,o){const r=await ly(i,o);if(r){const u=jn("PRIVMSG",[i,o],{"+freeq.at/sig":r});ge(u)}else ge(`PRIVMSG ${i} :${o}`)}function ps(i,o){const r=i.startsWith("#")||i.startsWith("&");if(nu(i))fg(i,o).then(f=>{if(f){Gh(f,o);const m=jn("PRIVMSG",[i,f],{"+encrypted":""});ge(m)}else Vi(i,o)});else if(!r&&tu()){const f=lc(i);if(f){const m=window.location.origin;ig(f,o,m).then(h=>{if(h){Gh(h,o);const y=jn("PRIVMSG",[i,h],{"+encrypted":""});ge(y)}else Vi(i,o)})}else Vi(i,o)}else Vi(i,o);if(!r){const f=T.getState();f.channels.has(i.toLowerCase())||f.addChannel(i)}const u=nu(i)||!r&&tu()&&!!lc(i);vs.has("echo-message")||T.getState().addMessage(i,{id:crypto.randomUUID(),from:Ve,text:o,timestamp:new Date,tags:{},isSelf:!0,encrypted:u})}function mu(i,o,r){const u=jn("PRIVMSG",[i,r],{"+reply":o});if(ge(u),!(i.startsWith("#")||i.startsWith("&"))){const m=T.getState();m.channels.has(i.toLowerCase())||m.addChannel(i)}}function gg(i,o,r){const u=jn("PRIVMSG",[i,r],{"+draft/edit":o});ge(u)}function xg(i,o){T.getState().deleteMessage(i,o);const r=jn("TAGMSG",[i],{"+draft/delete":o});ge(r)}function oc(i,o,r){const u={"+react":o};r&&(u["+reply"]=r),ge(jn("TAGMSG",[i],u))}function Za(i){ge(`JOIN ${i}`)}function hu(i){ge(`PART ${i}`)}function gu(i,o){ge(`TOPIC ${i} :${o}`)}function Wi(i,o,r){ge(r?`MODE ${i} ${o} ${r}`:`MODE ${i} ${o}`)}function pg(i,o,r){ge(`KICK ${i} ${o} :${r||"kicked"}`)}function yg(i,o){ge(`INVITE ${o} ${i}`)}function bg(i){ge(i?`AWAY :${i}`:"AWAY")}function xu(i){ge(`WHOIS ${i}`)}function pu(i,o){ge(o?`CHATHISTORY BEFORE ${i} timestamp=${o} 50`:`CHATHISTORY LATEST ${i} * 50`)}function zt(i){ge(i)}function uc(){return Ve}function vg(i,o){ge(`PIN ${i} ${o}`)}function jg(i,o){ge(`UNPIN ${i} ${o}`)}async function cy(i){try{const o=i.startsWith("#")?i.slice(1):i,r=await fetch(`${window.location.origin}/api/v1/channels/${encodeURIComponent(o)}/pins`);if(r.ok){const u=await r.json();T.getState().setPins(i,u.pins||[])}}catch{}}function ge(i){dt?.send(i)}async function ry(i){const o=Y0(i),r=T.getState(),u=q0(o.prefix);switch(o.command){case"CAP":oy(o);break;case"AUTHENTICATE":uy(o);break;case"900":if(r.setAuth(Gt,o.params[o.params.length-1]),Gt){Ro([Gt]);const f=window.location.origin;lg(Gt,f).catch(m=>console.warn("[e2ee] Init failed:",m))}break;case"903":Gt&&(ny(Gt),ay().then(f=>{f&&ge(`MSGSIG ${f}`)})),ge("CAP END");break;case"904":r.setAuthError(o.params[o.params.length-1]||"SASL failed"),ge("CAP END");break;case"PING":ge(`PONG :${o.params[0]||""}`);break;case"ERROR":{(o.params[0]||"").includes("same identity reconnected")&&(dt?.disconnect(),T.getState().fullReset());break}case"001":{const f=o.params[0]||Ve;if(localStorage.getItem("freeq-handle")&&/^Guest\d+$/i.test(f)){if(Gi++,Gi<=2){ge("QUIT :Retrying auth");return}Gi=0,localStorage.removeItem("freeq-broker-token"),ge("QUIT :Session expired"),dt?.disconnect(),dt=null,T.getState().fullReset();return}Gi=0,Ve=f,r.setNick(Ve),r.setRegistered(!0);let h=$i.length>0?$i:Xa.size>0?[...Xa]:iy();h.length===0&&(h=["#freeq"]),h.some(y=>y.toLowerCase().replace(/^#/,"")==="freeq"||y.toLowerCase()==="#freeq")||h.unshift("#freeq");for(const y of h)y.trim()&&ge(`JOIN ${y.trim()}`);$i=[];break}case"433":Ve+="_",ge(`NICK ${Ve}`);break;case"NICK":{const f=o.params[0];u===Ve&&(Ve=f,r.setNick(Ve)),r.renameUser(u,f);break}case"JOIN":{const f=o.params[0],m=o.params[1];u===Ve&&(r.addChannel(f),r.clearMembers(f),r.setActiveChannel(f),Xa.add(f.toLowerCase()),Uo(),cy(f));const h=m&&m!=="*"?m:void 0;r.addMember(f,{nick:u,did:h,isOp:!1,isHalfop:!1,isVoiced:!1}),h&&Ro([h]),r.addSystemMessage(f,`${u} joined`);break}case"PART":{const f=o.params[0];u===Ve?(r.removeChannel(f),Xa.delete(f.toLowerCase()),Uo()):(r.removeMember(f,u),r.addSystemMessage(f,`${u} left`));break}case"QUIT":{const f=o.params[0]||"";r.removeUserFromAll(u,f);break}case"KICK":{const f=o.params[0],m=o.params[1],h=o.params[2]||"";m.toLowerCase()===Ve.toLowerCase()?(r.removeChannel(f),Xa.delete(f.toLowerCase()),Uo(),r.addSystemMessage("server",`Kicked from ${f} by ${u}: ${h}`)):(r.removeMember(f,m),r.addSystemMessage(f,`${m} kicked by ${u}${h?`: ${h}`:""}`));break}case"PRIVMSG":{const f=o.params[0],m=o.params[1]||"",h=m.startsWith("ACTION ")&&m.endsWith(""),y=f.startsWith("#")||f.startsWith("&"),x=u.toLowerCase()===Ve.toLowerCase(),p=y||x?f:u,j=o.tags["+draft/edit"];if(j){r.editMessage(p,j,m,o.tags.msgid);break}let b=h?m.slice(8,-1):m,N=!1;const _=ml.get(m);if(_&&x)b=_.plaintext,N=!0,ml.delete(m);else if(ug(m)&&y){const $=await dg(f,m);$!==null?(b=$,N=!0):(b=" [encrypted message  use /encrypt <passphrase> to decrypt]",N=!0)}else if(eu(m)&&!y&&!x){const $=lc(u);if($){const L=window.location.origin,ae=await cg($,m,L);ae!==null?(b=ae,N=!0):(b=" [encrypted DM  could not decrypt]",N=!0)}else b=" [encrypted DM  unknown sender identity]",N=!0}else eu(m)&&!y&&x&&(b=" [encrypted message]",N=!0);o.tags["+encrypted"]&&(N=!0);const X={id:o.tags.msgid||crypto.randomUUID(),from:u,text:b,timestamp:o.tags.time?new Date(o.tags.time):new Date,tags:o.tags,isAction:h,isSelf:x,replyTo:o.tags["+reply"],encrypted:N};!y&&!r.channels.has(p.toLowerCase())&&r.addChannel(p),!y&&!x&&!lc(u)&&!pa.has(u.toLowerCase())&&(pa.add(u.toLowerCase()),ge(`WHOIS ${u}`));const z=o.tags.batch;if(z&&r.batches.has(z)){r.addBatchMessage(z,X);break}r.addMessage(p,X);const I=!X.isSelf&&m.toLowerCase().includes(Ve.toLowerCase()),te=!y&&!X.isSelf;I&&r.incrementMentions(p),te&&r.incrementMentions(p),(I||te)&&!T.getState().mutedChannels.has(p.toLowerCase())&&U0(te?`DM from ${u}`:p,`${u}: ${m.slice(0,100)}`,()=>T.getState().setActiveChannel(p));break}case"NOTICE":{const f=o.params[0],m=o.params[1]||"",h=f==="*"||f===Ve?"server":f;r.addSystemMessage(h,`[${u||"server"}] ${m}`);break}case"TAGMSG":{const f=o.params[0],m=o.tags["+draft/delete"];if(m){r.deleteMessage(f,m);break}const h=o.tags["+react"];if(h){const x=o.tags["+reply"];if(x)r.addReaction(f,x,h,u);else{const p=r.channels.get(f.toLowerCase());if(p){const j=[...p.messages].reverse().find(b=>!b.isSystem&&!b.deleted);j&&r.addReaction(f,j.id,h,u)}}}const y=o.tags["+typing"];y&&r.setTyping(f,u,y==="active");break}case"TOPIC":{const f=o.params[0],m=o.params[1]||"";r.setTopic(f,m,u);break}case"332":{const f=o.params[1],m=o.params[2]||"";r.setTopic(f,m);break}case"353":{const f=o.params[2],m=(o.params[3]||"").split(" ").filter(Boolean);for(const h of m){const y=h.startsWith("@"),x=h.startsWith("%"),p=h.startsWith("+"),j=h.replace(/^[@%+]/,"");r.addMember(f,{nick:j,isOp:y,isHalfop:x,isVoiced:p})}break}case"366":{const f=o.params[1];pu(f);const m=r.channels.get(f?.toLowerCase());if(m){const h=[];for(const y of m.members.values())!y.did&&y.nick.toLowerCase()!==Ve.toLowerCase()&&h.push(y.nick);for(const y of h)pa.add(y.toLowerCase()),ge(`WHOIS ${y}`)}break}case"MODE":{const f=o.params[0];if(f.startsWith("#")||f.startsWith("&")){const m=o.params[1]||"",h=o.params[2];r.handleMode(f,m,h,u),r.addSystemMessage(f,`${u} set mode ${m}${h?" "+h:""}`)}break}case"AWAY":{const f=o.params[0];r.setUserAway(u,f||null);break}case"BATCH":{const f=o.params[0];f.startsWith("+")?r.startBatch(f.slice(1),o.params[1]||"",o.params[2]||""):f.startsWith("-")&&r.endBatch(f.slice(1));break}case"INVITE":o.params.length>=2&&r.addSystemMessage("server",`${u} invited you to ${o.params[1]}`);break;case"401":{const f=o.params[1];f&&r.channels.has(f.toLowerCase())&&r.addSystemMessage(f,`${f} is not online  message not delivered`),r.addSystemMessage("server",`No such nick: ${f}`);break}case"404":{const f=o.params[1]||"",m=o.params[2]||"Cannot send to channel";r.addSystemMessage(f||"server",m);break}case"473":{const f=o.params[1]||"";r.addSystemMessage(f||"server",`Cannot join ${f}  channel is invite only (+i)`);break}case"474":{const f=o.params[1]||"";r.addSystemMessage(f||"server",`Cannot join ${f}  you are banned`);break}case"475":{const f=o.params[1]||"";r.addSystemMessage(f||"server",`Cannot join ${f}  incorrect channel key`);break}case"477":{const f=o.params[1]||"",m=o.params[2]||"Policy acceptance required";r.addSystemMessage("server",`Cannot join ${f}: ${m}`),T.getState().authDid&&T.getState().setJoinGateChannel(f);break}case"482":r.addSystemMessage(o.params[1]||"server",o.params[2]||"Not operator");break;case"311":{const f=o.params[1]||"";r.updateWhois(f,{user:o.params[2],host:o.params[3],realname:o.params[5]||o.params[4]}),pa.has(f.toLowerCase())||r.addSystemMessage("server",`WHOIS ${f}: ${o.params[2]}@${o.params[3]} (${o.params[5]||o.params[4]})`);break}case"312":{const f=o.params[1]||"";r.updateWhois(f,{server:o.params[2]}),pa.has(f.toLowerCase())||r.addSystemMessage("server",`  Server: ${o.params[2]}`);break}case"318":{const f=o.params[1]||"";pa.delete(f.toLowerCase());break}case"319":{const f=o.params[1]||"";r.updateWhois(f,{channels:o.params[2]}),pa.has(f.toLowerCase())||r.addSystemMessage("server",`  Channels: ${o.params[2]}`);break}case"330":{const f=o.params[1]||"",m=o.params[2]||"";r.updateWhois(f,{did:m}),pa.has(f.toLowerCase())||r.addSystemMessage("server",`  DID: ${m}`),f&&r.updateMemberDid(f,m),m&&Ro([m]);break}case"671":{const f=o.params[1]||"",m=o.params[2]||"";r.updateWhois(f,{handle:m}),pa.has(f.toLowerCase())||r.addSystemMessage("server",`  Handle: ${m}`);break}case"321":r.setChannelList([]);break;case"322":{const f=o.params[1]||"",m=parseInt(o.params[2]||"0",10),h=o.params[3]||"";r.addChannelListEntry({name:f,topic:h,count:m}),r.addSystemMessage("server",`  ${f} (${m}) ${h}`);break}case"323":break;case"375":case"372":{const f=o.params[o.params.length-1];r.addSystemMessage("server",f),o.command==="375"&&T.setState({motd:[],motdDismissed:!1}),o.command==="372"&&r.appendMotd(f.replace(/^- ?/,""));break}default:/^\d{3}$/.test(o.command)&&r.addSystemMessage("server",o.params.slice(1).join(" "));break}}function oy(i){const o=(i.params[1]||"").toUpperCase();if(o==="LS"){const r=i.params.slice(2).join(" "),u=[],f=["message-tags","server-time","batch","multi-prefix","echo-message","account-notify","extended-join","away-notify","draft/chathistory"];for(const m of f)r.includes(m)&&u.push(m);ya&&r.includes("sasl")&&u.push("sasl"),u.length?ge(`CAP REQ :${u.join(" ")}`):ge("CAP END")}else if(o==="ACK"){const r=i.params.slice(2).join(" ");for(const u of r.split(" "))vs.add(u);vs.has("sasl")&&ya?ge("AUTHENTICATE ATPROTO-CHALLENGE"):ge("CAP END")}else o==="NAK"&&ge("CAP END")}function uy(i){const o=i.params[0]||"";if(o==="+"||!o)return;const r=JSON.stringify({did:Gt,method:js||"pds-session",signature:ya,pds_url:fu}),u=btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");if(u.length<=400)ge(`AUTHENTICATE ${u}`);else{for(let f=0;f<u.length;f+=400)ge(`AUTHENTICATE ${u.slice(f,f+400)}`);ge("AUTHENTICATE +")}}const fy=Object.freeze(Object.defineProperty({__proto__:null,connect:xs,disconnect:xl,getNick:uc,inviteUser:yg,joinChannel:Za,kickUser:pg,partChannel:hu,pinMessage:vg,rawCommand:zt,reconnect:du,requestHistory:pu,sendDelete:xg,sendEdit:gg,sendMessage:ps,sendReaction:oc,sendReply:mu,sendWhois:xu,setAway:bg,setMode:Wi,setSaslCredentials:cu,setTopic:gu,unpinMessage:jg},Symbol.toStringTag,{value:"Module"}));function Bo({done:i,active:o,label:r}){return l.jsxs("div",{className:`flex items-center gap-2 text-[11px] ${i?"text-success":o?"text-fg-muted":"text-fg-dim/40"}`,children:[i?l.jsx("svg",{className:"w-3.5 h-3.5 shrink-0",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"})}):o?l.jsx("svg",{className:"w-3.5 h-3.5 shrink-0 animate-spin",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("circle",{cx:"8",cy:"8",r:"6",strokeDasharray:"28",strokeDashoffset:"8",strokeLinecap:"round"})}):l.jsx("div",{className:"w-3.5 h-3.5 shrink-0 rounded-full border border-current opacity-30"}),l.jsx("span",{children:r})]})}function dy(i){return i.includes("SASL authentication failed")?"Could not verify your identity. Make sure your handle is correct and try again.":i.includes("Too many SASL failures")?"Too many login attempts. Please wait a moment and try again.":i.includes("unavailable")?"The identity service is starting up. This usually takes a few seconds  please try again.":i.includes("502")||i.includes("Bad Gateway")?"The identity service is temporarily unavailable. Try again in a few seconds.":i.includes("timeout")||i.includes("Timeout")?"The connection timed out. Check your internet connection and try again.":i.includes("Nick")&&i.includes("registered")?"That nickname is registered to another user. Sign in with AT Protocol to reclaim it, or choose a different nick.":i.includes("OAuth")?"The Bluesky authorization was cancelled or failed. Please try again.":i.includes("WebSocket")||i.includes("websocket")?"Could not connect to the server. Check your internet connection.":i}let Ho=0;const my=[".bsky.social",".bsky.app",".bsky.team",".bsky.network",".atproto.com"];function qo(i){const o=i.toLowerCase().trim();for(const r of my)if(o.endsWith(r))return o.slice(0,-r.length);return o}const rl="freeq-handle",gn="freeq-channels",Yo="freeq-broker-token",Ko="freeq-broker-base";function hy(){const i=T(K=>K.registered),o=T(K=>K.connectionState),r=T(K=>K.authError),[u,f]=C.useState("at-proto"),[m,h]=C.useState(()=>localStorage.getItem(rl)||""),[y,x]=C.useState(()=>"web"+Math.floor(Math.random()*99999)),[p,j]=C.useState(""),[b,N]=C.useState(()=>{const K=window.location.hash;if(K.startsWith("#auto-join=")){const ie=decodeURIComponent(K.slice(11));window.location.hash="";const ne=localStorage.getItem(gn)||"",S=new Set(ne.split(",").map(D=>D.trim()).filter(Boolean));S.add(ie);const H=[...S].join(",");return localStorage.setItem(gn,H),H}return localStorage.getItem(gn)||"#freeq"}),_=!!window.__TAURI_INTERNALS__,[X,z]=C.useState(()=>{if(_)return"wss://irc.freeq.at/irc";const K=window.location,ie=K.protocol==="https:"?"wss:":"ws:",ne=K.host.replace("localhost","127.0.0.1");return`${ie}//${ne}/irc`}),[I,te]=C.useState(()=>{if(_)return"https://irc.freeq.at";const K=window.location,ie=K.host.replace("localhost","127.0.0.1");return`${K.protocol}//${ie}`}),[$]=C.useState(()=>{const K=localStorage.getItem(Ko);return K||(_||window.location.host.endsWith("freeq.at")?"https://auth.freeq.at":I)}),[L,ae]=C.useState(""),[J,V]=C.useState(!1),[Z,de]=C.useState(!1),[F,Le]=C.useState(!1),Ce=C.useRef(null),pe=C.useRef(null);C.useEffect(()=>{u==="at-proto"?Ce.current?.focus():pe.current?.focus()},[u]),C.useEffect(()=>{m.trim()&&j(qo(m.trim()))},[m]),C.useEffect(()=>{const K=window.location.hash;if(K.startsWith("#oauth=")){const ne=K.slice(7);try{const S=atob(ne.replace(/-/g,"+").replace(/_/g,"/")),H=JSON.parse(S);H._ts=Date.now(),localStorage.setItem("freeq-oauth-result",JSON.stringify(H))}catch{}window.location.hash=""}const ie=localStorage.getItem("freeq-oauth-result");if(ie){localStorage.removeItem("freeq-oauth-result"),localStorage.removeItem("freeq-oauth-pending");try{const ne=JSON.parse(ie);if((ne._ts?Date.now()-ne._ts:1/0)>300*1e3)return;if(ne?.did){ne.broker_token&&(localStorage.setItem(Yo,ne.broker_token),localStorage.setItem(Ko,$)),Le(!0);const H=localStorage.getItem(rl)||ne.handle||"",D=(localStorage.getItem(gn)||"#freeq").split(",").map(Ue=>Ue.trim()).filter(Boolean),Q=qo(ne.handle||H),le=ne.web_token||ne.token||ne.access_jwt||"";cu(le,ne.did,ne.pds_url||"","web-token");const fe=window.location,be=fe.protocol==="https:"?"wss:":"ws:",Pe=fe.host.replace("localhost","127.0.0.1");xs(`${be}//${Pe}/irc`,Q,D)}}catch{}}},[$]),C.useEffect(()=>{if(i||Z||F||Ho>=1)return;const K=localStorage.getItem(Yo);if(!K)return;Ho++,Le(!0);const ie=(localStorage.getItem(gn)||"#freeq").split(",").map(Q=>Q.trim()).filter(Boolean),ne=new AbortController,S=setTimeout(()=>ne.abort(),8e3),H=JSON.stringify({broker_token:K}),D=()=>fetch(`${$}/session`,{method:"POST",headers:{"Content-Type":"application/json"},body:H,signal:ne.signal});D().then(async Q=>{if(clearTimeout(S),Q.status===502){const le=await D();if(!le.ok)throw new Error(await le.text());return le.json()}if(!Q.ok)throw new Error(await Q.text());return Q.json()}).then(Q=>{localStorage.setItem(rl,Q.handle||localStorage.getItem(rl)||""),cu(Q.token,Q.did,"","web-token");const le=qo(Q.handle||localStorage.getItem(rl)||Q.nick);xs(X,le,ie)}).catch(Q=>{clearTimeout(S),localStorage.removeItem(Yo),Le(!1),Q?.name==="AbortError"&&ae("Authentication service unavailable. Try again or connect as guest.")})},[i,Z,F,$,X]),C.useEffect(()=>{if(F){if(i){Le(!1),Ho=0;return}if(r){Le(!1);return}if(o==="disconnected"){const K=setTimeout(()=>Le(!1),2e3);return()=>clearTimeout(K)}}},[F,i,o,r]);const ue=b.split(",").map(K=>K.trim()).filter(Boolean),ye=C.useCallback(async()=>{const K=m.trim();if(!K){ae("Enter your AT Protocol handle");return}ae(""),de(!0);try{localStorage.setItem(rl,K),localStorage.setItem(gn,b),localStorage.setItem(Ko,$);try{localStorage.removeItem("freeq-oauth-result")}catch{}const ne=`${`${$}/auth/login?handle=${encodeURIComponent(K)}`}&return_to=${encodeURIComponent(window.location.origin)}`;if(!(await fetch(`${$}/health`,{signal:AbortSignal.timeout(5e3)}).catch(()=>null))?.ok){ae("Authentication service unavailable. Try again later or connect as guest."),de(!1);return}localStorage.setItem("freeq-oauth-pending","1"),window.location.href=ne;return}catch(ie){ae(`OAuth error: ${ie}`),de(!1)}},[m,X,b,p,ue]),ze=()=>{if(!y.trim()){ae("Enter a nickname");return}ae(""),localStorage.setItem(gn,b),xs(X,y.trim(),ue)},R=o==="connecting"||o==="connected",G=L||r;return i?null:F||Z?l.jsx("div",{className:"flex-1 flex items-center justify-center bg-bg",children:l.jsxs("div",{className:"text-center",children:[l.jsx("img",{src:"/freeq.png",alt:"freeq",className:"w-16 h-16 mx-auto mb-4 animate-pulse"}),l.jsxs("h1",{className:"text-2xl font-bold mb-2",children:[l.jsx("span",{className:"text-accent",children:"free"}),l.jsx("span",{className:"text-fg",children:"q"})]}),l.jsx("p",{className:"text-fg-dim text-sm",children:Z?"Waiting for Bluesky authorization...":"Connecting to identity provider..."}),l.jsxs("div",{className:"mt-3 space-y-1.5 text-left max-w-[200px] mx-auto",children:[l.jsx(Bo,{done:!0,label:"Resolving identity"}),l.jsx(Bo,{done:!Z,active:Z,label:Z?"Authorize in popup":"Verifying credentials"}),l.jsx(Bo,{active:!Z,label:"Establishing session"})]}),r&&l.jsx("p",{className:"text-danger text-xs mt-3",children:r})]})}):l.jsxs("div",{className:"flex-1 flex items-center justify-center bg-bg relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-accent/[0.03] rounded-full blur-[100px]"}),l.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple/[0.03] rounded-full blur-[100px]"})]}),l.jsxs("div",{className:"bg-bg-secondary border border-border rounded-2xl p-8 w-[420px] max-w-[92vw] shadow-2xl relative animate-fadeIn",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("img",{src:"/freeq.png",alt:"freeq",className:"w-16 h-16 mx-auto mb-2"}),l.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:[l.jsx("span",{className:"text-accent",children:"free"}),l.jsx("span",{className:"text-fg",children:"q"})]}),l.jsx("p",{className:"text-fg-dim text-xs mt-1 leading-relaxed max-w-[300px] mx-auto",children:"Chat where your identity is yours. Messages are cryptographically signed. No platform lock-in. E2EE DMs."}),l.jsxs("div",{className:"flex justify-center gap-4 mt-2.5 text-[10px] text-fg-dim",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-success",children:""})," Signed messages"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-success",children:""})," E2EE DMs"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-accent",children:""})," Bluesky identity"]})]})]}),l.jsxs("div",{className:"flex gap-1 bg-bg rounded-lg p-1 mb-4",children:[l.jsx("button",{onClick:()=>f("at-proto"),className:`flex-1 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="at-proto"?"bg-accent/10 text-accent":"text-fg-dim hover:text-fg-muted"}`,children:"AT Protocol"}),l.jsx("button",{onClick:()=>f("guest"),className:`flex-1 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="guest"?"bg-bg-tertiary text-fg-muted":"text-fg-dim hover:text-fg-muted"}`,children:"Guest"})]}),l.jsxs("div",{className:"space-y-3",children:[u==="at-proto"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs uppercase tracking-wider text-fg-dim font-bold mb-2",children:"AT Protocol Handle"}),l.jsx("input",{ref:Ce,value:m,onChange:K=>h(K.target.value),placeholder:"you.bsky.social",onKeyDown:K=>K.key==="Enter"&&ye(),className:"w-full bg-bg border border-border rounded-lg px-4 py-3 text-base text-fg outline-none focus:border-accent transition-colors placeholder:text-fg-dim"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs uppercase tracking-wider text-fg-dim font-bold mb-2",children:"Nickname"}),l.jsx("input",{value:p,onChange:K=>j(K.target.value),placeholder:"derived from handle",onKeyDown:K=>K.key==="Enter"&&ye(),className:"w-full bg-bg border border-border rounded-lg px-4 py-3 text-base text-fg outline-none focus:border-accent transition-colors placeholder:text-fg-dim"}),l.jsx("p",{className:"text-xs text-fg-dim mt-1.5",children:"Your IRC nick. Defaults to your handle  edit if you prefer something different."})]})]}):l.jsx(l.Fragment,{children:l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs uppercase tracking-wider text-fg-dim font-bold mb-2",children:"Nickname"}),l.jsx("input",{ref:pe,value:y,onChange:K=>x(K.target.value),placeholder:"your_nick",onKeyDown:K=>K.key==="Enter"&&ze(),className:"w-full bg-bg border border-border rounded-lg px-4 py-3 text-base text-fg outline-none focus:border-accent transition-colors placeholder:text-fg-dim"})]})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs uppercase tracking-wider text-fg-dim font-bold mb-2",children:"Auto-join channels"}),l.jsx("input",{value:b,onChange:K=>N(K.target.value),placeholder:"#freeq",onKeyDown:K=>K.key==="Enter"&&(u==="at-proto"?ye():ze()),className:"w-full bg-bg border border-border rounded-lg px-4 py-3 text-base text-fg outline-none focus:border-accent transition-colors placeholder:text-fg-dim"})]}),J&&l.jsxs("div",{className:"animate-fadeIn space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs uppercase tracking-wider text-fg-dim font-bold mb-2",children:"WebSocket URL"}),l.jsx("input",{value:X,onChange:K=>z(K.target.value),className:"w-full bg-bg border border-border rounded-lg px-4 py-3 text-base text-fg outline-none focus:border-accent transition-colors font-mono text-xs placeholder:text-fg-dim"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs uppercase tracking-wider text-fg-dim font-bold mb-2",children:"Server HTTP Origin"}),l.jsx("input",{value:I,onChange:K=>te(K.target.value),className:"w-full bg-bg border border-border rounded-lg px-4 py-3 text-base text-fg outline-none focus:border-accent transition-colors font-mono text-xs placeholder:text-fg-dim"}),l.jsx("p",{className:"text-xs text-fg-dim mt-1.5",children:"HTTP origin of the freeq server (for OAuth). Must match --web-addr."})]})]}),!J&&l.jsx("button",{onClick:()=>V(!0),className:"text-[11px] text-fg-dim hover:text-fg-muted",children:"Advanced settings "}),l.jsx("button",{onClick:u==="at-proto"?ye:ze,disabled:R||Z,className:"w-full bg-accent text-black font-bold py-3 rounded-xl text-lg transition-all hover:bg-accent-hover hover:shadow-[0_0_24px_rgba(0,212,170,0.15)] disabled:opacity-50 disabled:hover:shadow-none mt-1",children:Z?l.jsxs("span",{className:"flex items-center justify-center gap-2",children:[l.jsxs("svg",{className:"animate-spin w-4 h-4",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Waiting for authorization..."]}):R?l.jsxs("span",{className:"flex items-center justify-center gap-2",children:[l.jsxs("svg",{className:"animate-spin w-4 h-4",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Connecting..."]}):u==="at-proto"?"Sign in with AT Protocol":"Connect as Guest"})]}),G&&l.jsxs("div",{className:"mt-3 bg-danger/10 border border-danger/20 rounded-lg px-3 py-2.5 text-xs animate-fadeIn",children:[l.jsx("div",{className:"font-semibold text-danger mb-0.5",children:G.includes("SASL")||G.includes("auth")||G.includes("Auth")?" Authentication Error":G.includes("unavailable")||G.includes("timeout")||G.includes("502")?" Connection Error":" Error"}),l.jsx("div",{className:"text-danger/80",children:dy(G)})]}),l.jsxs("div",{className:"text-center mt-5 flex items-center justify-center gap-3 text-[10px]",children:[l.jsx("a",{href:"https://freeq.at",target:"_blank",className:"text-fg-dim hover:text-fg-muted",children:"freeq.at"}),l.jsx("span",{className:"text-border",children:""}),l.jsx("a",{href:"https://github.com/chad/freeq",target:"_blank",className:"text-fg-dim hover:text-fg-muted",children:"GitHub"}),l.jsx("span",{className:"text-border",children:""}),l.jsx("a",{href:"https://www.freeq.at/docs/",target:"_blank",rel:"noopener noreferrer",className:"text-fg-dim hover:text-fg-muted",children:"Docs"})]}),l.jsx(gy,{})]})]})}function gy(){const[i,o]=C.useState(null);return C.useEffect(()=>{fetch("/api/v1/health").then(r=>r.ok?r.json():null).then(r=>r&&o(r)).catch(()=>{})},[]),!i||i.connections===0?null:l.jsx("div",{className:"text-center mt-3 animate-fadeIn",children:l.jsxs("div",{className:"inline-flex items-center gap-2 bg-bg/60 rounded-full px-3 py-1.5 border border-border/50",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-success animate-pulse"}),l.jsxs("span",{className:"text-[11px] text-fg-dim",children:[l.jsx("span",{className:"text-fg-muted font-medium",children:i.connections})," online  ",l.jsx("span",{className:"text-fg-muted font-medium",children:i.channels})," channels"]})]})})}function xy({onOpenSettings:i}){const o=T(L=>L.channels),r=T(L=>L.activeChannel),u=T(L=>L.setActiveChannel),f=T(L=>L.serverMessages),m=T(L=>L.connectionState),h=T(L=>L.nick),y=T(L=>L.authDid),[x,p]=C.useState(""),[j,b]=C.useState(!1),N=T(L=>L.favorites);T(L=>L.mutedChannels);const _=[...o.values()].filter(L=>L.isJoined),X=_.filter(L=>L.name.startsWith("#")||L.name.startsWith("&")).sort((L,ae)=>L.name.localeCompare(ae.name)),z=X.filter(L=>N.has(L.name.toLowerCase())),I=X.filter(L=>!N.has(L.name.toLowerCase())),te=_.filter(L=>!L.name.startsWith("#")&&!L.name.startsWith("&")&&L.name!=="server").sort((L,ae)=>L.name.localeCompare(ae.name)),$=()=>{const L=x.trim();L&&(Za(L.startsWith("#")?L:`#${L}`),p(""),b(!1))};return l.jsxs("aside",{"data-testid":"sidebar",role:"navigation","aria-label":"Channels and direct messages",className:"w-64 bg-bg-secondary flex flex-col shrink-0 overflow-hidden",children:[l.jsxs("div",{className:"h-14 flex items-center px-4 border-b border-border shrink-0 gap-2.5",children:[l.jsx("img",{src:"/freeq.png",alt:"",className:"w-7 h-7"}),l.jsx("span",{className:"text-accent font-bold text-xl tracking-tight",children:"freeq"}),l.jsx("span",{className:`ml-auto w-2 h-2 rounded-full ${m==="connected"?"bg-success":m==="connecting"?"bg-warning animate-pulse":"bg-danger"}`})]}),l.jsxs("nav",{className:"flex-1 overflow-y-auto py-2 px-2",children:[l.jsxs("button",{onClick:()=>u("server"),className:`w-full text-left px-3 py-2 rounded-lg text-[15px] flex items-center gap-2.5 mb-1 ${r==="server"?"bg-surface text-fg":"text-fg-dim hover:text-fg-muted hover:bg-bg-tertiary"}`,children:[l.jsx("svg",{className:"w-4 h-4 shrink-0 opacity-60",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M1.5 3A1.5 1.5 0 013 1.5h10A1.5 1.5 0 0114.5 3v2A1.5 1.5 0 0113 6.5H3A1.5 1.5 0 011.5 5V3zm1 .5v1.5h11V3.5h-11zM1.5 9A1.5 1.5 0 013 7.5h10A1.5 1.5 0 0114.5 9v2a1.5 1.5 0 01-1.5 1.5H3A1.5 1.5 0 011.5 11V9zm1 .5v1.5h11V9.5h-11z"})}),l.jsx("span",{children:"Server"}),f.length>0&&r!=="server"&&l.jsx("span",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-fg-dim"})]}),l.jsxs("div",{className:"mt-3 mb-1 px-2 flex items-center justify-between",children:[l.jsx("span",{className:"text-xs uppercase tracking-wider text-fg-dim font-bold",children:"Channels"}),l.jsxs("div",{className:"flex items-center gap-0.5",children:[l.jsx("button",{onClick:()=>T.getState().setChannelListOpen(!0),className:"text-fg-dim hover:text-accent text-lg leading-none px-1 transition-colors",title:"Browse channels",children:"+"}),l.jsx("button",{onClick:()=>b(!j),className:"text-fg-dim hover:text-fg-muted text-lg leading-none px-1",title:"Join channel",children:"+"})]})]}),j&&l.jsx("div",{className:"px-1 mb-2 animate-fadeIn",children:l.jsx("input",{value:x,onChange:L=>p(L.target.value),onKeyDown:L=>L.key==="Enter"&&$(),placeholder:"#channel",autoFocus:!0,className:"w-full bg-bg-tertiary border border-border rounded px-2 py-1 text-sm text-fg outline-none focus:border-accent placeholder:text-fg-dim"})}),z.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mt-3 mb-1 px-2",children:l.jsxs("span",{className:"text-xs uppercase tracking-wider text-fg-dim font-bold flex items-center gap-1",children:[l.jsx("span",{className:"text-warning text-[10px]",children:""})," Favorites"]})}),z.map(L=>l.jsx(Go,{ch:L,isActive:r.toLowerCase()===L.name.toLowerCase(),onSelect:u,icon:"#"},L.name))]}),I.map(L=>l.jsx(Go,{ch:L,isActive:r.toLowerCase()===L.name.toLowerCase(),onSelect:u,icon:"#"},L.name)),te.length>0&&(()=>{const L=te.reduce((ae,J)=>ae+J.unreadCount,0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mt-3 mb-1 px-2 flex items-center justify-between",children:[l.jsx("span",{className:"text-xs uppercase tracking-wider text-fg-dim font-bold",children:"Messages"}),L>0&&l.jsx("span",{className:"bg-danger text-white text-[10px] min-w-[16px] text-center px-1 py-0.5 rounded-full font-bold leading-none",children:L})]}),te.map(ae=>l.jsx(Go,{ch:ae,isActive:r.toLowerCase()===ae.name.toLowerCase(),onSelect:u,icon:"@",showPreview:!0},ae.name))]})})()]}),l.jsx("div",{className:"border-t border-border px-3 py-3 shrink-0",children:l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx(py,{nick:h,did:y}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsxs("div",{className:"text-[15px] font-semibold truncate flex items-center gap-1",children:[h,y&&l.jsx("span",{className:"text-accent text-xs",title:"Verified AT Protocol identity",children:""})]}),y&&(()=>{const L=localStorage.getItem("freeq-handle");return L?l.jsxs("div",{className:"text-[11px] text-fg-dim truncate flex items-center gap-1",title:y,children:[l.jsx("span",{className:"text-accent",children:""})," ",L]}):l.jsxs("div",{className:"text-[11px] text-fg-dim truncate",title:y,children:[y.slice(0,24),""]})})(),!y&&l.jsx("div",{className:"text-[11px] text-fg-dim",children:"Guest"})]}),l.jsx("button",{onClick:()=>T.getState().setBookmarksPanelOpen(!0),className:"text-fg-dim hover:text-fg-muted p-1",title:"Bookmarks (B)",children:l.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M2 2a2 2 0 012-2h8a2 2 0 012 2v13.5a.5.5 0 01-.777.416L8 13.101l-5.223 2.815A.5.5 0 012 15.5V2zm2-1a1 1 0 00-1 1v12.566l4.723-2.482a.5.5 0 01.554 0L13 14.566V2a1 1 0 00-1-1H4z"})})}),l.jsx("button",{onClick:i,className:"text-fg-dim hover:text-fg-muted p-1",title:"Settings",children:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("path",{d:"M8 4.754a3.246 3.246 0 100 6.492 3.246 3.246 0 000-6.492zM5.754 8a2.246 2.246 0 114.492 0 2.246 2.246 0 01-4.492 0z"}),l.jsx("path",{d:"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 01-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 01-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 01.52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 011.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 011.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 01.52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 01-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 01-1.255-.52l-.094-.319z"})]})}),l.jsx("button",{onClick:xl,className:"text-fg-dim hover:text-danger p-1",title:"Disconnect",children:l.jsxs("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("path",{d:"M10 12.5a.5.5 0 01-.5.5h-8a.5.5 0 01-.5-.5v-9a.5.5 0 01.5-.5h8a.5.5 0 01.5.5v2a.5.5 0 001 0v-2A1.5 1.5 0 009.5 2h-8A1.5 1.5 0 000 3.5v9A1.5 1.5 0 001.5 14h8a1.5 1.5 0 001.5-1.5v-2a.5.5 0 00-1 0v2z"}),l.jsx("path",{fillRule:"evenodd",d:"M15.854 8.354a.5.5 0 000-.708l-3-3a.5.5 0 00-.708.708L14.293 7.5H5.5a.5.5 0 000 1h8.793l-2.147 2.146a.5.5 0 00.708.708l3-3z"})]})})]})})]})}function py({nick:i,did:o}){const[r,u]=C.useState(()=>o&&uu(o)?.avatar||null);return C.useEffect(()=>{o&&!r&&ws(o).then(f=>f?.avatar&&u(f.avatar))},[o]),r?l.jsx("img",{src:r,alt:"",className:"w-9 h-9 rounded-full object-cover shrink-0"}):l.jsx("div",{className:"w-9 h-9 rounded-full bg-surface flex items-center justify-center text-accent font-bold text-[15px] shrink-0",children:(i||"?")[0].toUpperCase()})}function Go({ch:i,isActive:o,onSelect:r,icon:u,showPreview:f}){const[m,h]=C.useState(null),y=T(X=>X.favorites.has(i.name.toLowerCase())),x=T(X=>X.mutedChannels.has(i.name.toLowerCase())),p=i.mentionCount>0,j=i.unreadCount>0,b=f?i.messages.filter(X=>!X.isSystem).slice(-1)[0]:null,N=b?`${b.from}: ${b.text}`:null,_=b?vy(new Date(b.timestamp)):null;return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>r(i.name),onContextMenu:X=>{X.preventDefault(),h({x:X.clientX,y:X.clientY})},className:`w-full text-left px-3 py-2 rounded-lg flex items-center gap-2.5 ${x?"opacity-40 ":""}${o?"bg-surface text-fg":p?"text-fg font-semibold hover:bg-bg-tertiary":j?"text-fg-muted hover:bg-bg-tertiary":"text-fg-dim hover:text-fg-muted hover:bg-bg-tertiary"}`,children:[f?l.jsxs("div",{className:"relative shrink-0",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-surface flex items-center justify-center text-accent font-bold text-sm",children:(i.name[0]||"?").toUpperCase()}),l.jsx(by,{nick:i.name})]}):l.jsx("span",{className:`shrink-0 text-[15px] font-medium ${o?"text-accent":"opacity-50"}`,children:u}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"truncate text-[15px]",children:i.name.replace(/^[#&]/,"")}),(i.isEncrypted||!i.name.startsWith("#")&&i.members.values().next().value?.did)&&l.jsx("span",{className:"text-[10px] text-success shrink-0",title:"End-to-end encrypted",children:""}),!f&&i.members.size>0&&l.jsx("span",{className:"text-[10px] text-fg-dim ml-auto shrink-0",children:i.members.size}),f&&_&&l.jsx("span",{className:"text-[10px] text-fg-dim ml-auto shrink-0",children:_})]}),f&&N&&l.jsx("div",{className:"text-xs text-fg-dim truncate mt-0.5",children:N.slice(0,50)})]}),p&&l.jsx("span",{className:"shrink-0 bg-danger text-white text-xs min-w-[20px] text-center px-1.5 py-0.5 rounded-full font-bold",children:i.mentionCount}),!p&&j&&l.jsx("span",{className:"shrink-0 w-1.5 h-1.5 rounded-full bg-fg-muted"})]}),m&&l.jsx(yy,{channel:i.name,isFav:y,isMuted:x,isChannel:i.name.startsWith("#"),position:m,onClose:()=>h(null)})]})}function yy({channel:i,isFav:o,isMuted:r,isChannel:u,position:f,onClose:m}){const h=C.useRef(null);return C.useEffect(()=>{const y=x=>{h.current&&!h.current.contains(x.target)&&m()};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[m]),l.jsxs("div",{ref:h,className:"fixed z-50 bg-bg-secondary border border-border rounded-xl shadow-2xl py-1.5 min-w-[160px] animate-fadeIn",style:{left:Math.min(f.x,window.innerWidth-180),top:Math.min(f.y,window.innerHeight-200)},children:[u&&l.jsxs("button",{onClick:()=>{T.getState().toggleFavorite(i),m()},className:"w-full text-left px-3 py-1.5 text-sm flex items-center gap-2 hover:bg-bg-tertiary text-fg-muted hover:text-fg",children:[l.jsx("span",{className:"w-5 text-center",children:o?"":""}),o?"Remove from Favorites":"Add to Favorites"]}),l.jsxs("button",{onClick:()=>{T.getState().toggleMuted(i),m()},className:"w-full text-left px-3 py-1.5 text-sm flex items-center gap-2 hover:bg-bg-tertiary text-fg-muted hover:text-fg",children:[l.jsx("span",{className:"w-5 text-center",children:r?"":""}),r?"Unmute":"Mute notifications"]}),l.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(`https://irc.freeq.at/join/${encodeURIComponent(i)}`),gl(()=>Promise.resolve().then(()=>bu),void 0).then(y=>y.showToast("Invite link copied","success",2e3)),m()},className:"w-full text-left px-3 py-1.5 text-sm flex items-center gap-2 hover:bg-bg-tertiary text-fg-muted hover:text-fg",children:[l.jsx("span",{className:"w-5 text-center",children:""}),"Copy invite link"]}),l.jsx("div",{className:"h-px bg-border mx-2 my-1"}),u&&l.jsxs("button",{onClick:()=>{hu(i),m()},className:"w-full text-left px-3 py-1.5 text-sm flex items-center gap-2 hover:bg-danger/10 text-danger",children:[l.jsx("span",{className:"w-5 text-center",children:""}),"Leave channel"]})]})}function by({nick:i}){const o=T(r=>r.channels);for(const[,r]of o){const u=r.members.get(i.toLowerCase());if(u){const f=u.away!=null;return l.jsx("span",{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-bg-secondary ${f?"bg-warning":"bg-success"}`})}}return null}function vy(i){const r=new Date().getTime()-i.getTime();return r<6e4?"now":r<36e5?`${Math.floor(r/6e4)}m`:r<864e5?i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):r<6048e5?i.toLocaleDateString([],{weekday:"short"}):i.toLocaleDateString([],{month:"short",day:"numeric"})}function jy({onToggleSidebar:i,onToggleMembers:o,membersOpen:r}){const u=T($=>$.activeChannel),f=T($=>$.channels),m=T($=>$.connectionState),[h,y]=C.useState(!1),[x,p]=C.useState(""),j=f.get(u.toLowerCase()),b=j?.topic||"",N=j?.members.size||0,_=u!=="server"&&u.startsWith("#"),X=u!=="server"&&!u.startsWith("#"),z=T($=>$.setChannelSettingsOpen),I=()=>{p(b),y(!0)},te=()=>{j&&gu(j.name,x),y(!1)};return l.jsxs(l.Fragment,{children:[l.jsxs("header",{className:"h-14 bg-bg-secondary border-b border-border flex items-center gap-3 px-4 shrink-0",children:[l.jsx("button",{onClick:i,className:"md:hidden text-fg-dim hover:text-fg-muted p-1 -ml-1 mr-1",children:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M2.5 12a.5.5 0 01.5-.5h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4a.5.5 0 01.5-.5h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4a.5.5 0 01.5-.5h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5z"})})}),m!=="connected"&&l.jsx("span",{className:`shrink-0 w-2 h-2 rounded-full ${m==="connecting"?"bg-warning animate-pulse":"bg-danger"}`,title:m==="connecting"?"Connecting":"Disconnected"}),l.jsxs("div",{className:"flex items-center gap-2 min-w-0 shrink",children:[_&&l.jsx("span",{className:"text-accent text-base font-bold shrink-0",children:"#"}),X&&l.jsx("span",{className:"text-fg-dim text-base shrink-0",children:""}),l.jsx("span",{className:"font-bold text-base text-fg truncate",children:_?(j?.name||u).replace(/^#/,""):X?u:"Server"}),j?.isEncrypted&&l.jsx("span",{className:"text-success text-xs shrink-0",title:"End-to-end encrypted channel",children:""}),X&&!j?.isEncrypted&&(j?.members.values().next().value?.did?l.jsx("span",{className:"text-success text-xs shrink-0",title:"End-to-end encrypted DM",children:""}):null)]}),_&&j&&(()=>{const $=[...j.members.values()].filter(L=>L.did).length;return $>0?l.jsxs("span",{className:"text-xs text-success/80 shrink-0 flex items-center gap-1",title:`${$} AT Protocol verified`,children:[l.jsx("svg",{className:"w-3 h-3",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M8 0a8 8 0 100 16A8 8 0 008 0zm3.78 5.97l-4.5 5a.75.75 0 01-1.06.02l-2-1.86a.75.75 0 011.02-1.1l1.45 1.35 3.98-4.43a.75.75 0 011.11 1.02z"})}),$]}):null})(),_&&l.jsx("div",{className:"w-px h-5 bg-border"}),l.jsx("div",{className:"flex-1 min-w-0 hidden sm:block",children:_?h?l.jsx("input",{value:x,onChange:$=>p($.target.value),onKeyDown:$=>{$.key==="Enter"&&te(),$.key==="Escape"&&y(!1)},onBlur:()=>y(!1),autoFocus:!0,className:"w-full bg-transparent text-sm text-fg outline-none",placeholder:"Set a topic..."}):l.jsx("button",{onClick:I,className:"text-sm text-fg-dim hover:text-fg-muted truncate block w-full text-left",title:b||"Click to set topic",children:b||"Set a topic"}):l.jsx("span",{className:"flex-1"})}),_&&l.jsx("button",{onClick:()=>z(j?.name||u),className:"text-fg-dim hover:text-fg-muted p-1.5 rounded-lg hover:bg-bg-tertiary transition-colors",title:"Channel settings",children:l.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),_&&l.jsxs("button",{onClick:o,className:`flex items-center gap-1.5 text-sm shrink-0 px-2.5 py-1.5 rounded-lg hover:bg-bg-tertiary transition-colors ${r?"text-fg-muted":"text-fg-dim"}`,title:r?"Hide members":"Show members",children:[l.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M8 8a3 3 0 100-6 3 3 0 000 6zM2 14s-1 0-1-1 1-4 7-4 7 3 7 4-1 1-1 1H2z"})}),N>0&&l.jsx("span",{children:N})]})]}),_&&b&&l.jsx("div",{className:"sm:hidden px-4 py-1.5 bg-bg-secondary border-b border-border",children:l.jsx("p",{className:"text-xs text-fg-dim truncate",children:b})})]})}const Sg=[["","grin","happy","smile"],["","smile","happy"],["","laugh","happy"],["","grin","teeth"],["","laugh","cry","lol","tears"],["","rofl","lol","laugh"],["","grateful","touched","cry"],["","blush","happy","smile"],["","angel","innocent","halo"],["","love","hearts","adore"],["","heart eyes","love"],["","star","excited","starstruck"],["","kiss","love"],["","wink","tongue","playful"],["","crazy","zany","wild"],["","cool","sunglasses"],["","nerd","glasses"],["","party","celebrate","birthday"],["","angry","huff","mad"],["","angry","rage","mad"],["","pleading","puppy","please"],["","cry","sob","sad"],["","scream","shocked","horror"],["","anxious","nervous","sweat"],["","think","hmm"],["","shush","secret","quiet"],["","oops","giggle"],["","peek","shy"],["","sleep","zzz","tired"],["","vomit","sick","gross"],["","mind blown","explode"],["","skull","dead","rip"],["","ghost","boo","spooky"],["","robot","bot"],["","alien","ufo"],["","poop","shit"],["","clown"],["","devil","evil"],["","melt","dissolve"],["","upside down","sarcasm"],["","meh","skeptical"],["","grimace","awkward","yikes"],["","eye roll","whatever"],["","smirk"],["","thumbs up","yes","good","ok","+1"],["","thumbs down","no","bad","-1"],["","wave","hello","hi","bye"],["","handshake","deal","agree"],["","raise","hooray","celebrate"],["","clap","bravo","applause"],["","strong","flex","muscle","bicep"],["","salute"],["","heart hands","love"],["","peace","victory"],["","crossed fingers","luck","hope"],["","call","shaka","hang loose"],["","hand","high five"],["","point up"],["","point","you"],["","up"],["","down"],["","left"],["","right"],["","pinch","italian","chef kiss"],["","tiny","small","pinch"],["","middle finger","fuck"],["","fist","power"],["","punch","fist bump"],["","rock","metal","horns"],["","heart","love","red"],["","orange heart"],["","yellow heart"],["","green heart"],["","blue heart"],["","purple heart"],["","black heart"],["","white heart"],["","broken heart","sad"],["","fire heart","passion"],["","two hearts"],["","revolving hearts"],["","growing heart"],["","sparkling heart"],["","fire","hot","lit"],["","star"],["","sparkle","magic","clean"],["","dizzy","star"],["","party","celebrate","tada"],["","confetti","celebrate"],["","trophy","winner","champion"],["","target","bullseye","goal"],["","idea","lightbulb","tip"],["","lock","secure","private"],["","key"],["","gem","diamond"],["","lightning","zap","fast","electric"],["","speech","chat","message"],["","eyes","look","see","watching"],["","brain","smart","think"],["","bubbles"],["","magic","wand"],["","paperclip","clippy"],["","link","url"],["","pin"],["","memo","note","write"],["","laptop","computer","code"],["","keyboard","type"],["","desktop","monitor"],["","phone","mobile"],["","game","controller","play"],["","music","note"],["","music","notes"],["","guitar","rock"],["","mic","karaoke","sing"],["","camera","photo"],["","movie","film","action"],["","books","read","study"],["","coffee","cafe"],["","beer","drink","cheers"],["","pizza","food"],["","taco","food","mexican"],["","noodle","ramen","soup"],["","sushi"],["","rocket","launch","ship","deploy"],["","plane","travel","fly"],["","house","home"],["","earth","world","globe"],["","moon","night"],["","sun","sunny","bright"],["","rainbow"],["","cat","meow"],["","dog","woof"],["","check","yes","done","correct"],["","x","no","wrong","cross"],["","warning","caution","alert"],["","question"],["","exclamation","important"],["","hundred","perfect","score"],["","recycle","green"],["","red circle"],["","green circle"],["","blue circle"],["","red square"],["","orange square"],["","yellow square"],["","green square"],["","blue square"],["","purple square"],["","black square"],["","white square"],["","plus","add"],["","minus","subtract"],["","multiply"],["","divide"],["","zzz","sleep"],["","no","prohibited","ban"],["","stop","no entry"],["","white flag"],["","black flag"],["","checkered flag","finish","race"],["","red flag","warning"],["","rainbow flag","pride","lgbtq"],["","trans flag","transgender"]],Sy=Sg.map(([i,...o])=>({emoji:i,keywords:o.join(" ").toLowerCase()})),wy=[{name:"Smileys",range:[0,38]},{name:"Gestures",range:[38,60]},{name:"Hearts",range:[60,74]},{name:"Objects",range:[74,119]},{name:"Symbols",range:[119,139]},{name:"Flags",range:[139,145]}],wg="freeq-emoji-frequent";function Ng(){try{return JSON.parse(localStorage.getItem(wg)||"[]").slice(0,24)}catch{return[]}}function Ny(i){try{const o=Ng().filter(r=>r!==i);o.unshift(i),localStorage.setItem(wg,JSON.stringify(o.slice(0,24)))}catch{}}function yu({onSelect:i,onClose:o,position:r}){const[u,f]=C.useState(""),m=C.useRef(null),h=C.useRef(null);C.useEffect(()=>{h.current?.focus();const b=N=>{m.current&&!m.current.contains(N.target)&&o()};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[o]);const y=C.useMemo(()=>Ng(),[]),x=C.useMemo(()=>{if(!u.trim())return null;const b=u.toLowerCase().trim();return Sy.filter(N=>N.keywords.includes(b)).map(N=>N.emoji)},[u]),p=b=>{Ny(b),i(b),o()},j=r?{position:"fixed",left:r.x,bottom:window.innerHeight-r.y,zIndex:100}:{};return l.jsxs("div",{ref:m,style:j,className:"bg-bg-secondary border border-border rounded-xl shadow-2xl w-80 animate-fadeIn overflow-hidden",children:[l.jsx("div",{className:"p-2 border-b border-border",children:l.jsx("input",{ref:h,value:u,onChange:b=>f(b.target.value),placeholder:"Search emoji...",className:"w-full bg-bg-tertiary rounded px-2 py-1.5 text-xs text-fg outline-none placeholder:text-fg-dim"})}),l.jsx("div",{className:"max-h-[280px] overflow-y-auto p-1",children:x!==null?l.jsxs("div",{children:[l.jsxs("div",{className:"text-[10px] uppercase tracking-wider text-fg-dim px-1.5 py-1 font-semibold",children:["Results ",x.length>0&&`(${x.length})`]}),x.length===0?l.jsx("div",{className:"text-xs text-fg-dim px-2 py-4 text-center",children:"No emoji found"}):l.jsx("div",{className:"flex flex-wrap",children:x.map(b=>l.jsx("button",{onClick:()=>p(b),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-bg-tertiary rounded transition-colors",children:b},b))})]}):l.jsxs(l.Fragment,{children:[y.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase tracking-wider text-fg-dim px-1.5 py-1 font-semibold",children:"Frequently Used"}),l.jsx("div",{className:"flex flex-wrap",children:y.map((b,N)=>l.jsx("button",{onClick:()=>p(b),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-bg-tertiary rounded transition-colors",children:b},`freq-${N}`))})]}),wy.map(b=>l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase tracking-wider text-fg-dim px-1.5 py-1 font-semibold",children:b.name}),l.jsx("div",{className:"flex flex-wrap",children:Sg.slice(b.range[0],b.range[1]).map(([N])=>l.jsx("button",{onClick:()=>p(N),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-bg-tertiary rounded transition-colors",children:N},N))})]},b.name))]})})]})}function Cg({nick:i,did:o,position:r,onClose:u}){const[f,m]=C.useState(null),[h,y]=C.useState(!1),x=T(L=>L.setActiveChannel),p=T(L=>L.addChannel),j=T(L=>L.whoisCache.get(i.toLowerCase())),[b,N]=C.useState(null);C.useEffect(()=>{xu(i)},[i]);const _=o||j?.did;C.useEffect(()=>{_&&ag(_)&&ng(_).then(N)},[_]),C.useEffect(()=>{_&&!f&&(y(!0),ws(_).then(L=>{m(L),y(!1)}))},[_]);const X=()=>{p(i),x(i),u()},z={position:"fixed",left:Math.min(r.x,window.innerWidth-300),top:Math.min(r.y,window.innerHeight-400),zIndex:100},I=f?.displayName||j?.realname||i,te=f?.handle||j?.handle,$=f?.avatar;return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:u}),l.jsxs("div",{style:z,className:"z-50 bg-bg-secondary border border-border rounded-xl shadow-2xl w-72 animate-fadeIn overflow-hidden",children:[l.jsx("div",{className:"h-16 bg-gradient-to-r from-accent/20 to-purple/20 relative",children:$?l.jsx("img",{src:$,alt:"",className:"absolute -bottom-6 left-4 w-14 h-14 rounded-full border-4 border-bg-secondary object-cover"}):l.jsx("div",{className:"absolute -bottom-6 left-4 w-14 h-14 rounded-full border-4 border-bg-secondary bg-surface flex items-center justify-center text-accent font-bold text-lg",children:i[0]?.toUpperCase()})}),l.jsxs("div",{className:"pt-8 px-4 pb-4",children:[l.jsx("div",{className:"font-semibold text-fg",children:I}),I!==i&&l.jsx("div",{className:"text-sm text-fg-muted",children:i}),te&&l.jsxs("div",{className:"text-xs text-accent mt-1 flex items-center gap-1",children:[l.jsxs("span",{children:["@",te]}),l.jsx("span",{className:"text-success text-[10px]",title:"AT Protocol identity",children:""})]}),_&&l.jsx("div",{className:"text-[10px] text-fg-dim mt-1 font-mono break-all cursor-pointer hover:text-fg-muted",onClick:()=>{navigator.clipboard.writeText(_),gl(()=>Promise.resolve().then(()=>bu),void 0).then(L=>L.showToast("DID copied","success",2e3))},title:"Click to copy DID",children:_}),b&&l.jsxs("div",{className:"mt-2 p-2 bg-success/5 border border-success/20 rounded-lg",children:[l.jsx("div",{className:"text-[10px] text-success font-semibold mb-1 flex items-center gap-1",children:" Encrypted DM  Safety Number"}),l.jsx("div",{className:"text-[10px] font-mono text-fg-dim leading-relaxed tracking-wider",children:b}),l.jsx("div",{className:"text-[9px] text-fg-dim mt-1",children:"Compare with your contact to verify encryption"})]}),f?.description&&l.jsx("div",{className:"text-xs text-fg-muted mt-2 leading-relaxed line-clamp-3",children:f.description}),j&&l.jsxs("div",{className:"mt-2 space-y-0.5",children:[j.user&&j.host&&l.jsxs("div",{className:"text-[11px] text-fg-dim font-mono",children:[j.user,"@",j.host]}),j.channels&&l.jsxs("div",{className:"text-[11px] text-fg-dim",children:[l.jsx("span",{className:"text-fg-dim",children:"Channels:"})," ",j.channels]}),j.server&&l.jsxs("div",{className:"text-[11px] text-fg-dim",children:[l.jsx("span",{className:"text-fg-dim",children:"Server:"})," ",j.server]})]}),h&&!f&&!j&&l.jsxs("div",{className:"text-xs text-fg-dim mt-2 flex items-center gap-1",children:[l.jsxs("svg",{className:"animate-spin w-3 h-3",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Loading..."]}),!_&&!h&&j&&l.jsx("div",{className:"text-[10px] text-fg-dim mt-2 bg-bg-tertiary rounded px-2 py-1",children:"Guest  no AT Protocol identity"}),l.jsxs("div",{className:"flex gap-2 mt-3",children:[l.jsx("button",{onClick:X,className:"flex-1 bg-accent/10 hover:bg-accent/20 text-accent text-xs py-1.5 rounded-lg font-medium",children:"Message"}),te&&l.jsx("a",{href:`https://bsky.app/profile/${te}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-bg-tertiary hover:bg-surface text-fg-muted hover:text-fg text-xs py-1.5 rounded-lg text-center",children:"Bluesky "})]})]})]})]})}function Cy({handle:i,rkey:o}){const[r,u]=C.useState(null),[f,m]=C.useState(!1);if(C.useEffect(()=>{let y=!1;return(async()=>{try{const x=`at://${i}/app.bsky.feed.post/${o}`,p=await fetch(`https://public.api.bsky.app/xrpc/app.bsky.feed.getPostThread?uri=${encodeURIComponent(x)}&depth=0`);if(!p.ok)throw new Error("fetch failed");const b=(await p.json()).thread?.post;if(!b||y)return;const N=b.embed?.images?.map(_=>({thumb:_.thumb,alt:_.alt}))||b.embed?.media?.images?.map(_=>({thumb:_.thumb,alt:_.alt}))||[];u({text:b.record?.text||"",author:{handle:b.author?.handle||i,displayName:b.author?.displayName,avatar:b.author?.avatar},createdAt:b.record?.createdAt||"",likeCount:b.likeCount,repostCount:b.repostCount,images:N})}catch{y||m(!0)}})(),()=>{y=!0}},[i,o]),f||!r)return null;const h=r.createdAt?new Date(r.createdAt).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"";return l.jsxs("a",{href:`https://bsky.app/profile/${i}/post/${o}`,target:"_blank",rel:"noopener noreferrer",className:"mt-2 block max-w-sm rounded-xl border border-border bg-bg-tertiary hover:border-accent/30 transition-colors overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-2 px-3 pt-3 pb-1",children:[r.author.avatar?l.jsx("img",{src:r.author.avatar,alt:"",className:"w-5 h-5 rounded-full"}):l.jsx("div",{className:"w-5 h-5 rounded-full bg-surface flex items-center justify-center text-[10px] text-fg-dim",children:(r.author.handle[0]||"?").toUpperCase()}),l.jsx("span",{className:"text-xs font-semibold text-fg",children:r.author.displayName||r.author.handle}),l.jsxs("span",{className:"text-[10px] text-fg-dim",children:["@",r.author.handle]})]}),l.jsx("div",{className:"px-3 py-1 text-sm text-fg leading-relaxed line-clamp-4",children:r.text}),r.images&&r.images.length>0&&l.jsx("div",{className:"px-3 pb-2 flex gap-1",children:r.images.slice(0,4).map((y,x)=>l.jsx("img",{src:y.thumb,alt:y.alt||"",className:"rounded-lg max-h-40 object-cover flex-1 min-w-0"},x))}),l.jsxs("div",{className:"px-3 py-2 border-t border-border/50 flex items-center gap-3 text-[10px] text-fg-dim",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("svg",{className:"w-3 h-3",viewBox:"0 0 16 16",fill:"currentColor",opacity:"0.5",children:l.jsx("path",{d:"M8 14s-5-3.5-5-7.5S5.5 1 8 4c2.5-3 5-2 5 2.5S8 14 8 14z"})}),r.likeCount||0]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("svg",{className:"w-3 h-3",viewBox:"0 0 16 16",fill:"currentColor",opacity:"0.5",children:l.jsx("path",{d:"M2 5h3V2l5 5-5 5V9H2V5zm12 6h-3v3L6 9l5-5v3h3v4z"})}),r.repostCount||0]}),l.jsxs("span",{className:"ml-auto",children:[" ",h]})]})]})}const Ft=new Map;async function Ey(i){if(Ft.has(i))return Ft.get(i)||null;try{const o=`/api/v1/og?url=${encodeURIComponent(i)}`,r=await fetch(o,{signal:AbortSignal.timeout(6e3)});if(!r.ok)return Ft.set(i,null),null;const u=await r.json(),f={title:u.title||void 0,description:u.description||void 0,image:u.image||void 0,siteName:u.site_name||void 0};return f.title||f.description||f.image?(Ft.set(i,f),f):(Ft.set(i,null),null)}catch{return Ft.set(i,null),null}}function Ty({url:i}){const[o,r]=C.useState(Ft.get(i)||null),[u,f]=C.useState(!Ft.has(i));if(C.useEffect(()=>{if(Ft.has(i)){r(Ft.get(i)||null),f(!1);return}let h=!1;return Ey(i).then(y=>{h||(r(y),f(!1))}),()=>{h=!0}},[i]),u||!o||!o.title&&!o.image)return null;const m=(()=>{try{return new URL(i).hostname.replace(/^www\./,"")}catch{return""}})();return l.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"block mt-1 max-w-md border border-border rounded-lg overflow-hidden hover:border-border-bright transition-colors bg-bg-secondary",children:[o.image&&l.jsx("img",{src:o.image,alt:"",className:"w-full h-32 object-cover",loading:"lazy",onError:h=>h.currentTarget.style.display="none"}),l.jsxs("div",{className:"px-3 py-2",children:[o.siteName&&l.jsx("div",{className:"text-[10px] text-fg-dim uppercase tracking-wider",children:o.siteName}),o.title&&l.jsx("div",{className:"text-xs font-semibold text-accent truncate",children:o.title}),o.description&&l.jsx("div",{className:"text-[11px] text-fg-muted line-clamp-2 mt-0.5",children:o.description}),l.jsx("div",{className:"text-[10px] text-fg-dim mt-1 truncate",children:m})]})]})}let Ii=[],Ss=[];function Eg(){Ii.forEach(i=>i([...Ss]))}function hl(i,o="info",r=4e3){const u=Math.random().toString(36).slice(2),f={id:u,message:i,type:o,duration:r};Ss=[...Ss,f],Eg(),r>0&&setTimeout(()=>sc(u),r)}function sc(i){Ss=Ss.filter(o=>o.id!==i),Eg()}const Ay={info:"bg-blue/10 border-blue/30 text-blue",success:"bg-success/10 border-success/30 text-success",error:"bg-danger/10 border-danger/30 text-danger",warning:"bg-warning/10 border-warning/30 text-warning"},My={info:"",success:"",error:"",warning:""};function Tg(){const[i,o]=C.useState([]);return C.useEffect(()=>(Ii.push(o),()=>{Ii=Ii.filter(r=>r!==o)}),[]),i.length===0?null:l.jsx("div",{className:"fixed bottom-20 right-4 z-[200] flex flex-col gap-2 max-w-sm",children:i.map(r=>l.jsxs("div",{className:`flex items-center gap-2 px-4 py-2.5 rounded-xl border shadow-lg backdrop-blur-sm animate-slideIn ${Ay[r.type]}`,onClick:()=>sc(r.id),children:[l.jsx("span",{className:"text-sm",children:My[r.type]}),l.jsx("span",{className:"text-sm font-medium flex-1",children:r.message}),l.jsx("button",{className:"text-xs opacity-60 hover:opacity-100 ml-2",onClick:()=>sc(r.id),children:""})]},r.id))})}const bu=Object.freeze(Object.defineProperty({__proto__:null,ToastContainer:Tg,dismissToast:sc,showToast:hl},Symbol.toStringTag,{value:"Module"}));function Ag({msg:i,channel:o,position:r,onClose:u,onReply:f,onEdit:m,onThread:h,onReact:y}){const x=C.useRef(null);C.useEffect(()=>{const _=z=>{x.current&&!x.current.contains(z.target)&&u()},X=z=>{z.key==="Escape"&&u()};return document.addEventListener("mousedown",_),document.addEventListener("keydown",X),()=>{document.removeEventListener("mousedown",_),document.removeEventListener("keydown",X)}},[u]);const p=()=>{navigator.clipboard.writeText(i.text),hl("Copied to clipboard","success",2e3),u()},j=()=>{const _=`${window.location.origin}/#${o}/${i.id}`;navigator.clipboard.writeText(_),hl("Link copied","success",2e3),u()},b=()=>{confirm("Delete this message?")&&xg(o,i.id),u()},N={position:"fixed",left:Math.min(r.x,window.innerWidth-200),top:Math.min(r.y,window.innerHeight-300),zIndex:100};return l.jsxs("div",{ref:x,style:N,className:"bg-bg-secondary border border-border rounded-xl shadow-2xl py-1.5 min-w-[180px] animate-fadeIn",children:[l.jsx(Zt,{icon:"",label:"Reply",onClick:()=>{f(),u()}}),l.jsx(Zt,{icon:"",label:"View Thread",onClick:()=>{h(),u()}}),l.jsx(Zt,{icon:"",label:"Add Reaction",onClick:_=>{y(_),u()}}),l.jsx("div",{className:"h-px bg-border mx-2 my-1"}),l.jsx(Zt,{icon:"",label:"Copy Text",onClick:p}),l.jsx(Zt,{icon:"",label:"Copy Link",onClick:j}),i.id&&l.jsx(Zt,{icon:"",label:"Copy Message ID",onClick:()=>{navigator.clipboard.writeText(i.id),hl("Message ID copied","success",2e3),u()}}),l.jsx(Zt,{icon:"",label:"Bookmark",onClick:()=>{T.getState().addBookmark(o,i.id,i.from,i.text,i.timestamp),u()}}),o.startsWith("#")&&(()=>{const _=T.getState().channels.get(o.toLowerCase()),X=_?.pins.some(z=>z.msgid===i.id);return l.jsx(Zt,{icon:"",label:X?"Unpin Message":"Pin Message",onClick:()=>{if(X)jg(o,i.id),T.getState().setPins(o,(_?.pins||[]).filter(z=>z.msgid!==i.id));else{vg(o,i.id);const z=Math.floor(Date.now()/1e3);T.getState().setPins(o,[{msgid:i.id,pinned_by:"you",pinned_at:z},..._?.pins||[]])}u()}})})(),l.jsx(Zt,{icon:"",label:"Share to Bluesky",onClick:()=>{const _=`https://bsky.app/intent/compose?text=${encodeURIComponent(`"${i.text.slice(0,200)}"  ${i.from} on freeq`)}`;window.open(_,"_blank"),u()}}),i.isSelf&&!i.isSystem&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"h-px bg-border mx-2 my-1"}),l.jsx(Zt,{icon:"",label:"Edit",onClick:()=>{m(),u()}}),l.jsx(Zt,{icon:"",label:"Delete",onClick:b,danger:!0})]})]})}function Zt({icon:i,label:o,onClick:r,danger:u}){return l.jsxs("button",{onClick:r,className:`w-full text-left px-3 py-1.5 text-sm flex items-center gap-2.5 hover:bg-bg-tertiary transition-colors ${u?"text-danger hover:bg-danger/10":"text-fg-muted hover:text-fg"}`,children:[l.jsx("span",{className:"text-sm w-5 text-center",children:i}),o]})}const Vh=["#ff6eb4","#00d4aa","#ffb547","#5c9eff","#b18cff","#ff9547","#00c4ff","#ff5c5c","#7edd7e","#ff85d0"];function vu(i){let o=0;for(let r=0;r<i.length;r++)o=i.charCodeAt(r)+((o<<5)-o);return Vh[Math.abs(o)%Vh.length]}function ky(i){return(i[0]||"?").toUpperCase()}function Mg(i){return i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function zy(i){const o=new Date,r=new Date(o);return r.setDate(r.getDate()-1),i.toDateString()===o.toDateString()?"Today":i.toDateString()===r.toDateString()?"Yesterday":i.toLocaleDateString([],{weekday:"long",month:"long",day:"numeric"})}function Dy(i,o){if(o===0)return!0;const r=i[o-1],u=i[o];return r.isSystem||u.isSystem?!1:r.timestamp.toDateString()!==u.timestamp.toDateString()}const kg=/https?:\/\/[^\s<]+\.(?:jpg|jpeg|png|gif|webp)(?:\?[^\s<]*)?/gi,zg=/https?:\/\/cdn\.bsky\.app\/img\/[^\s<]+/gi,_y=/[^h]*(https?:\/\/\S+)/,Oy=/\((\d+:\d+)\)/,Ly=/https?:\/\/[^\s<]+\.(?:mp4|mov|m4v|webm)(?:\?[^\s<]*)?/i,Ry=/https?:\/\/[^\s<]+\.(?:m4a|mp3|ogg|wav|aac)(?:\?[^\s<]*)?/i,Uy=/https?:\/\/[^\s]+\/xrpc\/com\.atproto\.sync\.getBlob[^\s]*/i,By=/https?:\/\/[^\s]+\/api\/v1\/blob\?[^\s]*mime=video%2F[^\s]*/i,Hy=/https?:\/\/[^\s]+\/api\/v1\/blob\?[^\s]*mime=audio%2F[^\s]*/i;function qy(i){const o=[],r=i.match(kg)||[],u=i.match(zg)||[],f=new Set([...r,...u]);for(const m of f)o.push(m);return o}function Yy(i,o){let r=i;for(const u of o)r=r.replace(u,"").trim();return r}function Ky(i){const o=[],r=[{re:/```([\s\S]*?)```/g,type:"codeblock",group:1},{re:/`([^`]+)`/g,type:"code",group:1},{re:/(https?:\/\/[^\s<]+)/g,type:"link",group:1},{re:/\*\*(.+?)\*\*/g,type:"bold",group:1},{re:new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)","g"),type:"italic",group:1},{re:/~~(.+?)~~/g,type:"strike",group:1}],u=[];for(const y of r){y.re.lastIndex=0;let x;for(;(x=y.re.exec(i))!==null;)u.push({start:x.index,end:x.index+x[0].length,type:y.type,content:x[y.group],full:x[0]})}u.sort((y,x)=>y.start-x.start);const f=[];let m=0;for(const y of u)y.start>=m&&(f.push(y),m=y.end);let h=0;for(const y of f)y.start>h&&o.push({type:"text",content:i.slice(h,y.start)}),y.type==="link"?o.push({type:"link",content:y.content,href:y.content}):o.push({type:y.type,content:y.content}),h=y.end;return h<i.length&&o.push({type:"text",content:i.slice(h)}),o}const ms=new Map,Gy=2e3;function Vy(i){const o=ms.get(i);if(o)return o;const r=Ky(i);if(ms.size>=Gy){const u=[...ms.keys()];for(let f=0;f<u.length/2;f++)ms.delete(u[f])}return ms.set(i,r),r}function Fi(i){const o=Vy(i);return l.jsx(l.Fragment,{children:o.map((r,u)=>{switch(r.type){case"link":return l.jsx("a",{href:r.href,target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline break-all",children:r.content},u);case"codeblock":return l.jsx("pre",{className:"bg-surface rounded px-2 py-1.5 my-1 text-[13px] font-mono overflow-x-auto",children:r.content},u);case"code":return l.jsx("code",{className:"bg-surface px-1 py-0.5 rounded text-[13px] font-mono text-pink",children:r.content},u);case"bold":return l.jsx("strong",{children:r.content},u);case"italic":return l.jsx("em",{children:r.content},u);case"strike":return l.jsx("del",{className:"text-fg-dim",children:r.content},u);default:return l.jsx("span",{children:r.content},u)}})})}function Xy(i){try{const r=new URL(i).hostname;return r==="cdn.bsky.app"||r.endsWith(".bsky.app")||r.endsWith(".bsky.network")||r==="freeq.at"||r.endsWith(".freeq.at")||r==="localhost"}catch{return!1}}function Qy({url:i,onOpen:o}){const r=T(h=>h.loadExternalMedia),[u,f]=C.useState(!1);return Xy(i)||r||u?l.jsx("button",{onClick:o,className:"block cursor-zoom-in",children:l.jsx("img",{src:i,alt:"",className:"max-w-sm max-h-80 rounded-lg border border-border object-contain bg-bg-tertiary hover:opacity-90 transition-opacity",loading:"lazy",onError:h=>{h.currentTarget.style.display="none"}})}):l.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-border bg-bg-tertiary text-fg-dim text-sm hover:bg-surface hover:text-fg-muted transition-colors",title:i,children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{children:"Click to load external image"})]})}const Zy=/https?:\/\/bsky\.app\/profile\/([^/]+)\/post\/([a-zA-Z0-9]+)/,Jy=/(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/;function Xh({url:i,label:o}){const r=C.useRef(null),[u,f]=C.useState(!1),[m,h]=C.useState(0),[y,x]=C.useState(0),[p,j]=C.useState(!1),[b,N]=C.useState(!1),_=()=>{const z=r.current;if(z){if(u){z.pause(),f(!1);return}j(!0),N(!1),z.play().then(()=>{f(!0),j(!1)}).catch(()=>{N(!0),j(!1)})}},X=z=>!z||!isFinite(z)?"0:00":`${Math.floor(z/60)}:${String(Math.floor(z%60)).padStart(2,"0")}`;return l.jsxs("div",{className:"mt-1.5 flex items-center gap-3 bg-bg-tertiary border border-border rounded-xl px-3 py-2.5 max-w-[300px]",children:[l.jsx("button",{onClick:_,disabled:p,className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition ${b?"bg-red-500 hover:bg-red-600":"bg-accent hover:brightness-110"}`,children:p?l.jsxs("svg",{className:"w-5 h-5 text-white animate-spin",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):b?l.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}):u?l.jsxs("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"}),l.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"})]}):l.jsx("svg",{className:"w-4 h-4 text-white ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M8 5v14l11-7z"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-fg-muted mb-1",children:[l.jsxs("svg",{className:"w-3 h-3 text-accent",fill:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V5z"}),l.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]}),l.jsx("span",{className:"font-medium text-fg-secondary",children:"Voice message"})]}),l.jsx("div",{className:"relative h-1 bg-bg-hover rounded-full overflow-hidden",children:l.jsx("div",{className:"absolute left-0 top-0 h-full bg-accent rounded-full transition-all",style:{width:y>0?`${m/y*100}%`:"0%"}})}),l.jsxs("div",{className:"flex justify-between mt-1 text-[10px] text-fg-muted font-mono",children:[l.jsx("span",{children:X(u?m:0)}),l.jsx("span",{children:o||X(y)})]})]}),l.jsx("audio",{ref:r,src:i,preload:"metadata",onLoadedMetadata:()=>x(r.current?.duration||0),onTimeUpdate:()=>h(r.current?.currentTime||0),onEnded:()=>{f(!1),h(0)},onError:()=>{N(!0),f(!1),j(!1)}})]})}function $y({url:i}){return l.jsx("div",{className:"mt-1.5 max-w-sm",children:l.jsx("video",{src:i,controls:!0,preload:"metadata",className:"rounded-lg border border-border max-h-72 bg-black",playsInline:!0})})}function Dg({msg:i}){const o=T(p=>p.setLightboxUrl);if(i.isAction){const p=i.isSelf?"#b18cff":vu(i.from);return l.jsxs("div",{className:"text-fg-muted italic text-[15px] mt-0.5",children:[l.jsxs("span",{style:{color:p},className:"font-semibold not-italic",children:["* ",i.from]})," ",i.text]})}const r=i.text.match(_y);if(r){const p=i.text.match(Oy);let j=r[1];const b=j.match(/cdn\.bsky\.app\/img\/[^/]+\/plain\/([^/]+)\/([^@\s]+)/);if(b){const N=`https://bsky.social/xrpc/com.atproto.sync.getBlob?did=${b[1]}&cid=${b[2]}`;j=`/api/v1/blob?url=${encodeURIComponent(N)}`}return j.includes("/xrpc/com.atproto.sync.getBlob")&&(j=`/api/v1/blob?url=${encodeURIComponent(j)}`),l.jsxs("div",{className:"mt-0.5",children:[i.replyTo&&l.jsx(Xi,{msgId:i.replyTo}),l.jsx(Xh,{url:j,label:p?.[1]})]})}const u=i.text.match(Ly)||i.text.match(By);if(u){const p=i.text.replace(u[0],"").trim();return l.jsxs("div",{className:"mt-0.5",children:[i.replyTo&&l.jsx(Xi,{msgId:i.replyTo}),p&&l.jsx("div",{className:"text-[15px] leading-relaxed mb-1",children:Fi(p)}),l.jsx($y,{url:u[0]})]})}const f=i.text.match(Ry)||i.text.match(Hy)||i.text.match(Uy);if(f&&!i.text.match(kg)&&!i.text.match(zg)){const p=i.text.replace(f[0],"").trim();return l.jsxs("div",{className:"mt-0.5",children:[i.replyTo&&l.jsx(Xi,{msgId:i.replyTo}),p&&l.jsx("div",{className:"text-[15px] leading-relaxed mb-1",children:Fi(p)}),l.jsx(Xh,{url:f[0]})]})}const m=qy(i.text),h=m.length>0?Yy(i.text,m):i.text,y=i.text.match(Zy),x=i.text.match(Jy);return l.jsxs("div",{className:"mt-0.5",children:[i.replyTo&&l.jsx(Xi,{msgId:i.replyTo}),h&&l.jsx("div",{className:"text-[15px] leading-relaxed [&_pre]:my-1 [&_a]:break-all",children:Fi(h)}),m.length>0&&l.jsx("div",{className:"mt-1.5 flex flex-wrap gap-2",children:m.map(p=>l.jsx(Qy,{url:p,onOpen:()=>o(p)},p))}),y&&l.jsx(Cy,{handle:y[1],rkey:y[2]}),x&&l.jsxs("a",{href:`https://youtube.com/watch?v=${x[1]}`,target:"_blank",rel:"noopener noreferrer",className:"mt-2 block max-w-sm rounded-lg overflow-hidden border border-border hover:border-accent/50 transition-colors",children:[l.jsx("img",{src:`https://img.youtube.com/vi/${x[1]}/mqdefault.jpg`,alt:"YouTube video",className:"w-full",loading:"lazy"}),l.jsxs("div",{className:"bg-bg-tertiary px-3 py-1.5 text-xs text-fg-muted flex items-center gap-1",children:[l.jsx("span",{className:"text-red-500",children:""})," YouTube"]})]}),!y&&!x&&m.length===0&&(()=>{const p=i.text.match(/(https?:\/\/[^\s<]+)/);return p&&/\/api\/v1\/blob|\.(?:m4a|mp3|mp4|mov|webm|ogg|wav|aac)/i.test(p[1])?null:p?l.jsx(Ty,{url:p[1]}):null})()]})}function Xi({msgId:i}){const o=T(m=>m.channels),r=T(m=>m.activeChannel),f=o.get(r.toLowerCase())?.messages.find(m=>m.id===i);return f?l.jsxs("button",{onClick:()=>T.getState().setScrollToMsgId(i),className:"flex items-center gap-2 text-sm text-fg-dim mb-1.5 pl-2 border-l-2 border-accent/30 hover:bg-accent/5 rounded-r cursor-pointer w-full text-left",children:[l.jsx("span",{className:"font-semibold text-fg-muted",children:f.from}),l.jsx("span",{className:"truncate max-w-[300px]",children:f.text})]}):null}function Wy(i,o){if(o===0)return!1;const r=i[o-1],u=i[o];return!(r.isSystem||u.isSystem||r.deleted||u.deleted||r.from!==u.from||u.timestamp.getTime()-r.timestamp.getTime()>300*1e3)}function Iy({nick:i,did:o,size:r=40}){const[u,f]=C.useState(o?uu(o):null);C.useEffect(()=>{o&&!u&&ws(o).then(h=>h&&f(h))},[o]);const m=vu(i);return u?.avatar?l.jsx("img",{src:u.avatar,alt:"",className:"rounded-full object-cover shrink-0",style:{width:r,height:r}}):l.jsx("div",{className:"rounded-full flex items-center justify-center font-bold shrink-0",style:{width:r,height:r,backgroundColor:m+"20",color:m,fontSize:r*.4},children:ky(i)})}function Fy({date:i}){return l.jsxs("div",{className:"flex items-center gap-3 py-3 px-4",children:[l.jsx("div",{className:"flex-1 border-t border-border"}),l.jsx("span",{className:"text-xs text-fg-dim font-semibold",children:zy(i)}),l.jsx("div",{className:"flex-1 border-t border-border"})]})}function Py({msg:i}){return l.jsxs("div",{className:"px-4 py-1 flex items-start gap-3",children:[l.jsx("span",{className:"w-10 shrink-0"}),l.jsxs("span",{className:"text-fg-dim text-sm",children:[l.jsx("span",{className:"opacity-60",children:""})," ",Fi(i.text)]})]})}function eb({msg:i,channel:o,onNickClick:r}){const[u,f]=C.useState(!1),[m,h]=C.useState(),[y,x]=C.useState(null),p=i.isSelf?"#b18cff":vu(i.from),j=uc(),b=!i.isSelf&&i.text.toLowerCase().includes(j.toLowerCase()),X=T.getState().channels.get(o.toLowerCase())?.members.get(i.from.toLowerCase()),z=I=>{h({x:I.clientX,y:I.clientY}),f(!0)};return l.jsxs("div",{className:`msg-full group px-4 pt-3 pb-1 hover:bg-white/[0.02] flex gap-3 relative ${b?"bg-accent/[0.04] border-l-2 border-accent":""}`,onContextMenu:I=>{I.preventDefault(),x({x:I.clientX,y:I.clientY})},children:[l.jsx("div",{className:"cursor-pointer mt-0.5",onClick:I=>r(i.from,X?.did,I),children:l.jsx(Iy,{nick:i.from,did:X?.did})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsxs("div",{className:"flex items-baseline gap-2",children:[l.jsx("button",{className:"font-semibold text-[15px] hover:underline",style:{color:p},onClick:I=>r(i.from,X?.did,I),children:i.from}),X?.did&&l.jsx(ab,{}),i.tags["+freeq.at/sig"]&&l.jsx(nb,{}),X?.away!=null&&l.jsx("span",{className:"text-xs text-fg-dim bg-warning/10 text-warning px-1.5 py-0.5 rounded",children:"away"}),l.jsx("span",{className:"text-xs text-fg-dim whitespace-nowrap cursor-default",title:i.timestamp.toLocaleString([],{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),children:Mg(i.timestamp)}),i.editOf&&l.jsx("span",{className:"text-xs text-fg-dim",children:"(edited)"}),i.encrypted&&l.jsx(lb,{})]}),l.jsx(Dg,{msg:i}),l.jsx(_g,{msg:i,channel:o})]}),l.jsxs("div",{className:"opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 absolute right-3 -top-3 flex items-center bg-bg-secondary border border-border rounded-lg shadow-lg overflow-hidden transition-opacity z-10",children:[l.jsx(yn,{emoji:"",title:"Reply",onClick:()=>{T.getState().setReplyTo({msgId:i.id,from:i.from,text:i.text,channel:o})}}),l.jsx(yn,{emoji:"",title:"View thread",onClick:()=>{T.getState().openThread(i.id,o)}}),i.isSelf&&!i.isSystem&&l.jsx(yn,{emoji:"",title:"Edit",onClick:()=>{T.getState().setEditingMsg({msgId:i.id,text:i.text,channel:o})}}),l.jsx(yn,{emoji:"",title:"Add reaction",onClick:z})]}),u&&m&&l.jsx("div",{className:"fixed z-50",style:{left:m.x-140,top:m.y-280},children:l.jsx(yu,{onSelect:I=>{oc(o,I,i.id),f(!1)},onClose:()=>f(!1)})}),y&&l.jsx(Ag,{msg:i,channel:o,position:y,onClose:()=>x(null),onReply:()=>T.getState().setReplyTo({msgId:i.id,from:i.from,text:i.text,channel:o}),onEdit:()=>T.getState().setEditingMsg({msgId:i.id,text:i.text,channel:o}),onThread:()=>T.getState().openThread(i.id,o),onReact:z})]})}function tb({msg:i,channel:o}){const[r,u]=C.useState(!1),[f,m]=C.useState(),[h,y]=C.useState(null),x=uc(),p=!i.isSelf&&i.text.toLowerCase().includes(x.toLowerCase()),j=b=>{m({x:b.clientX,y:b.clientY}),u(!0)};return l.jsxs("div",{className:`group px-4 py-0.5 hover:bg-white/[0.02] flex gap-3 relative ${p?"bg-accent/[0.04] border-l-2 border-accent":""}`,onContextMenu:b=>{b.preventDefault(),y({x:b.clientX,y:b.clientY})},children:[l.jsx("span",{className:"w-10 shrink-0 text-right text-[11px] text-fg-dim opacity-0 group-hover:opacity-100 leading-[24px] cursor-default",title:i.timestamp.toLocaleString([],{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),children:Mg(i.timestamp)}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx(Dg,{msg:i}),l.jsx(_g,{msg:i,channel:o})]}),l.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute right-3 -top-3 flex items-center bg-bg-secondary border border-border rounded-lg shadow-lg overflow-hidden",children:[l.jsx(yn,{emoji:"",title:"Reply",onClick:()=>{T.getState().setReplyTo({msgId:i.id,from:i.from,text:i.text,channel:o})}}),i.isSelf&&!i.isSystem&&l.jsx(yn,{emoji:"",title:"Edit",onClick:()=>{T.getState().setEditingMsg({msgId:i.id,text:i.text,channel:o})}}),l.jsx(yn,{emoji:"",title:"Add reaction",onClick:j})]}),r&&f&&l.jsx("div",{className:"fixed z-50",style:{left:f.x-140,top:f.y-280},children:l.jsx(yu,{onSelect:b=>{oc(o,b,i.id),u(!1)},onClose:()=>u(!1)})}),h&&l.jsx(Ag,{msg:i,channel:o,position:h,onClose:()=>y(null),onReply:()=>T.getState().setReplyTo({msgId:i.id,from:i.from,text:i.text,channel:o}),onEdit:()=>T.getState().setEditingMsg({msgId:i.id,text:i.text,channel:o}),onThread:()=>T.getState().openThread(i.id,o),onReact:b=>{m({x:b.clientX,y:b.clientY}),u(!0)}})]})}function ab(){return l.jsx("span",{className:"text-accent text-xs",title:"AT Protocol verified identity",children:l.jsx("svg",{className:"w-3.5 h-3.5 inline -mt-0.5",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M8 0a8 8 0 100 16A8 8 0 008 0zm3.78 5.97l-4.5 5a.75.75 0 01-1.06.02l-2-1.86a.75.75 0 011.02-1.1l1.45 1.35 3.98-4.43a.75.75 0 011.11 1.02z"})})})}function nb(){const[i,o]=C.useState(!1);return l.jsxs("span",{className:"relative inline-block",children:[l.jsx("button",{className:"text-success text-xs opacity-60 hover:opacity-100 transition-opacity",onClick:r=>{r.stopPropagation(),o(!i)},title:"Cryptographically signed message",children:l.jsx("svg",{className:"w-3 h-3 inline -mt-0.5",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M8 1a2 2 0 00-2 2v3H5a2 2 0 00-2 2v5a2 2 0 002 2h6a2 2 0 002-2V8a2 2 0 00-2-2H10V3a2 2 0 00-2-2zm0 1.5a.5.5 0 01.5.5v3h-1V3a.5.5 0 01.5-.5z"})})}),i&&l.jsxs("div",{className:"absolute bottom-full left-0 mb-1 w-64 bg-bg-secondary border border-border rounded-lg shadow-xl p-3 z-50 animate-fadeIn",onClick:r=>r.stopPropagation(),children:[l.jsxs("div",{className:"text-xs font-semibold text-success mb-1 flex items-center gap-1",children:[l.jsx("svg",{className:"w-3 h-3",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M8 1a2 2 0 00-2 2v3H5a2 2 0 00-2 2v5a2 2 0 002 2h6a2 2 0 002-2V8a2 2 0 00-2-2H10V3a2 2 0 00-2-2zm0 1.5a.5.5 0 01.5.5v3h-1V3a.5.5 0 01.5-.5z"})}),"Signed Message"]}),l.jsx("p",{className:"text-[11px] text-fg-muted leading-relaxed",children:"This message is cryptographically signed by the sender's verified identity. It cannot be forged or tampered with  the signature is tied to their AT Protocol DID."}),l.jsx("button",{className:"text-[10px] text-fg-dim hover:text-fg-muted mt-1.5",onClick:()=>o(!1),children:"Dismiss"})]})]})}function lb(){const[i,o]=C.useState(!1);return l.jsxs("span",{className:"relative inline-block",children:[l.jsx("button",{className:"text-[10px] text-success hover:opacity-80 transition-opacity",onClick:r=>{r.stopPropagation(),o(!i)},title:"End-to-end encrypted",children:""}),i&&l.jsxs("div",{className:"absolute bottom-full left-0 mb-1 w-64 bg-bg-secondary border border-border rounded-lg shadow-xl p-3 z-50 animate-fadeIn",onClick:r=>r.stopPropagation(),children:[l.jsx("div",{className:"text-xs font-semibold text-success mb-1",children:" End-to-End Encrypted"}),l.jsx("p",{className:"text-[11px] text-fg-muted leading-relaxed",children:"This message is end-to-end encrypted. Only you and the recipient can read it  the server only sees ciphertext. Uses the Double Ratchet protocol (like Signal) with forward secrecy."}),l.jsx("button",{className:"text-[10px] text-fg-dim hover:text-fg-muted mt-1.5",onClick:()=>o(!1),children:"Dismiss"})]})]})}function yn({emoji:i,title:o,onClick:r}){return l.jsx("button",{className:"w-9 h-9 flex items-center justify-center text-sm hover:bg-bg-tertiary text-fg-dim hover:text-fg-muted",title:o,onClick:r,children:i})}function _g({msg:i,channel:o}){if(!i.reactions||i.reactions.size===0)return null;const r=uc();return l.jsx("div",{className:"flex gap-1.5 mt-1.5 flex-wrap",children:[...i.reactions.entries()].map(([u,f])=>{const m=f.has(r);return l.jsxs("button",{onClick:()=>oc(o,u,i.id),className:`rounded-lg px-2.5 py-1 text-sm inline-flex items-center gap-1.5 border ${m?"bg-accent/10 border-accent/30 text-accent":"bg-surface border-transparent hover:border-border-bright text-fg-muted"}`,title:[...f].join(", "),children:[l.jsx("span",{children:u}),l.jsx("span",{children:f.size})]},u)})})}function sb({channel:i}){const r=T(m=>m.channels).get(i.toLowerCase());if(!r)return null;const u=[...r.members.values()].filter(m=>m.typing).map(m=>m.nick);if(u.length===0)return null;const f=u.length===1?`${u[0]} is typing`:u.length===2?`${u[0]} and ${u[1]} are typing`:`${u[0]} and ${u.length-1} others are typing`;return l.jsxs("div",{className:"px-4 py-1.5 flex items-center gap-2 text-xs text-fg-dim animate-fadeIn","aria-live":"polite","aria-atomic":"true",children:[l.jsxs("span",{className:"flex gap-0.5",children:[l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accent animate-bounce",style:{animationDelay:"0ms"}}),l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accent animate-bounce",style:{animationDelay:"150ms"}}),l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accent animate-bounce",style:{animationDelay:"300ms"}})]}),l.jsx("span",{className:"text-fg-muted",children:f})]})}function ib({channel:i}){const o=T(m=>m.channels.get(i.toLowerCase())),r=o?.topic,u=o?.members.size??0,f=o?.isEncrypted;return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsxs("div",{className:"text-xl text-fg font-bold",children:["Welcome to ",i]}),r&&l.jsx("div",{className:"text-sm mt-2 text-center max-w-md leading-relaxed text-fg-muted",children:r}),!r&&l.jsxs("div",{className:"text-sm mt-2 text-center max-w-xs leading-relaxed text-fg-dim",children:["This is the beginning of ",l.jsx("span",{className:"text-accent font-medium",children:i}),"."]}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mt-4 text-[11px]",children:[u>0&&l.jsxs("span",{className:"bg-bg-tertiary border border-border rounded-full px-2.5 py-1 text-fg-dim",children:[" ",u," ",u===1?"member":"members"]}),f&&l.jsx("span",{className:"bg-success/5 border border-success/20 rounded-full px-2.5 py-1 text-success",children:" Encrypted"}),l.jsx("span",{className:"bg-bg-tertiary border border-border rounded-full px-2.5 py-1 text-fg-dim",children:" Messages are signed"})]}),l.jsxs("div",{className:"grid gap-2 mt-5 max-w-sm w-full",children:[l.jsxs("div",{className:"bg-bg-tertiary/50 border border-border rounded-lg p-3 text-left",children:[l.jsx("div",{className:"text-[11px] font-semibold text-fg-muted mb-0.5",children:" Verified Identity"}),l.jsxs("div",{className:"text-[11px] text-fg-dim leading-relaxed",children:["Users with a ",l.jsx("span",{className:"text-accent",children:""})," next to their name are signed in with their AT Protocol (Bluesky) identity. Their messages are cryptographically signed and can't be forged."]})]}),l.jsxs("div",{className:"bg-bg-tertiary/50 border border-border rounded-lg p-3 text-left",children:[l.jsx("div",{className:"text-[11px] font-semibold text-fg-muted mb-0.5",children:" Getting started"}),l.jsxs("div",{className:"text-[11px] text-fg-dim leading-relaxed",children:["Type a message below to start chatting. Use ",l.jsx("kbd",{className:"px-1 py-0.5 bg-bg border border-border rounded text-[10px] font-mono",children:"/help"})," for commands, or right-click messages for actions."]})]})]}),l.jsx("div",{className:"flex gap-2 mt-4",children:l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`https://irc.freeq.at/join/${encodeURIComponent(i)}`),gl(()=>Promise.resolve().then(()=>bu),void 0).then(m=>m.showToast("Invite link copied","success",2e3))},className:"text-xs bg-bg-tertiary border border-border rounded-lg px-3 py-1.5 text-fg-dim hover:text-fg hover:border-accent transition-colors",children:" Copy invite link"})})]})}const cb=[];function rb({pins:i,messages:o}){const[r,u]=C.useState(!1);if(i.length===0)return null;const f=i.slice(0,r?10:1).map(m=>{const h=o.find(y=>y.id===m.msgid);return{...m,msg:h}});return l.jsxs("div",{className:"border-b border-border bg-bg-secondary/50 px-4 py-1.5 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-accent text-xs",children:""}),f[0]?.msg?l.jsxs("button",{className:"flex-1 text-left truncate text-fg-muted hover:text-fg transition-colors",onClick:()=>{T.getState().setScrollToMsgId(f[0].msgid)},children:[l.jsx("span",{className:"font-semibold text-fg text-xs",children:f[0].msg.from}),l.jsxs("span",{className:"ml-1.5 text-xs",children:[f[0].msg.text.slice(0,120),f[0].msg.text.length>120?"":""]})]}):l.jsx("span",{className:"flex-1 text-fg-dim text-xs italic",children:"Pinned message not in view"}),i.length>1&&l.jsx("button",{className:"text-[10px] text-fg-dim hover:text-fg shrink-0",onClick:()=>u(!r),children:r?"":`+${i.length-1} more`})]}),r&&f.slice(1).map(m=>l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("span",{className:"text-accent text-xs",children:""}),m.msg?l.jsxs("button",{className:"flex-1 text-left truncate text-fg-muted hover:text-fg text-xs",onClick:()=>T.getState().setScrollToMsgId(m.msgid),children:[l.jsx("span",{className:"font-semibold text-fg",children:m.msg.from}),l.jsx("span",{className:"ml-1.5",children:m.msg.text.slice(0,100)})]}):l.jsxs("span",{className:"flex-1 text-fg-dim text-xs italic",children:["Message ",m.msgid.slice(0,8),""]})]},m.msgid))]})}function ob(){const i=T(V=>V.activeChannel),o=T(V=>V.activeChannel==="server"?V.serverMessages:V.channels.get(V.activeChannel.toLowerCase())?.messages||[]),r=T(V=>V.channels.get(V.activeChannel.toLowerCase())?.lastReadMsgId),u=T(V=>V.channels.get(V.activeChannel.toLowerCase())?.pins??cb),f=T(V=>V.messageDensity),m=C.useRef(null),h=C.useRef(!0),[y,x]=C.useState(!1),[p,j]=C.useState(0),[b,N]=C.useState(null),_=C.useCallback(()=>{const V=m.current;if(!V)return;const Z=V.scrollHeight-V.scrollTop-V.clientHeight<80;h.current=Z,x(!Z),Z&&j(0)},[]),X=C.useRef(o.length);C.useEffect(()=>{const V=o.length-X.current;if(X.current=o.length,!h.current){V>0&&j(de=>de+V);return}const Z=()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)};requestAnimationFrame(()=>requestAnimationFrame(Z))},[o.length,o]),C.useEffect(()=>{h.current=!0,x(!1),j(0),X.current=0;const V=()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight,h.current=!0)};V(),requestAnimationFrame(()=>requestAnimationFrame(V));const Z=setTimeout(V,100),de=setTimeout(V,300),F=setTimeout(V,600),Le=setTimeout(V,1200);return()=>{clearTimeout(Z),clearTimeout(de),clearTimeout(F),clearTimeout(Le)}},[i]);const z=C.useCallback(()=>{_();const V=m.current;if(!(!V||V.scrollTop>50)&&i!=="server"&&o.length>0){const Z=o[0];Z.isSystem||pu(i,Z.timestamp.toISOString())}},[i,o,_]),I=T(V=>V.scrollToMsgId),[te,$]=C.useState(null);C.useEffect(()=>{I&&(T.getState().setScrollToMsgId(null),requestAnimationFrame(()=>{const V=document.getElementById(`msg-${I}`);V&&(V.scrollIntoView({behavior:"smooth",block:"center"}),$(I),setTimeout(()=>$(null),2e3))}))},[I]);const[L,ae]=C.useState(!1);C.useEffect(()=>{if(i==="server")return;ae(!0);const V=setTimeout(()=>ae(!1),600);return()=>clearTimeout(V)},[i]);const J=C.useCallback((V,Z,de)=>{N({nick:V,did:Z,pos:{x:de.clientX,y:de.clientY}})},[]);return l.jsxs("div",{ref:m,"data-testid":"message-list",role:"log","aria-label":`Messages in ${i}`,"aria-live":"polite",className:`flex-1 overflow-y-auto relative ${f==="compact"?"text-[14px] [&_.msg-full]:pt-1.5 [&_.msg-full]:pb-0":f==="cozy"?"text-[16px] [&_.msg-full]:pt-4 [&_.msg-full]:pb-2":""}`,onScroll:z,children:[i.startsWith("#")&&u.length>0&&l.jsx("div",{className:"sticky top-0 z-10",children:l.jsx(rb,{pins:u,messages:o})}),o.length===0&&L&&i!=="server"&&l.jsx("div",{className:"px-4 pt-4 space-y-4 animate-pulse",children:[...Array(6)].map((V,Z)=>l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-surface shrink-0"}),l.jsxs("div",{className:"flex-1 space-y-2 pt-1",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("div",{className:"h-3 w-20 bg-surface rounded"}),l.jsx("div",{className:"h-3 w-12 bg-surface/50 rounded"})]}),l.jsx("div",{className:"h-3 bg-surface/70 rounded",style:{width:`${40+Math.random()*50}%`}})]})]},Z))}),o.length===0&&!L&&l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-fg-dim px-8",children:[l.jsx("img",{src:"/freeq.png",alt:"freeq",className:"w-14 h-14 mb-4 opacity-20"}),i==="server"?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-base text-fg-muted font-medium",children:"Welcome to freeq"}),l.jsx("div",{className:"text-sm mt-1 text-center",children:"Server messages and notices will appear here."}),l.jsx("div",{className:"text-xs mt-3 text-center space-y-1",children:l.jsxs("div",{children:[l.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-bg-tertiary border border-border rounded font-mono",children:"K"})," Quick switch  ",l.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-bg-tertiary border border-border rounded font-mono",children:"/"})," Shortcuts"]})})]}):i.startsWith("#")?l.jsx(ib,{channel:i}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsxs("div",{className:"text-xl text-fg font-bold",children:["Conversation with ",i]}),l.jsxs("div",{className:"text-sm mt-2 text-center max-w-xs leading-relaxed text-fg-dim",children:["Direct messages are private between you and ",l.jsx("span",{className:"text-fg-muted",children:i}),"."]})]})]}),l.jsxs("div",{className:"pb-2",children:[o.map((V,Z)=>{if(V.isSystem&&/^.+ (joined|left)$/.test(V.text)){const F=Z>0?o[Z-1]:null,Le=F?.isSystem&&/^.+ (joined|left)$/.test(F.text),Ce=Z<o.length-1?o[Z+1]:null,pe=Ce?.isSystem&&/^.+ (joined|left)$/.test(Ce.text);if(Le)return null;if(pe){const ue=[V];for(let G=Z+1;G<o.length;G++){const K=o[G];if(K.isSystem&&/^.+ (joined|left)$/.test(K.text))ue.push(K);else break}const ye=ue.filter(G=>G.text.endsWith(" joined")).map(G=>G.text.replace(" joined","")),ze=ue.filter(G=>G.text.endsWith(" left")).map(G=>G.text.replace(" left","")),R=[];return ye.length>0&&R.push(`${ye.slice(0,3).join(", ")}${ye.length>3?` and ${ye.length-3} more`:""} joined`),ze.length>0&&R.push(`${ze.slice(0,3).join(", ")}${ze.length>3?` and ${ze.length-3} more`:""} left`),l.jsxs("div",{id:`msg-${V.id}`,className:"px-4 py-0.5 flex items-start gap-3",children:[l.jsx("span",{className:"w-10 shrink-0"}),l.jsxs("span",{className:"text-fg-dim text-xs opacity-60",children:[" ",R.join("; ")]})]},V.id)}}return l.jsxs("div",{id:`msg-${V.id}`,className:te===V.id?"bg-accent/10 transition-colors duration-1000":"",children:[r&&Z>0&&o[Z-1].id===r&&!V.isSelf&&l.jsxs("div",{className:"flex items-center gap-3 px-4 my-3",id:"unread-marker",children:[l.jsx("div",{className:"flex-1 h-px bg-danger/40"}),l.jsx("span",{className:"text-xs font-bold text-danger/70 uppercase tracking-wider",children:"New"}),l.jsx("div",{className:"flex-1 h-px bg-danger/40"})]}),Dy(o,Z)&&l.jsx(Fy,{date:V.timestamp}),V.deleted?l.jsxs("div",{className:"px-4 py-0.5 text-xs italic text-[var(--text-muted)] opacity-50",children:["Message from ",V.from," deleted"]}):V.isSystem?l.jsx(Py,{msg:V}):Wy(o,Z)?l.jsx(tb,{msg:V,channel:i,onNickClick:J}):l.jsx(eb,{msg:V,channel:i,onNickClick:J})]},V.id)}),l.jsx(sb,{channel:i})]}),y&&l.jsxs("button",{onClick:()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight,h.current=!0,x(!1))},className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-bg-secondary border border-border rounded-full px-4 py-2 shadow-xl flex items-center gap-2 text-sm text-fg-muted hover:text-fg hover:border-accent transition-all z-10 animate-fadeIn",children:[l.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8 1a.5.5 0 01.5.5v11.793l3.146-3.147a.5.5 0 01.708.708l-4 4a.5.5 0 01-.708 0l-4-4a.5.5 0 01.708-.708L7.5 13.293V1.5A.5.5 0 018 1z"})}),p>0?`${p} new message${p===1?"":"s"}`:"Jump to bottom"]}),b&&l.jsx(Cg,{nick:b.nick,did:b.did,position:b.pos,onClose:()=>N(null)})]},i)}const ic=[{name:"join",args:"#channel",desc:"Join a channel",category:"channel"},{name:"part",args:"[#channel]",desc:"Leave current or specified channel",category:"channel"},{name:"topic",args:"text",desc:"Set channel topic",category:"channel"},{name:"invite",args:"nick",desc:"Invite user to channel",category:"channel"},{name:"kick",args:"nick [reason]",desc:"Kick user from channel",category:"channel"},{name:"op",args:"nick",desc:"Give operator status",category:"channel"},{name:"deop",args:"nick",desc:"Remove operator status",category:"channel"},{name:"voice",args:"nick",desc:"Give voice status",category:"channel"},{name:"mode",args:"+mode [arg]",desc:"Change channel or user mode",category:"channel"},{name:"msg",args:"nick text",desc:"Send a direct message",category:"chat"},{name:"me",args:"action",desc:"Send an action message",category:"chat"},{name:"whois",args:"nick",desc:"Look up user info",category:"user"},{name:"away",args:"[reason]",desc:"Set away status (no reason = back)",category:"user"},{name:"policy",args:"#ch SET|INFO|ACCEPT|VERIFY|REQUIRE|CLEAR",desc:"Channel policy management",category:"policy"},{name:"raw",args:"IRC_LINE",desc:"Send raw IRC command",category:"system"},{name:"help",args:"",desc:"Show all commands",category:"system"}],ub={chat:" Chat",channel:" Channel",user:" User",policy:" Policy",system:" System"};function fb({filter:i,selected:o,onSelect:r}){const u=C.useMemo(()=>{if(!i)return ic;const y=i.toLowerCase();return ic.filter(x=>x.name.startsWith(y)||x.desc.toLowerCase().includes(y))},[i]);if(u.length===0)return null;const f=[];let m=0;const h=["chat","channel","user","policy","system"];for(const y of h){const x=u.filter(p=>p.category===y).map(p=>({...p,idx:m++}));x.length>0&&f.push({cat:y,cmds:x})}return l.jsx("div",{className:"absolute bottom-full left-0 right-0 mx-3 mb-1 bg-bg-secondary border border-border rounded-xl shadow-2xl overflow-hidden z-20 max-h-72 overflow-y-auto animate-fadeIn",children:f.map(({cat:y,cmds:x})=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1.5 text-[10px] uppercase tracking-wider text-fg-dim font-bold bg-bg-tertiary/50 sticky top-0",children:ub[y]||y}),x.map(p=>l.jsxs("button",{onClick:()=>r(p.name),onMouseEnter:()=>{},className:`w-full text-left px-3 py-2 flex items-baseline gap-2 hover:bg-bg-tertiary transition-colors ${p.idx===o?"bg-bg-tertiary":""}`,children:[l.jsxs("span",{className:"text-accent font-mono text-sm font-medium",children:["/",p.name]}),p.args&&l.jsx("span",{className:"text-fg-dim text-xs font-mono",children:p.args}),l.jsx("span",{className:"text-fg-dim text-xs ml-auto shrink-0",children:p.desc})]},p.name))]},y))})}function Vo(i){if(!i)return ic.length;const o=i.toLowerCase();return ic.filter(r=>r.name.startsWith(o)||r.desc.toLowerCase().includes(o)).length}function db({onFormat:i}){return l.jsxs("div",{className:"flex items-center gap-0.5 px-2 py-1 border-b border-border/50",children:[l.jsx(ol,{label:"B",title:"Bold (wrap with **)",className:"font-bold",onClick:()=>i("**","**")}),l.jsx(ol,{label:"I",title:"Italic (wrap with *)",className:"italic",onClick:()=>i("*","*")}),l.jsx(ol,{label:"S",title:"Strikethrough (wrap with ~~)",className:"line-through",onClick:()=>i("~~","~~")}),l.jsx(ol,{label:"<>",title:"Inline code (wrap with `)",className:"font-mono text-[11px]",onClick:()=>i("`","`")}),l.jsx(ol,{label:"```",title:"Code block",className:"font-mono text-[10px]",onClick:()=>i("```\n","\n```")}),l.jsx("div",{className:"w-px h-4 bg-border mx-1"}),l.jsx(ol,{label:"",title:"Link",className:"text-[12px]",onClick:()=>i("[","](url)")})]})}function ol({label:i,title:o,className:r,onClick:u}){return l.jsx("button",{onMouseDown:f=>{f.preventDefault(),u()},title:o,className:`px-2 py-1 text-xs text-fg-dim hover:text-fg hover:bg-bg-tertiary rounded transition-colors ${r||""}`,children:i})}const Qh=10*1024*1024,mb=["image/jpeg","image/png","image/gif","image/webp","video/mp4","video/webm","audio/mpeg","audio/ogg","application/pdf"];function hb(){const[i,o]=C.useState(""),[r,u]=C.useState([]),[f,m]=C.useState(-1),[h,y]=C.useState(!1),[x,p]=C.useState(null),[j,b]=C.useState(null),[N,_]=C.useState(!1),X=(U,W)=>{const re=J.current;if(!re)return;const oe=re.selectionStart||0,Be=re.selectionEnd||0,Ge=i.slice(oe,Be),lt=i.slice(0,oe)+U+Ge+W+i.slice(Be);o(lt),requestAnimationFrame(()=>{re.focus();const tt=Ge?oe+U.length+Ge.length+W.length:oe+U.length;re.setSelectionRange(tt,tt)})},[z,I]=C.useState(null),[te,$]=C.useState(!1),[L,ae]=C.useState(!1),J=C.useRef(null),V=C.useRef(null),Z=C.useRef(null),de=C.useRef(null),F=T(U=>U.activeChannel),Le=T(U=>U.channels),Ce=T(U=>U.authDid),pe=T(U=>U.replyTo),ue=T(U=>U.editingMsg),ye=Le.get(F.toLowerCase());C.useEffect(()=>{ue&&ue.channel.toLowerCase()===F.toLowerCase()&&(o(ue.text),J.current?.focus())},[ue]),C.useEffect(()=>{pe&&pe.channel.toLowerCase()===F.toLowerCase()&&J.current?.focus()},[pe]);const ze=ye?[...ye.members.values()].filter(U=>U.typing).map(U=>U.nick):[],R=C.useMemo(()=>ye?[...ye.members.values()].map(U=>U.nick).sort():[],[ye?.members]);C.useEffect(()=>{o(""),p(null),J.current?.focus()},[F]);const G=(U,W)=>{const re=U.slice(0,W),oe=re.lastIndexOf("@");if(oe>=0&&(oe===0||re[oe-1]===" ")){const Ge=re.slice(oe+1).toLowerCase();if(Ge.length>0){const lt=R.filter(tt=>tt.toLowerCase().startsWith(Ge));if(lt.length>0){p({items:lt.slice(0,8),selected:0,startPos:oe});return}}}const Be=re.lastIndexOf("#");if(Be>=0&&(Be===0||re[Be-1]===" ")){const Ge=re.slice(Be+1).toLowerCase();if(Ge.length>0){const lt=[...Le.values()].map(tt=>tt.name).filter(tt=>tt.toLowerCase().includes(Ge));if(lt.length>0){p({items:lt.slice(0,8),selected:0,startPos:Be});return}}}p(null)},K=U=>{if(!x)return;const W=i.slice(0,x.startPos),re=i.slice(J.current?.selectionStart||i.length),oe=U.startsWith("#"),Be=W+(oe?U:`@${U}`)+" "+re;o(Be),p(null),J.current?.focus()};C.useEffect(()=>{const U=W=>{const re=W.detail?.file;re&&ie(re)};return window.addEventListener("freeq-file-drop",U),()=>window.removeEventListener("freeq-file-drop",U)},[]);const ie=C.useCallback(U=>{if(!Ce){T.getState().addSystemMessage(F,"File upload requires AT Protocol authentication");return}if(U.size>Qh){T.getState().addSystemMessage(F,`File too large (max ${Qh/1024/1024}MB)`);return}if(!mb.includes(U.type)&&!U.type.startsWith("image/")){T.getState().addSystemMessage(F,`Unsupported file type: ${U.type}`);return}const W=U.type.startsWith("image/")?URL.createObjectURL(U):void 0;I({file:U,preview:W,uploading:!1})},[Ce,F]),ne=()=>{z?.preview&&URL.revokeObjectURL(z.preview),I(null)},S=C.useCallback(async()=>{if(!(!z||!Ce)){I(U=>U?{...U,uploading:!0,error:void 0}:null);try{const U=new FormData;U.append("file",z.file),U.append("did",Ce),F!=="server"&&F.startsWith("#")&&U.append("channel",F),i.trim()&&U.append("alt",i.trim()),te&&U.append("cross_post","true");let W=await fetch("/api/v1/upload",{method:"POST",body:U});if(W.status===401){const Be=localStorage.getItem("freeq-broker-token"),Ge=localStorage.getItem("freeq-broker-base");if(console.log("[upload] 401  attempting broker refresh",{hasBrokerToken:!!Be,brokerBase:Ge}),Be&&Ge)try{const lt=JSON.stringify({broker_token:Be});let tt=await fetch(`${Ge}/session`,{method:"POST",headers:{"Content-Type":"application/json"},body:lt});if(tt.status===502&&(tt=await fetch(`${Ge}/session`,{method:"POST",headers:{"Content-Type":"application/json"},body:lt})),console.log("[upload] broker refresh response:",tt.status),tt.ok){const vt=new FormData;vt.append("file",z.file),vt.append("did",Ce),F!=="server"&&F.startsWith("#")&&vt.append("channel",F),i.trim()&&vt.append("alt",i.trim()),te&&vt.append("cross_post","true"),W=await fetch("/api/v1/upload",{method:"POST",body:vt}),console.log("[upload] retry response:",W.status)}}catch(lt){console.warn("[upload] broker refresh error:",lt)}if(W.status===401)throw new Error("Upload session expired. Try refreshing the page, or log out and sign in again.")}if(!W.ok)throw new Error(await W.text());const re=await W.json(),oe=ye?.name||F;if(oe&&oe!=="server"){const Be=i.trim()?`${i.trim()} ${re.url}`:re.url;ps(oe,Be)}z.preview&&URL.revokeObjectURL(z.preview),I(null),o("")}catch(U){I(W=>W?{...W,uploading:!1,error:U.message||"Upload failed"}:null)}}},[z,Ce,F,i,ye]),H=U=>{U.preventDefault(),U.stopPropagation(),U.dataTransfer?.types.includes("Files")&&ae(!0)},D=U=>{U.preventDefault(),ae(!1)},Q=U=>{U.preventDefault(),U.stopPropagation(),ae(!1);const W=U.dataTransfer?.files[0];W&&ie(W)},le=C.useCallback(U=>{const W=U.clipboardData?.items;if(W){for(const re of W)if(re.kind==="file"){U.preventDefault();const oe=re.getAsFile();oe&&ie(oe);return}setTimeout(()=>{const re=J.current;re&&(re.style.height="auto",re.style.height=Math.min(re.scrollHeight,200)+"px")},0)}},[ie]),fe=()=>{T.getState().setReplyTo(null),T.getState().setEditingMsg(null),o("")},be=C.useCallback(()=>{if(z&&!z.uploading){S();return}const U=i.trim();if(U){if(u(W=>[...W.slice(-100),U]),m(-1),U.startsWith("/"))gb(U,F);else if(F!=="server"){const W=ye?.name||F,re=U.split(/\r?\n/).filter(oe=>oe.trim());if(ue&&ue.channel.toLowerCase()===F.toLowerCase())gg(W,ue.msgId,re.join(" ")),T.getState().setEditingMsg(null);else if(pe&&pe.channel.toLowerCase()===F.toLowerCase()){mu(W,pe.msgId,re[0]),T.getState().setReplyTo(null);for(let oe=1;oe<re.length;oe++)ps(W,re[oe])}else for(const oe of re)ps(W,oe)}o(""),p(null),J.current&&(J.current.style.height="auto")}},[i,F,ye,z,S,ue,pe]),Pe=U=>{if(U.key==="Tab"){if(U.preventDefault(),U.stopPropagation(),x)K(x.items[x.selected]);else{const W=J.current;if(W){const re=W.selectionStart||0,oe=i.slice(0,re),Be=oe.lastIndexOf(" "),Ge=oe.slice(Be+1).toLowerCase();if(Ge.length>0){const lt=Ge.startsWith("@"),tt=lt?Ge.slice(1):Ge,vt=R.find($a=>$a.toLowerCase().startsWith(tt));if(vt){const $a=lt?"@":"",pl=Be<0?": ":" ",fc=oe.slice(0,Be+1)+$a+vt+pl+i.slice(re);o(fc),p(null)}}}}return}if(j){if((U.key==="Enter"||U.key==="Tab")&&(U.key==="Tab"||j.filter&&Vo(j.filter)>0)){U.preventDefault();const W=j.filter.toLowerCase(),re=["join","part","topic","invite","kick","op","deop","voice","mode","msg","me","whois","away","encrypt","decrypt","policy","raw","help"],oe=W?re.filter(Be=>Be.startsWith(W)):re;oe[j.selected]&&(o(`/${oe[j.selected]} `),b(null),setTimeout(Ue,0));return}if(U.key==="ArrowDown"){U.preventDefault();const W=Vo(j.filter);b({...j,selected:Math.min(j.selected+1,W-1)});return}if(U.key==="ArrowUp"){U.preventDefault(),b({...j,selected:Math.max(j.selected-1,0)});return}if(U.key==="Escape"){b(null);return}}if(x){if(U.key==="Enter"){U.preventDefault(),K(x.items[x.selected]);return}if(U.key==="ArrowDown"){U.preventDefault(),p({...x,selected:Math.min(x.selected+1,x.items.length-1)});return}if(U.key==="ArrowUp"){U.preventDefault(),p({...x,selected:Math.max(x.selected-1,0)});return}if(U.key==="Escape"){p(null);return}}if(U.key==="Escape"){if(z){ne();return}if(pe||ue){fe();return}}if(U.key==="Enter"&&!U.shiftKey)U.preventDefault(),be();else if(U.key==="ArrowUp"&&!i&&!ue&&!pe){if(U.preventDefault(),f<0&&r.length===0){const W=ye?.messages;if(W)for(let re=W.length-1;re>=0;re--){const oe=W[re];if(oe.isSelf&&!oe.isSystem&&!oe.deleted){T.getState().setEditingMsg({msgId:oe.id,text:oe.text,channel:F});break}}}else if(r.length>0){const W=f<0?r.length-1:Math.max(0,f-1);m(W),o(r[W]||"")}}else if(U.key==="ArrowDown"&&f>=0){U.preventDefault();const W=f+1;W>=r.length?(m(-1),o("")):(m(W),o(r[W]||""))}},Ue=()=>{const U=J.current;if(U){U.style.height="auto",U.style.height=Math.min(U.scrollHeight,200)+"px",G(U.value,U.selectionStart||0);const W=U.value;if(W.startsWith("/")&&!W.includes(" ")){const re=W.slice(1);Vo(re)>0?b({filter:re,selected:0}):b(null)}else b(null)}},ba=F!=="server"||i.startsWith("/");return l.jsxs("div",{className:`border-t border-border bg-bg-secondary shrink-0 relative ${L?"ring-2 ring-accent/50 ring-inset":""}`,onDragOver:H,onDragLeave:D,onDrop:Q,children:[L&&l.jsx("div",{className:"absolute inset-0 bg-accent/5 flex items-center justify-center z-30 pointer-events-none",children:l.jsx("div",{className:"bg-bg-secondary border-2 border-dashed border-accent rounded-xl px-6 py-4 text-accent font-medium",children:"Drop file to upload"})}),ze.length>0&&l.jsxs("div",{className:"px-4 py-1 text-xs text-fg-dim animate-fadeIn",children:[l.jsxs("span",{className:"inline-flex gap-0.5 mr-1",children:[l.jsx("span",{className:"w-1 h-1 bg-fg-dim rounded-full animate-bounce",style:{animationDelay:"0ms"}}),l.jsx("span",{className:"w-1 h-1 bg-fg-dim rounded-full animate-bounce",style:{animationDelay:"150ms"}}),l.jsx("span",{className:"w-1 h-1 bg-fg-dim rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),ze.length===1?`${ze[0]} is typing`:`${ze.slice(0,3).join(", ")} are typing`]}),pe&&pe.channel.toLowerCase()===F.toLowerCase()&&l.jsxs("div",{className:"px-3 py-2 border-b border-border flex items-center gap-2 animate-fadeIn bg-accent/[0.03]",children:[l.jsx("div",{className:"w-1 h-8 bg-accent rounded-full shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"text-xs text-accent font-bold",children:["Replying to ",pe.from]}),l.jsx("div",{className:"text-xs text-fg-muted truncate",children:pe.text})]}),l.jsx("button",{onClick:fe,className:"text-fg-dim hover:text-danger text-lg shrink-0 p-1",children:""})]}),ue&&ue.channel.toLowerCase()===F.toLowerCase()&&l.jsxs("div",{className:"px-3 py-2 border-b border-border flex items-center gap-2 animate-fadeIn bg-warning/[0.03]",children:[l.jsx("div",{className:"w-1 h-8 bg-warning rounded-full shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-xs text-warning font-bold",children:"Editing message"}),l.jsx("div",{className:"text-xs text-fg-muted truncate",children:ue.text})]}),l.jsx("button",{onClick:fe,className:"text-fg-dim hover:text-danger text-lg shrink-0 p-1",children:""})]}),z&&l.jsxs("div",{className:"px-3 py-2 border-b border-border flex items-center gap-3 animate-fadeIn",children:[z.preview?l.jsx("img",{src:z.preview,alt:"",className:"w-16 h-16 rounded-lg object-cover border border-border"}):l.jsx("div",{className:"w-16 h-16 rounded-lg border border-border bg-bg-tertiary flex items-center justify-center text-fg-dim text-xl",children:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm text-fg truncate",children:z.file.name}),l.jsxs("div",{className:"text-xs text-fg-dim",children:[(z.file.size/1024).toFixed(0)," KB  ",z.file.type]}),z.error&&l.jsx("div",{className:"text-xs text-danger mt-0.5",children:z.error}),Ce&&l.jsxs("label",{className:"flex items-center gap-1.5 mt-1 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:te,onChange:U=>$(U.target.checked),className:"w-3 h-3 rounded accent-blue"}),l.jsx("span",{className:"text-sm text-fg-dim",children:"Also post to Bluesky"}),l.jsx("span",{className:"text-[10px]",children:""})]})]}),z.uploading?l.jsxs("svg",{className:"animate-spin w-5 h-5 text-accent shrink-0",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):l.jsx("button",{onClick:ne,className:"text-fg-dim hover:text-danger text-lg shrink-0 p-1",title:"Cancel",children:""})]}),j&&l.jsx(fb,{filter:j.filter,selected:j.selected,onSelect:U=>{o(`/${U} `),b(null),J.current?.focus()}}),x&&l.jsx("div",{className:"absolute bottom-full left-3 mb-1 bg-bg-secondary border border-border rounded-lg shadow-2xl overflow-hidden animate-fadeIn z-20 min-w-[200px]",children:x.items.map((U,W)=>l.jsxs("button",{onClick:()=>K(U),onMouseEnter:()=>p({...x,selected:W}),className:`w-full text-left px-3 py-1.5 text-sm flex items-center gap-2 ${W===x.selected?"bg-bg-tertiary text-fg":"text-fg-muted"}`,children:[U.startsWith("#")?l.jsx("span",{className:"text-accent text-xs",children:"#"}):l.jsx("span",{className:"text-purple text-xs",children:"@"}),U.replace(/^#/,"")]},U))}),l.jsxs("div",{className:"flex items-end gap-2.5 px-4 py-3",children:[Ce&&F!=="server"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Z.current?.click(),className:"w-9 h-9 rounded-lg flex items-center justify-center text-fg-dim hover:text-fg-muted hover:bg-bg-tertiary shrink-0",title:"Upload file (or drag & drop, or paste)",children:l.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M14 10v3a1 1 0 01-1 1H3a1 1 0 01-1-1v-3M11 5L8 2M8 2L5 5M8 2v8"})})}),l.jsx("input",{ref:Z,type:"file",className:"hidden",accept:"image/*,video/mp4,video/webm,audio/mpeg,audio/ogg,application/pdf",onChange:U=>{const W=U.target.files?.[0];W&&ie(W),U.target.value=""}}),l.jsx("button",{onClick:()=>de.current?.click(),className:"w-9 h-9 rounded-lg items-center justify-center text-fg-dim hover:text-fg-muted hover:bg-bg-tertiary shrink-0 hidden max-sm:flex",title:"Take photo",children:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("path",{d:"M10.5 8.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"}),l.jsx("path",{d:"M2 4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1.172a2 2 0 01-1.414-.586l-.828-.828A2 2 0 009.172 2H6.828a2 2 0 00-1.414.586l-.828.828A2 2 0 013.172 4H2zm.5 2a.5.5 0 110-1 .5.5 0 010 1zm9 2.5a3.5 3.5 0 11-7 0 3.5 3.5 0 017 0z"})]})}),l.jsx("input",{ref:de,type:"file",className:"hidden",accept:"image/*",capture:"environment",onChange:U=>{const W=U.target.files?.[0];W&&ie(W),U.target.value=""}})]}),l.jsx("button",{ref:V,onClick:()=>y(!h),className:"w-10 h-10 rounded-lg flex items-center justify-center text-lg text-fg-dim hover:text-fg-muted hover:bg-bg-tertiary shrink-0",title:"Emoji",children:""}),l.jsx("button",{onClick:()=>_(!N),className:`w-10 h-10 rounded-lg flex items-center justify-center text-sm shrink-0 ${N?"text-accent bg-accent/10":"text-fg-dim hover:text-fg-muted hover:bg-bg-tertiary"}`,title:"Formatting",children:"Aa"}),l.jsxs("div",{className:"flex-1 bg-bg-tertiary rounded-lg border border-border focus-within:border-accent/50 flex flex-col",children:[N&&l.jsx(db,{onFormat:X}),l.jsx("div",{className:"flex items-end",children:l.jsx("textarea",{"data-testid":"compose-input","aria-label":`Message ${F}`,ref:J,value:i,onChange:U=>{o(U.target.value),Ue()},onKeyDown:Pe,onPaste:le,placeholder:z?"Add a caption (optional)...":F==="server"?"Type /help for commands...":ye?.isEncrypted?` Message ${ye?.name||F} (encrypted)`:`Message ${ye?.name||F}`,rows:1,className:"flex-1 bg-transparent px-3 py-2.5 text-base text-fg outline-none placeholder:text-fg-dim resize-none min-h-[44px] max-h-[200px] leading-relaxed",autoComplete:"off",spellCheck:!0})})]}),l.jsx("button",{onClick:be,disabled:!i.trim()&&!z||!ba,className:`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${(i.trim()||z)&&ba?"bg-accent text-black hover:bg-accent-hover":"bg-bg-tertiary text-fg-dim cursor-not-allowed"}`,title:z?"Upload":"Send",children:z?l.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M14 10v3a1 1 0 01-1 1H3a1 1 0 01-1-1v-3M11 5L8 2M8 2L5 5M8 2v8"})}):l.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M15.854 8.354a.5.5 0 000-.708L12.207 4l-.707.707L14.293 7.5H1v1h13.293l-2.793 2.793.707.707 3.647-3.646z"})})})]}),h&&l.jsx("div",{className:"absolute bottom-full left-3 mb-2 z-50",children:l.jsx(yu,{onSelect:U=>{o(W=>W+U),y(!1),J.current?.focus()},onClose:()=>y(!1)})})]})}function gb(i,o){const r=i.indexOf(" "),u=(r>0?i.slice(1,r):i.slice(1)).toLowerCase(),f=r>0?i.slice(r+1):"",m=T.getState(),h=o!=="server"?m.channels.get(o.toLowerCase())?.name||o:"";switch(u){case"join":case"j":f.split(",").map(y=>y.trim()).filter(Boolean).forEach(y=>Za(y.startsWith("#")?y:`#${y}`));break;case"part":case"leave":hu(f||h);break;case"topic":case"t":h&&gu(h,f);break;case"mode":case"m":f?zt(`MODE ${f.startsWith("#")?"":h+" "}${f}`):h&&zt(`MODE ${h}`);break;case"kick":case"k":{const y=f.split(" ");y[0]&&h&&pg(h,y[0],y.slice(1).join(" ")||void 0);break}case"op":f&&h&&Wi(h,"+o",f);break;case"deop":f&&h&&Wi(h,"-o",f);break;case"voice":f&&h&&Wi(h,"+v",f);break;case"invite":f&&h&&yg(h,f);break;case"away":bg(f||void 0);break;case"whois":case"wi":f&&xu(f);break;case"msg":case"query":{const y=f.split(" ");y[0]&&y[1]&&ps(y[0],y.slice(1).join(" "));break}case"me":case"action":h&&zt(`PRIVMSG ${h} :ACTION ${f}`);break;case"raw":case"quote":zt(f);break;case"help":m.addSystemMessage(o," Commands "),m.addSystemMessage(o,"/join #channel    /part    /topic text"),m.addSystemMessage(o,"/kick user    /op user    /voice user    /invite user"),m.addSystemMessage(o,"/whois user    /away reason    /me action"),m.addSystemMessage(o,"/msg user text    /mode +o user    /raw IRC_LINE"),m.addSystemMessage(o," Encryption "),m.addSystemMessage(o,"/encrypt passphrase    /decrypt   E2EE for channels"),m.addSystemMessage(o," Policy "),m.addSystemMessage(o,"/policy #ch SET <rules>    /policy #ch INFO    /policy #ch ACCEPT"),m.addSystemMessage(o,"/policy #ch REQUIRE <type> issuer=... url=... label=..."),m.addSystemMessage(o,"/policy #ch SET-ROLE <role> <json>    /policy #ch CLEAR"),m.addSystemMessage(o,"/policy #ch VERIFY github <org-or-owner/repo>"),m.addSystemMessage(o," Shortcuts "),m.addSystemMessage(o,"K quick switch    F search    / shortcuts     edit last");break;case"encrypt":case"e2ee":{if(!f.trim()){m.addSystemMessage(o,"Usage: /encrypt <passphrase>  enables E2EE for this channel");break}gl(()=>Promise.resolve().then(()=>Kh),void 0).then(async y=>{await y.setChannelKey(h,f.trim()),m.addSystemMessage(o," End-to-end encryption enabled. All messages you send will be encrypted."),m.addSystemMessage(o,"Others need the same passphrase to read your messages.");const x=new Map(m.channels),p=x.get(o.toLowerCase());p&&(x.set(o.toLowerCase(),{...p,isEncrypted:!0}),T.setState({channels:x}))});break}case"decrypt":case"unencrypt":{gl(()=>Promise.resolve().then(()=>Kh),void 0).then(y=>{y.removeChannelKey(h),m.addSystemMessage(o," Encryption disabled for this channel.");const x=new Map(m.channels),p=x.get(o.toLowerCase());p&&(x.set(o.toLowerCase(),{...p,isEncrypted:!1}),T.setState({channels:x}))});break}default:zt(`${u.toUpperCase()}${f?" "+f:""}`)}}const Zh=["#ff6eb4","#00d4aa","#ffb547","#5c9eff","#b18cff","#ff9547","#00c4ff","#ff5c5c","#7edd7e","#ff85d0"];function xb(i){let o=0;for(let r=0;r<i.length;r++)o=i.charCodeAt(r)+((o<<5)-o);return Zh[Math.abs(o)%Zh.length]}function pb(){const i=T(b=>b.activeChannel),r=T(b=>b.channels).get(i.toLowerCase()),[u,f]=C.useState(null);if(!r||i==="server")return null;const m=[...r.members.values()].sort((b,N)=>{const _=b.isOp?0:b.isHalfop?1:b.isVoiced?2:3,X=N.isOp?0:N.isHalfop?1:N.isVoiced?2:3;return _-X||b.nick.localeCompare(N.nick)}),h=m.filter(b=>b.isOp),y=m.filter(b=>!b.isOp&&b.isHalfop),x=m.filter(b=>!b.isOp&&!b.isHalfop&&b.isVoiced),p=m.filter(b=>!b.isOp&&!b.isHalfop&&!b.isVoiced),j=(b,N,_)=>{f({nick:b,did:N,pos:{x:_.clientX,y:_.clientY}})};return l.jsxs("aside",{role:"complementary","aria-label":"Channel members",className:"w-52 h-full bg-bg-secondary border-l border-border overflow-y-auto shrink-0",children:[l.jsxs("div",{className:"px-3 pt-4 pb-2",children:[h.length>0&&l.jsx(Qi,{label:`Operators  ${h.length}`,children:h.map(b=>l.jsx(Zi,{member:b,onClick:j},b.nick))}),y.length>0&&l.jsx(Qi,{label:`Moderators  ${y.length}`,children:y.map(b=>l.jsx(Zi,{member:b,onClick:j},b.nick))}),x.length>0&&l.jsx(Qi,{label:`Voiced  ${x.length}`,children:x.map(b=>l.jsx(Zi,{member:b,onClick:j},b.nick))}),l.jsx(Qi,{label:`${h.length>0||y.length>0||x.length>0?"Members":"Online"}  ${p.length}`,children:p.map(b=>l.jsx(Zi,{member:b,onClick:j},b.nick))})]}),u&&l.jsx(Cg,{nick:u.nick,did:u.did,position:u.pos,onClose:()=>f(null)})]})}function Qi({label:i,children:o}){return l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"text-xs uppercase tracking-wider text-fg-dim font-bold mb-2 px-1",children:i}),o]})}function Zi({member:i,onClick:o}){const r=xb(i.nick);return l.jsxs("button",{onClick:u=>o(i.nick,i.did,u),className:"w-full flex items-center gap-2.5 px-2 py-1.5 rounded-lg text-[15px] hover:bg-bg-tertiary group",title:i.did||i.nick,children:[l.jsxs("div",{className:"relative",children:[l.jsx(yb,{nick:i.nick,did:i.did,color:r}),l.jsx("span",{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-bg-secondary ${i.away?"bg-warning":"bg-success"}`})]}),l.jsxs("div",{className:"min-w-0 flex-1 flex items-center gap-1",children:[i.isOp&&l.jsx("span",{className:"text-success text-xs font-bold",children:"@"}),!i.isOp&&i.isHalfop&&l.jsx("span",{className:"text-accent text-xs font-bold",children:"%"}),!i.isOp&&!i.isHalfop&&i.isVoiced&&l.jsx("span",{className:"text-warning text-xs font-bold",children:"+"}),l.jsx("span",{className:`truncate text-[15px] ${i.away?"text-fg-dim":"text-fg-muted group-hover:text-fg"}`,children:i.nick}),i.did&&l.jsx("span",{className:"text-accent text-xs",title:`Verified AT Protocol identity: ${i.did}`,children:""}),i.typing&&l.jsx("span",{className:"text-accent text-xs ml-auto animate-pulse",children:"typing"})]})]})}function yb({nick:i,did:o,color:r}){const[u,f]=C.useState(()=>o&&uu(o)?.avatar||null);return C.useEffect(()=>{o&&!u&&ws(o).then(m=>m?.avatar&&f(m.avatar))},[o]),u?l.jsx("img",{src:u,alt:"",className:"w-8 h-8 rounded-full object-cover shrink-0"}):l.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold shrink-0",style:{backgroundColor:r+"20",color:r},children:i[0]?.toUpperCase()})}function bb({open:i,onClose:o}){const[r,u]=C.useState(""),[f,m]=C.useState(0),h=C.useRef(null),y=T(N=>N.channels),x=T(N=>N.setActiveChannel),p=C.useMemo(()=>{const N=[];for(const z of y.values())z.isJoined&&N.push({type:"channel",name:z.name,label:z.name});N.push({type:"channel",name:"server",label:"(server)"});const _=r.trim();if(_&&(_.startsWith("#")||_.length>1)){const z=_.startsWith("#")?_:`#${_}`;[...y.values()].some(te=>te.name.toLowerCase()===z.toLowerCase())||N.push({type:"action",name:z,label:`Join ${z}`})}if(!_)return N;const X=_.toLowerCase();return N.filter(z=>z.label.toLowerCase().includes(X))},[y,r]);C.useEffect(()=>{i&&(u(""),m(0),setTimeout(()=>h.current?.focus(),50))},[i]),C.useEffect(()=>{m(0)},[r]);const j=N=>{const _=p[N];_&&(_.type==="action"?Za(_.name):x(_.name),o())},b=N=>{if(N.key==="Escape"){o();return}N.key==="ArrowDown"?(N.preventDefault(),m(_=>Math.min(_+1,p.length-1))):N.key==="ArrowUp"?(N.preventDefault(),m(_=>Math.max(_-1,0))):N.key==="Enter"&&(N.preventDefault(),j(f))};return i?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[15vh]",onClick:o,children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),l.jsxs("div",{className:"relative bg-bg-secondary border border-border rounded-xl w-[480px] max-w-[90vw] shadow-2xl animate-fadeIn overflow-hidden",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center gap-2 px-4 border-b border-border",children:[l.jsx("svg",{className:"w-4 h-4 text-fg-dim shrink-0",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M11.742 10.344a6.5 6.5 0 10-1.397 1.398h-.001l3.85 3.85a1 1 0 001.415-1.414l-3.85-3.85-.017.016zm-5.242.156a5 5 0 110-10 5 5 0 010 10z"})}),l.jsx("input",{ref:h,value:r,onChange:N=>u(N.target.value),onKeyDown:b,placeholder:"Switch to channel...",className:"flex-1 bg-transparent py-3 text-sm text-fg outline-none placeholder:text-fg-dim"}),l.jsx("kbd",{className:"text-[10px] text-fg-dim bg-bg-tertiary px-1.5 py-0.5 rounded font-mono",children:"esc"})]}),l.jsxs("div",{className:"max-h-[300px] overflow-y-auto py-1",children:[p.length===0&&l.jsx("div",{className:"px-4 py-6 text-fg-dim text-sm text-center",children:"No results"}),p.map((N,_)=>l.jsxs("button",{onClick:()=>j(_),onMouseEnter:()=>m(_),className:`w-full text-left px-4 py-2 flex items-center gap-2 text-sm ${_===f?"bg-bg-tertiary text-fg":"text-fg-muted hover:bg-bg-tertiary/50"}`,children:[N.type==="channel"?l.jsx("span",{className:"text-accent text-xs",children:"#"}):l.jsx("span",{className:"text-success text-xs",children:"+"}),l.jsx("span",{children:N.label}),N.type==="action"&&l.jsx("span",{className:"ml-auto text-[10px] text-fg-dim",children:"join"})]},N.name+N.type))]})]})]}):null}function vb({open:i,onClose:o}){const r=T(z=>z.nick),u=T(z=>z.authDid),f=T(z=>z.connectionState),m=T(z=>z.theme),h=T(z=>z.setTheme),y=T(z=>z.messageDensity),x=T(z=>z.setMessageDensity),p=T(z=>z.loadExternalMedia),j=T(z=>z.setLoadExternalMedia),[b,N]=C.useState(!0),[_,X]=C.useState(!0);return C.useEffect(()=>{i&&eg().then(z=>{N(z.notifications),X(z.sounds)})},[i]),i?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm",onClick:o}),l.jsxs("div",{className:"fixed right-0 top-0 bottom-0 z-50 w-80 bg-bg-secondary border-l border-border shadow-2xl animate-slideIn overflow-y-auto",children:[l.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[l.jsx("h2",{className:"font-semibold",children:"Settings"}),l.jsx("button",{onClick:o,className:"text-fg-dim hover:text-fg text-lg",children:""})]}),l.jsxs("div",{className:"p-4 space-y-6",children:[l.jsxs(ul,{title:"Account",children:[l.jsx(Xo,{label:"Nickname",value:r}),l.jsx(Xo,{label:"Connection",value:f}),u&&l.jsx(Xo,{label:"DID",value:u,mono:!0})]}),l.jsxs(ul,{title:"Appearance",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-fg-muted",children:"Theme"}),l.jsxs("div",{className:"flex gap-1 bg-bg rounded-lg p-0.5",children:[l.jsx("button",{onClick:()=>h("dark"),className:`px-2.5 py-1 text-xs rounded-md ${m==="dark"?"bg-surface text-fg":"text-fg-dim"}`,children:" Dark"}),l.jsx("button",{onClick:()=>h("light"),className:`px-2.5 py-1 text-xs rounded-md ${m==="light"?"bg-surface text-fg":"text-fg-dim"}`,children:" Light"})]})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-fg-muted",children:"Message density"}),l.jsx("div",{className:"flex gap-1 bg-bg rounded-lg p-0.5",children:["cozy","default","compact"].map(z=>l.jsx("button",{onClick:()=>x(z),className:`px-2 py-1 text-xs rounded-md capitalize ${y===z?"bg-surface text-fg":"text-fg-dim"}`,children:z},z))})]})]}),l.jsxs(ul,{title:"Notifications",children:[l.jsx(Qo,{label:"Desktop notifications",checked:b,onChange:async z=>{N(z),await Oo({notifications:z}),z&&(await R0()||(N(!1),await Oo({notifications:!1})))}}),l.jsx(Qo,{label:"Sound effects",checked:_,onChange:async z=>{X(z),await Oo({sounds:z})}})]}),l.jsxs(ul,{title:"Privacy",children:[l.jsx(Qo,{label:"Load external media",checked:p,onChange:j}),l.jsx("p",{className:"text-[11px] text-fg-dim leading-relaxed mt-1",children:"When off, images from external URLs require a click to load. Prevents IP leakage via tracking pixels."})]}),l.jsxs(ul,{title:"Keyboard Shortcuts",children:[l.jsx(fl,{keys:" K",desc:"Quick switcher"}),l.jsx(fl,{keys:" F",desc:"Search messages"}),l.jsx(fl,{keys:" 1-0",desc:"Switch channel"}),l.jsx(fl,{keys:"Esc",desc:"Close panel / cancel"}),l.jsx(fl,{keys:"",desc:"Edit last message"}),l.jsx(fl,{keys:"Tab",desc:"Autocomplete nick"})]}),l.jsx(ul,{title:"About",children:l.jsxs("p",{className:"text-xs text-fg-dim leading-relaxed",children:["freeq  IRC with AT Protocol identity.",l.jsx("br",{}),"Open source at"," ",l.jsx("a",{href:"https://github.com/chad/freeq",target:"_blank",className:"text-accent hover:underline",children:"github.com/chad/freeq"})]})})]})]})]}):null}function ul({title:i,children:o}){return l.jsxs("div",{children:[l.jsx("h3",{className:"text-[10px] uppercase tracking-widest text-fg-dim font-semibold mb-2",children:i}),l.jsx("div",{className:"space-y-2",children:o})]})}function Xo({label:i,value:o,mono:r}){return l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-fg-muted",children:i}),l.jsx("span",{className:`text-fg truncate max-w-[160px] ${r?"font-mono text-xs":""}`,title:o,children:o})]})}function Qo({label:i,checked:o,onChange:r}){return l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-fg-muted",children:i}),l.jsx("button",{onClick:()=>r(!o),className:`w-9 h-5 rounded-full relative transition-colors ${o?"bg-accent":"bg-surface"}`,children:l.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow transition-transform ${o?"translate-x-4":"translate-x-0.5"}`})})]})}function fl({keys:i,desc:o}){return l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-fg-muted",children:o}),l.jsx("kbd",{className:"text-[10px] text-fg-dim bg-bg-tertiary px-1.5 py-0.5 rounded font-mono",children:i})]})}function jb(){const i=T(x=>x.connectionState),o=T(x=>x.registered),r=T(x=>x.authDid),[u,f]=C.useState(0);C.useEffect(()=>{if(i==="disconnected"){f(0);const x=setInterval(()=>f(p=>p+1),1e3);return()=>clearInterval(x)}else f(0)},[i]);const m=!!localStorage.getItem("freeq-handle"),h=o&&i==="connected"&&!r&&m;return!(o&&i!=="connected")&&!h?null:h?l.jsxs("div",{className:"flex items-center justify-center gap-3 py-1.5 text-xs font-medium shrink-0 bg-warning/10 text-warning",children:[l.jsx("span",{children:"Signed in as guest  AT Protocol session expired"}),l.jsx("button",{onClick:()=>xl(),className:"underline hover:no-underline",children:"Sign in again"})]}):l.jsx("div",{className:`flex items-center justify-center gap-2 py-1.5 text-xs font-medium shrink-0 ${i==="connecting"?"bg-warning/5 text-warning":"bg-danger/10 text-danger"}`,children:i==="connecting"?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin w-3 h-3",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Reconnecting..."]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),u<5?"Reconnecting...":"Connection lost",l.jsx("button",{onClick:()=>du(),className:"ml-2 px-2 py-0.5 rounded bg-danger/20 hover:bg-danger/30 text-danger font-medium transition-colors",children:"Reconnect now"}),u>=10&&l.jsx("button",{onClick:()=>xl(),className:"px-2 py-0.5 rounded hover:bg-danger/10 text-danger/60 transition-colors",children:"Sign out"})]})})}function Sb(){const i=T(f=>f.authDid),o=T(f=>f.registered),[r,u]=C.useState(!1);return i||!o||r?null:l.jsxs("div",{className:"flex items-center justify-center gap-3 py-1.5 px-4 text-xs shrink-0 bg-accent/5 border-b border-accent/10",children:[l.jsxs("span",{className:"text-fg-dim",children:[" ",l.jsx("button",{onClick:()=>xl(),className:"text-accent font-semibold hover:underline",children:"Sign in with Bluesky"})," ","to get a verified identity, upload images, and keep your nick"]}),l.jsx("button",{onClick:()=>u(!0),className:"text-fg-dim/40 hover:text-fg-dim ml-1",children:""})]})}function wb(){const i=T(r=>r.lightboxUrl),o=T(r=>r.setLightboxUrl);return C.useEffect(()=>{if(!i)return;const r=u=>{u.key==="Escape"&&o(null)};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[i]),i?l.jsxs("div",{className:"fixed inset-0 z-[200] bg-black/90 flex items-center justify-center animate-fadeIn cursor-zoom-out",onClick:()=>o(null),children:[l.jsx("button",{className:"absolute top-4 right-4 text-white/70 hover:text-white text-2xl w-10 h-10 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20",onClick:()=>o(null),children:""}),l.jsx("img",{src:i,alt:"",className:"max-w-[90vw] max-h-[90vh] object-contain rounded-lg shadow-2xl cursor-default",onClick:r=>r.stopPropagation()}),l.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-4 right-4 text-white/50 hover:text-white text-xs bg-white/10 hover:bg-white/20 px-3 py-1.5 rounded-lg",onClick:r=>r.stopPropagation(),children:"Open original "})]}):null}function Nb(){const i=T(x=>x.searchOpen),o=T(x=>x.searchQuery),r=T(x=>x.setSearchQuery),u=T(x=>x.setSearchOpen),f=T(x=>x.channels),m=T(x=>x.setActiveChannel),h=C.useRef(null);C.useEffect(()=>{i&&setTimeout(()=>h.current?.focus(),50)},[i]);const y=C.useMemo(()=>{if(!o||o.length<2)return[];const x=o.toLowerCase(),p=[];for(const[j,b]of f){for(const N of b.messages)if(!(N.isSystem||N.deleted)&&(N.text.toLowerCase().includes(x)||N.from.toLowerCase().includes(x))&&(p.push({channel:j,msg:N}),p.length>=50))break;if(p.length>=50)break}return p.sort((j,b)=>b.msg.timestamp.getTime()-j.msg.timestamp.getTime())},[o,f]);return i?l.jsx("div",{className:"fixed inset-0 z-[150] flex items-start justify-center pt-[10vh]",onClick:()=>u(!1),children:l.jsxs("div",{className:"bg-bg-secondary border border-border rounded-xl shadow-2xl w-[560px] max-w-[90vw] max-h-[70vh] flex flex-col animate-fadeIn",onClick:x=>x.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-border",children:[l.jsxs("svg",{className:"w-4 h-4 text-fg-dim shrink-0",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("circle",{cx:"7",cy:"7",r:"5"}),l.jsx("path",{d:"M11 11l3.5 3.5"})]}),l.jsx("input",{ref:h,value:o,onChange:x=>r(x.target.value),placeholder:"Search messages...",className:"flex-1 bg-transparent text-sm text-fg outline-none placeholder:text-fg-dim",onKeyDown:x=>{x.key==="Escape"&&u(!1)}}),l.jsx("kbd",{className:"text-[10px] text-fg-dim bg-bg px-1.5 py-0.5 rounded border border-border",children:"ESC"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:o.length<2?l.jsx("div",{className:"text-center text-fg-dim text-sm py-8",children:"Type at least 2 characters to search"}):y.length===0?l.jsx("div",{className:"text-center text-fg-dim text-sm py-8",children:"No messages found"}):y.map((x,p)=>l.jsxs("button",{onClick:()=>{m(x.channel),u(!1),T.getState().setScrollToMsgId(x.msg.id)},className:"w-full text-left px-4 py-2.5 hover:bg-bg-tertiary border-b border-border/50 last:border-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[l.jsx("span",{className:"text-xs font-semibold text-fg",children:x.msg.from}),l.jsxs("span",{className:"text-[10px] text-fg-dim",children:["in ",f.get(x.channel)?.name||x.channel]}),l.jsxs("span",{className:"text-[10px] text-fg-dim ml-auto",children:[x.msg.timestamp.toLocaleDateString()," ",x.msg.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),l.jsx("div",{className:"text-sm text-fg-muted truncate",children:Cb(x.msg.text,o)})]},`${x.msg.id}-${p}`))})]})}):null}function Cb(i,o){const r=i.toLowerCase().indexOf(o.toLowerCase());return r<0?l.jsx(l.Fragment,{children:i}):l.jsxs(l.Fragment,{children:[i.slice(0,r),l.jsx("mark",{className:"bg-accent/20 text-accent rounded px-0.5",children:i.slice(r,r+o.length)}),i.slice(r+o.length)]})}function Eb(){const i=T(N=>N.channelListOpen),o=T(N=>N.channelList),r=T(N=>N.setChannelListOpen),[u,f]=C.useState(""),[m,h]=C.useState(null),y=C.useRef(null);C.useEffect(()=>{i&&(zt("LIST"),f(""),h(null),setTimeout(()=>y.current?.focus(),50))},[i]);const x=C.useMemo(()=>{if(!u)return o;const N=u.toLowerCase();return o.filter(_=>_.name.toLowerCase().includes(N)||_.topic.toLowerCase().includes(N))},[o,u]),p=C.useMemo(()=>{if(!u.trim())return"";const N=u.trim();return N.startsWith("#")?N:`#${N}`},[u]),j=u.trim().length>0&&!o.some(N=>N.name.toLowerCase()===p.toLowerCase()),b=N=>{Za(N),r(!1)};return i?l.jsx("div",{className:"fixed inset-0 z-[150] flex items-start justify-center pt-[10vh]",onClick:()=>r(!1),children:l.jsxs("div",{className:"bg-bg-secondary border border-border rounded-xl shadow-2xl w-[560px] max-w-[90vw] max-h-[70vh] flex flex-col animate-fadeIn",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-border",children:[l.jsx("span",{className:"text-accent text-sm font-semibold",children:"Browse Channels"}),l.jsx("span",{className:"text-[10px] text-fg-dim bg-bg px-1.5 py-0.5 rounded-full",children:o.length}),l.jsx("div",{className:"flex-1"}),l.jsx("kbd",{className:"text-[10px] text-fg-dim bg-bg px-1.5 py-0.5 rounded border border-border",children:"ESC"})]}),l.jsx("div",{className:"px-4 py-2 border-b border-border",children:l.jsx("input",{ref:y,value:u,onChange:N=>{f(N.target.value),h(null)},placeholder:"Search or create a channel...",className:"w-full bg-bg border border-border rounded-lg px-3 py-2 text-sm text-fg outline-none focus:border-accent placeholder:text-fg-dim",onKeyDown:N=>{N.key==="Escape"&&r(!1),N.key==="Enter"&&j&&!m?h(p):N.key==="Enter"&&m?b(m):N.key==="Enter"&&x.length===1&&(Za(x[0].name),r(!1))}})}),m&&l.jsxs("div",{className:"px-4 py-3 border-b border-border bg-accent/[0.03] flex items-center gap-3 animate-fadeIn",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm text-fg",children:["Create ",l.jsx("span",{className:"font-semibold text-accent",children:m}),"?"]}),l.jsx("div",{className:"text-xs text-fg-dim mt-0.5",children:"This channel doesn't exist yet. You'll be the founder."})]}),l.jsx("button",{onClick:()=>h(null),className:"text-xs text-fg-dim hover:text-fg-muted px-2 py-1",children:"Cancel"}),l.jsx("button",{onClick:()=>b(m),className:"bg-accent text-black text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-accent-hover",children:"Create"})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[j&&!m&&l.jsxs("button",{onClick:()=>h(p),className:"w-full text-left px-4 py-3 hover:bg-bg-tertiary border-b border-border/50 flex items-center gap-2",children:[l.jsx("span",{className:"w-7 h-7 rounded-lg bg-accent/10 flex items-center justify-center text-accent text-sm font-bold",children:"+"}),l.jsxs("div",{children:[l.jsxs("span",{className:"text-sm font-semibold text-fg",children:["Create ",p]}),l.jsx("span",{className:"text-xs text-fg-dim ml-2",children:"New channel"})]})]}),x.length===0&&!j?l.jsx("div",{className:"text-center text-fg-dim text-sm py-8",children:o.length===0?"Loading channels...":"No channels match"}):x.map(N=>l.jsxs("button",{onClick:()=>{Za(N.name),r(!1)},className:"w-full text-left px-4 py-3 hover:bg-bg-tertiary border-b border-border/50 last:border-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-semibold text-fg",children:N.name}),l.jsxs("span",{className:"text-[10px] text-fg-dim",children:[N.count," members"]})]}),N.topic&&l.jsx("div",{className:"text-xs text-fg-muted mt-0.5 truncate",children:N.topic})]},N.name))]})]})}):null}function Tb(i,o){const r=i.find(f=>f.id===o);if(!r)return[];const u=i.filter(f=>f.replyTo===o);return[r,...u]}function Ab({rootMsgId:i,channel:o,onClose:r}){const u=T(j=>j.channels.get(o.toLowerCase())),[f,m]=C.useState(""),h=C.useRef(null),y=C.useRef(null),x=u?Tb(u.messages,i):[];C.useEffect(()=>{h.current?.focus()},[i]),C.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[x.length]);const p=()=>{f.trim()&&(mu(o,i,f.trim()),m(""))};return x.length===0?null:l.jsxs("div",{className:"w-80 border-l border-border flex flex-col bg-bg-secondary shrink-0",children:[l.jsxs("div",{className:"h-12 border-b border-border flex items-center justify-between px-4 shrink-0",children:[l.jsx("span",{className:"text-sm font-semibold text-fg",children:"Thread"}),l.jsx("button",{onClick:r,className:"text-fg-dim hover:text-fg-muted",children:l.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{d:"M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"})})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[x.map((j,b)=>l.jsxs("div",{className:b===0?"pb-3 border-b border-border":"",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-semibold text-fg",children:j.from}),l.jsx("span",{className:"text-[10px] text-fg-dim",children:j.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),l.jsx("div",{className:"text-sm text-fg-muted mt-0.5",children:j.text})]},j.id)),l.jsx("div",{ref:y})]}),l.jsxs("div",{className:"border-t border-border p-3",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{ref:h,value:f,onChange:j=>m(j.target.value),onKeyDown:j=>j.key==="Enter"&&p(),placeholder:"Reply in thread...",className:"flex-1 bg-bg border border-border rounded-lg px-3 py-2 text-sm text-fg outline-none focus:border-accent"}),l.jsx("button",{onClick:p,disabled:!f.trim(),className:"px-3 py-2 bg-accent text-black rounded-lg text-sm font-medium disabled:opacity-30",children:"Send"})]}),l.jsxs("div",{className:"text-[10px] text-fg-dim mt-1",children:[x.length-1," ",x.length===2?"reply":"replies"]})]})]})}function Mb(){const i=T($=>$.joinGateChannel),o=T($=>$.setJoinGateChannel),r=T($=>$.authDid),[u,f]=C.useState(!1),[m,h]=C.useState(null),[y,x]=C.useState(null),[p,j]=C.useState(!1),[b,N]=C.useState(!1),_=C.useCallback(async()=>{if(!(!i||!r)){f(!0),x(null);try{const $=encodeURIComponent(i),L=await fetch(`/api/v1/policy/${$}/check`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({did:r})});if(!L.ok){const J=await L.text();x(J||`HTTP ${L.status}`);return}const ae=await L.json();h(ae)}catch($){x($.message||"Failed to check requirements")}finally{f(!1)}}},[i,r]);if(C.useEffect(()=>{i&&(h(null),x(null),j(!1),N(!1),_())},[i,_]),C.useEffect(()=>{if(!i)return;const $=L=>{L.data?.type==="freeq-credential"&&L.data?.status==="verified"&&setTimeout(_,500)};return window.addEventListener("message",$),()=>window.removeEventListener("message",$)},[i,_]),!i)return null;const X=()=>o(null),z=async $=>{j(!0),zt(`POLICY ${i} ACCEPT`),setTimeout(_,1e3),setTimeout(()=>j(!1),1500)},I=$=>{let L=$;L.startsWith("http")||(L=`${window.location.origin}${L}`);const ae=`${window.location.origin}/api/v1/credentials/present`;if(L=L.replace(/callback=[^&]*/,`callback=${encodeURIComponent(ae)}`),!L.includes("callback")){const J=L.includes("?")?"&":"?";L+=`${J}callback=${encodeURIComponent(ae)}`}if(!L.includes("subject_did")&&r){const J=L.includes("?")?"&":"?";L+=`${J}subject_did=${encodeURIComponent(r)}`}window.open(L,"freeq-verify","width=600,height=700")},te=()=>{N(!0),zt(`POLICY ${i} ACCEPT`),setTimeout(()=>{Za(i),setTimeout(X,500)},300)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:X,children:l.jsxs("div",{className:"bg-bg-secondary border border-border rounded-xl shadow-2xl w-full max-w-md overflow-hidden",onClick:$=>$.stopPropagation(),children:[l.jsx("div",{className:"px-6 pt-5 pb-3 border-b border-border",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-bold text-fg flex items-center gap-2",children:[l.jsx("span",{className:"text-accent",children:"#"}),i.replace(/^#/,"")]}),l.jsx("p",{className:"text-sm text-fg-dim mt-0.5",children:"This channel requires policy acceptance to join"})]}),l.jsx("button",{onClick:X,className:"text-fg-dim hover:text-fg p-1 -mr-1",children:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"})})})]})}),l.jsxs("div",{className:"px-6 py-4 max-h-96 overflow-y-auto",children:[u&&l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-accent border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-3 text-sm text-fg-dim",children:"Checking requirements"})]}),y&&l.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-sm text-red-400",children:y}),m&&m.status==="no_policy"&&l.jsx("p",{className:"text-sm text-fg-dim",children:"This channel has no policy. You should be able to join directly."}),m&&m.status==="satisfied"&&l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("p",{className:"text-fg font-medium",children:"All requirements satisfied"}),m.role&&l.jsxs("p",{className:"text-sm text-fg-dim mt-1",children:["Role: ",l.jsx("span",{className:"text-accent font-mono",children:m.role})]})]}),m&&m.requirements.length>0&&l.jsx("div",{className:"space-y-3",children:m.requirements.map(($,L)=>l.jsx(kb,{req:$,accepting:p,onAccept:z,onVerify:I},L))}),m&&m.can_join&&m.role&&m.requirements.length>0&&l.jsxs("div",{className:"mt-4 p-3 bg-green-500/10 border border-green-500/20 rounded-lg text-sm text-green-400",children:[" All requirements met  role: ",l.jsx("span",{className:"font-mono font-bold",children:m.role})]})]}),l.jsxs("div",{className:"px-6 py-4 border-t border-border flex items-center justify-between",children:[l.jsx("button",{onClick:X,className:"text-sm text-fg-dim hover:text-fg",children:"Cancel"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:_,className:"px-3 py-1.5 text-sm text-fg-dim hover:text-fg border border-border rounded-lg hover:bg-bg-tertiary",title:"Re-check requirements",children:" Refresh"}),l.jsx("button",{onClick:te,disabled:!m?.can_join||b,className:`px-4 py-1.5 rounded-lg text-sm font-medium transition-colors ${m?.can_join?"bg-accent text-bg hover:bg-accent/90":"bg-bg-tertiary text-fg-dim cursor-not-allowed"}`,children:b?"Joining":"Join Channel"})]})]})]})})}function Zo(i,o){if(!i)return null;try{const r=i.startsWith("/")?`https://x${i}`:i;return new URL(r).searchParams.get(o)}catch{return null}}function Jh(i){if(i.requirement_type==="accept")return{title:"Accept channel rules",subtitle:"Read and agree to the community guidelines"};if(i.requirement_type==="present"){const r=i.description.match(/Credential:\s*(\S+)/)?.[1]||"",u=i.action?.url;switch(r){case"github_repo":{const f=Zo(u,"repo");return{title:"Verify GitHub access",subtitle:f?`Collaborator on ${f}`:"Prove you're a collaborator on the linked repository"}}case"github_membership":{const f=Zo(u,"org");return{title:"Verify GitHub org membership",subtitle:f?`Member of ${f}`:"Prove you're a member of the linked organization"}}case"bluesky_follower":{const f=Zo(u,"target");return{title:"Verify Bluesky follow",subtitle:f?`Follow @${f}`:"Follow the required account on Bluesky"}}case"channel_moderator":return{title:"Moderator credential required",subtitle:"A channel operator must appoint you as a moderator"};default:return{title:`Present ${r.replace(/_/g," ")} credential`,subtitle:"External verification required"}}}return i.requirement_type==="prove"?{title:"Provide proof",subtitle:i.description}:{title:i.description,subtitle:""}}function kb({req:i,accepting:o,onAccept:r,onVerify:u}){return l.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${i.satisfied?"border-green-500/20 bg-green-500/5":"border-border bg-bg-tertiary"}`,children:[l.jsx("div",{className:`mt-0.5 w-5 h-5 rounded-full flex items-center justify-center shrink-0 ${i.satisfied?"bg-green-500/20 text-green-400":"bg-bg border border-border"}`,children:i.satisfied?l.jsx("svg",{className:"w-3 h-3",viewBox:"0 0 12 12",fill:"currentColor",children:l.jsx("path",{d:"M10 3L4.5 8.5 2 6",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})}):null}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:`text-sm font-medium ${i.satisfied?"text-fg-muted":"text-fg"}`,children:Jh(i).title}),l.jsx("p",{className:"text-xs text-fg-dim mt-0.5",children:Jh(i).subtitle}),!i.satisfied&&i.action&&l.jsxs("div",{className:"mt-2",children:[i.action.action_type==="accept_rules"&&i.action.accept_hash&&l.jsx("button",{onClick:()=>r(i.action.accept_hash),disabled:o,className:"px-3 py-1.5 text-xs font-medium bg-accent text-bg rounded-md hover:bg-accent/90 disabled:opacity-50",children:o?"Accepting":i.action.label}),i.action.action_type==="verify_external"&&i.action.url&&l.jsxs("button",{onClick:()=>u(i.action.url),className:"px-3 py-1.5 text-xs font-medium bg-bg border border-border text-fg rounded-md hover:bg-bg-secondary flex items-center gap-1.5",children:[i.action.url.includes("/bluesky/")?l.jsx("span",{children:""}):l.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 16 16",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),i.action.label]})]})]})]})}const Ji=[{id:"github_repo",label:"GitHub Repo Collaborator",icon:"",description:"Require push access to a GitHub repository",credentialType:"github_repo",buildUrl:i=>`/verify/github/start?repo=${encodeURIComponent(i)}`,placeholder:"owner/repo",paramLabel:"Repository"},{id:"github_org",label:"GitHub Org Member",icon:"",description:"Require membership in a GitHub organization",credentialType:"github_membership",buildUrl:i=>`/verify/github/start?org=${encodeURIComponent(i)}`,placeholder:"org-name",paramLabel:"Organization"},{id:"bluesky_follower",label:"Bluesky Follower",icon:"",description:"Require the user to follow a Bluesky account",credentialType:"bluesky_follower",buildUrl:i=>`/verify/bluesky/start?target=${encodeURIComponent(i)}`,placeholder:"handle.bsky.social",paramLabel:"Bluesky Handle"},{id:"moderator",label:"Moderator",icon:"",description:"Appoint moderators who can kick/ban users and set voice (+h)",credentialType:"channel_moderator",buildUrl:i=>"/verify/mod/start",placeholder:"",paramLabel:""}];function zb(){const i=T(r=>r.channelSettingsOpen),o=T(r=>r.setChannelSettingsOpen);return i?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:()=>o(null),children:l.jsx("div",{className:"bg-bg-secondary border border-border rounded-xl shadow-2xl w-full max-w-lg max-h-[80vh] flex flex-col overflow-hidden",onClick:r=>r.stopPropagation(),children:l.jsx(Ob,{channel:i,onClose:()=>o(null)})})}):null}const Db=[{label:"Code of Conduct",icon:"",description:"Require users to accept community guidelines before joining",rulesText:"Be respectful. No harassment, spam, or hate speech. Violations result in removal."},{label:"GitHub Contributors",icon:"",description:"Only repo collaborators can join  great for project channels",rulesText:"This channel is for project contributors. Verify your GitHub access to join."},{label:"Bluesky Community",icon:"",description:"Require following a Bluesky account to join",rulesText:"Follow our community account on Bluesky to access this channel."}];function _b({rulesText:i,setRulesText:o,saving:r,handleSetRules:u}){const[f,m]=C.useState(!1);return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center py-2",children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("p",{className:"text-base text-fg font-semibold",children:"Set up channel access"}),l.jsx("p",{className:"text-xs text-fg-dim mt-1 max-w-xs mx-auto leading-relaxed",children:"Channel policies let you control who can join. Start with a template or write your own rules."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-xs text-fg-dim uppercase tracking-wide",children:"Quick start"}),Db.map(h=>l.jsx("button",{onClick:()=>{o(h.rulesText),m(!0)},className:"w-full text-left p-3 bg-bg border border-border rounded-lg hover:border-accent/50 transition-colors group",children:l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("span",{className:"text-lg",children:h.icon}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-fg group-hover:text-accent transition-colors",children:h.label}),l.jsx("p",{className:"text-xs text-fg-dim",children:h.description})]}),l.jsx("svg",{className:"w-4 h-4 text-fg-dim group-hover:text-accent",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})]})},h.label))]}),f?l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("label",{className:"block text-xs text-fg-dim uppercase tracking-wide mb-2",children:"Channel rules"}),l.jsx("textarea",{value:i,onChange:h=>o(h.target.value),placeholder:"Describe the rules users must accept to join this channel...",rows:3,autoFocus:!0,className:"w-full bg-bg border border-border rounded-lg p-3 text-sm text-fg placeholder-fg-dim resize-none focus:outline-none focus:border-accent"}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsx("p",{className:"text-[10px] text-fg-dim",children:"Users will see these rules and must accept to join."}),l.jsx("button",{onClick:u,disabled:!i.trim()||r,className:"px-4 py-1.5 text-sm font-medium bg-accent text-bg rounded-lg hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Saving":"Set Policy"})]})]}):l.jsx("button",{onClick:()=>m(!0),className:"w-full p-2.5 border border-dashed border-border rounded-lg text-sm text-fg-dim hover:border-accent hover:text-accent transition-colors",children:" Write custom rules"}),l.jsx("div",{className:"border-t border-border pt-3 mt-3",children:l.jsxs("a",{href:"https://github.com/chad/freeq/blob/main/docs/POLICY.md",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-xs text-fg-dim hover:text-accent transition-colors group",children:[l.jsx("svg",{className:"w-3.5 h-3.5 text-fg-dim group-hover:text-accent",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V14a.5.5 0 01-1 0V4.804z"})}),l.jsx("span",{children:"Read the policy documentation"}),l.jsx("svg",{className:"w-3 h-3 opacity-50",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5.22 14.78a.75.75 0 001.06 0l7.22-7.22v5.69a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75h-7.5a.75.75 0 000 1.5h5.69l-7.22 7.22a.75.75 0 000 1.06z",clipRule:"evenodd"})})]})})]})}function Ob({channel:i,onClose:o}){const r=T(D=>D.nick),h=T(D=>D.channels).get(i.toLowerCase())?.members.get(r.toLowerCase())?.isOp??!1,[y,x]=C.useState("rules"),[p,j]=C.useState(null),[b,N]=C.useState(!0),[_,X]=C.useState(null),[z,I]=C.useState(""),[te,$]=C.useState(!1),[L,ae]=C.useState(!1),[J,V]=C.useState(null),[Z,de]=C.useState(""),[F,Le]=C.useState(!1),[Ce,pe]=C.useState(""),[ue,ye]=C.useState("op"),[ze,R]=C.useState(!1),G=C.useCallback(async()=>{N(!0),X(null);try{const D=encodeURIComponent(i),Q=await fetch(`/api/v1/policy/${D}`);if(Q.status===404){j(null),N(!1);return}if(!Q.ok)throw new Error(`HTTP ${Q.status}`);const le=await Q.json();j(le)}catch(D){X(D.message)}finally{N(!1)}},[i]);C.useEffect(()=>{G()},[G]);const K=()=>{z.trim()&&($(!0),zt(`POLICY ${i} SET ${z.trim()}`),setTimeout(()=>{G(),$(!1)},1e3))},ie=()=>{const D=Ji.find(be=>be.id===J);if(!D||!Z.trim())return;Le(!0);const Q=`did:web:${window.location.hostname}:verify`,le=D.buildUrl(Z.trim()),fe=D.label.replace(/ /g,"_");zt(`POLICY ${i} REQUIRE ${D.credentialType} issuer=${Q} url=${le} label=${fe}`),setTimeout(()=>{G(),Le(!1),ae(!1),V(null),de("")},1e3)},ne=()=>{if(!Ce.trim())return;R(!0);const D=`did:web:${window.location.hostname}:verify`,Q=JSON.stringify({type:"PRESENT",credential_type:Ce.trim(),issuer:D});zt(`POLICY ${i} SET-ROLE ${ue} ${Q}`),setTimeout(()=>{G(),R(!1),pe("")},1e3)},S=()=>{confirm(`Remove all policy from ${i}? This cannot be undone.`)&&(zt(`POLICY ${i} CLEAR`),setTimeout(()=>{G()},1e3))},H=[{id:"rules",label:"Rules"},{id:"requirements",label:"Verifiers"},{id:"roles",label:"Roles"}];return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"px-6 pt-5 pb-0 border-b border-border",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-bold text-fg flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4 text-fg-dim",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Channel Settings"]}),l.jsx("p",{className:"text-sm text-fg-dim",children:i})]}),l.jsx("button",{onClick:o,className:"text-fg-dim hover:text-fg p-1 -mr-1",children:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"})})})]}),l.jsx("div",{className:"flex gap-1",children:H.map(D=>l.jsx("button",{onClick:()=>x(D.id),className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors ${y===D.id?"bg-bg text-fg border-b-2 border-accent":"text-fg-dim hover:text-fg-muted"}`,children:D.label},D.id))})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[b&&l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx("div",{className:"w-6 h-6 border-2 border-accent border-t-transparent rounded-full animate-spin"})}),_&&l.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-sm text-red-400 mb-4",children:_}),!b&&y==="rules"&&l.jsxs("div",{className:"space-y-4",children:[p?.policy?l.jsxs("div",{className:"bg-bg rounded-lg border border-border p-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-xs text-fg-dim uppercase tracking-wide",children:["Current Policy (v",p.policy.version,")"]}),h&&l.jsx("button",{onClick:S,className:"text-xs text-red-400 hover:text-red-300",children:"Remove policy"})]}),l.jsx("p",{className:"text-sm text-fg-muted",children:ys(p.policy.requirements)}),l.jsxs("details",{className:"mt-2",children:[l.jsxs("summary",{className:"text-[10px] text-fg-dim cursor-pointer hover:text-fg-muted",children:["Policy DSL  ",p.policy.policy_id?.slice(0,12),""]}),l.jsxs("pre",{className:"mt-1 text-[10px] text-fg-dim font-mono bg-bg-tertiary rounded p-2 overflow-x-auto whitespace-pre-wrap break-all",children:[cc(p.policy.requirements),`
`,"policy_id=",p.policy.policy_id,`
`,"version=",p.policy.version]})]})]}):h?l.jsx(_b,{rulesText:z,setRulesText:I,saving:te,handleSetRules:K}):l.jsxs("div",{className:"text-center py-6",children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("p",{className:"text-sm text-fg-muted font-medium",children:"Open Channel"}),l.jsx("p",{className:"text-xs text-fg-dim mt-1",children:"This channel has no access policy  anyone can join and participate."})]}),h&&p?.policy&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-fg-dim uppercase tracking-wide mb-2",children:"Update rules"}),l.jsx("textarea",{value:z,onChange:D=>I(D.target.value),placeholder:"e.g., By participating you agree to our Code of Conduct.",rows:3,className:"w-full bg-bg border border-border rounded-lg p-3 text-sm text-fg placeholder-fg-dim resize-none focus:outline-none focus:border-accent"}),l.jsx("button",{onClick:K,disabled:!z.trim()||te,className:"mt-2 px-4 py-1.5 text-sm font-medium bg-accent text-bg rounded-lg hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed",children:te?"Saving":"Update Policy"})]})]}),!b&&y==="requirements"&&l.jsxs("div",{className:"space-y-4",children:[!p?.policy&&l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:"text-2xl mb-2",children:""}),l.jsx("p",{className:"text-sm text-fg-muted font-medium",children:"No verifiers configured"}),l.jsx("p",{className:"text-xs text-fg-dim mt-1 max-w-xs mx-auto",children:"Set channel rules on the Rules tab first, then add verifiers here to require credentials for access."})]}),p?.policy?.credential_endpoints&&Object.keys(p.policy.credential_endpoints).length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-fg-dim uppercase tracking-wide mb-2",children:"Active verifiers"}),l.jsx("div",{className:"space-y-2",children:Object.entries(p.policy.credential_endpoints).map(([D,Q])=>l.jsxs("div",{className:"bg-bg border border-border rounded-lg p-3 flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-bg-tertiary flex items-center justify-center text-lg",children:D.includes("github")?"":D.includes("bluesky")?"":""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-fg",children:Q.label}),l.jsxs("p",{className:"text-xs text-fg-dim truncate",children:[D,"  ",Q.issuer]})]}),l.jsx("span",{className:"text-xs text-green-400 bg-green-500/10 px-2 py-0.5 rounded-full",children:"Active"})]},D))})]}),h&&p?.policy&&!L&&l.jsx("button",{onClick:()=>ae(!0),className:"w-full p-3 border border-dashed border-border rounded-lg text-sm text-fg-dim hover:border-accent hover:text-accent transition-colors",children:"+ Add credential verifier"}),L&&l.jsxs("div",{className:"bg-bg border border-border rounded-lg p-4 space-y-3",children:[l.jsx("label",{className:"block text-xs text-fg-dim uppercase tracking-wide",children:"Choose verifier type"}),l.jsx("div",{className:"grid grid-cols-1 gap-2",children:Ji.map(D=>l.jsxs("button",{onClick:()=>{V(D.id),de("")},className:`text-left p-3 rounded-lg border transition-colors ${J===D.id?"border-accent bg-accent/5":"border-border hover:border-fg-dim"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg",children:D.icon}),l.jsx("span",{className:"text-sm font-medium text-fg",children:D.label})]}),l.jsx("p",{className:"text-xs text-fg-dim mt-1 ml-7",children:D.description})]},D.id))}),J&&l.jsx("div",{className:"pt-2",children:(()=>{const D=Ji.find(Q=>Q.id===J);return l.jsxs(l.Fragment,{children:[l.jsx("label",{className:"block text-xs text-fg-dim mb-1",children:D.paramLabel}),l.jsx("input",{value:Z,onChange:Q=>de(Q.target.value),placeholder:D.placeholder,className:"w-full bg-bg-secondary border border-border rounded-lg px-3 py-2 text-sm text-fg placeholder-fg-dim focus:outline-none focus:border-accent",onKeyDown:Q=>Q.key==="Enter"&&ie()})]})})()}),l.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[l.jsx("button",{onClick:()=>{ae(!1),V(null)},className:"px-3 py-1.5 text-xs text-fg-dim hover:text-fg",children:"Cancel"}),l.jsx("button",{onClick:ie,disabled:!J||!Z.trim()||F,className:"px-4 py-1.5 text-xs font-medium bg-accent text-bg rounded-lg hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed",children:F?"Adding":"Add Verifier"})]})]})]}),!b&&y==="roles"&&l.jsxs("div",{className:"space-y-4",children:[!p?.policy&&l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:"text-2xl mb-2",children:""}),l.jsx("p",{className:"text-sm text-fg-muted font-medium",children:"No role rules configured"}),l.jsx("p",{className:"text-xs text-fg-dim mt-1 max-w-xs mx-auto",children:"Set channel rules and add verifiers first. Then configure which credentials auto-grant op, moderator, or voice status."})]}),p?.policy?.role_requirements&&Object.keys(p.policy.role_requirements).length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-fg-dim uppercase tracking-wide mb-2",children:"Role escalation rules"}),l.jsx("div",{className:"space-y-2",children:Object.entries(p.policy.role_requirements).map(([D,Q])=>l.jsxs("div",{className:"bg-bg border border-border rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[(D==="op"||D==="admin"||D==="owner")&&l.jsx("span",{className:"text-yellow-400 text-xs",children:""}),l.jsx("span",{className:"text-sm font-medium text-fg",children:D}),l.jsxs("span",{className:"text-xs text-fg-dim",children:[" ",D==="op"||D==="admin"||D==="owner"?"+o":D==="moderator"||D==="halfop"?"+h":D==="voice"?"+v":"no mode"]})]}),l.jsx("p",{className:"text-xs text-fg-dim ml-5",children:ys(Q)}),l.jsx("p",{className:"text-[10px] text-fg-dim ml-5 font-mono opacity-60 mt-0.5",children:cc(Q)})]},D))})]}),h&&p?.policy&&l.jsxs("div",{className:"bg-bg border border-border rounded-lg p-4 space-y-3",children:[l.jsx("label",{className:"block text-xs text-fg-dim uppercase tracking-wide",children:"Auto-assign role by credential"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-fg-dim mb-1",children:"Role"}),l.jsxs("select",{value:ue,onChange:D=>ye(D.target.value),className:"w-full bg-bg-secondary border border-border rounded-lg px-3 py-2 text-sm text-fg focus:outline-none focus:border-accent",children:[l.jsx("option",{value:"op",children:"Op (+o)"}),l.jsx("option",{value:"moderator",children:"Moderator (+h)"}),l.jsx("option",{value:"voice",children:"Voice (+v)"}),l.jsx("option",{value:"admin",children:"Admin (+o)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-fg-dim mb-1",children:"Requires credential"}),l.jsxs("select",{value:Ce,onChange:D=>pe(D.target.value),className:"w-full bg-bg-secondary border border-border rounded-lg px-3 py-2 text-sm text-fg focus:outline-none focus:border-accent",children:[l.jsx("option",{value:"",children:"Select"}),p?.policy?.credential_endpoints&&Object.keys(p.policy.credential_endpoints).map(D=>l.jsx("option",{value:D,children:Og[D]||D},D)),Ji.filter(D=>!p?.policy?.credential_endpoints?.[D.credentialType]).map(D=>l.jsxs("option",{value:D.credentialType,children:[D.label," (not yet verified)"]},D.credentialType))]})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:ne,disabled:!Ce||ze,className:"px-4 py-1.5 text-xs font-medium bg-accent text-bg rounded-lg hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed",children:ze?"Adding":"Add Role Rule"})})]})]})]})]})}const Og={github_repo:"GitHub repo collaborator",github_membership:"GitHub org member",bluesky_follower:"Bluesky follower",channel_moderator:"Moderator appointment"};function ys(i){if(!i)return"None";switch(i.type){case"ACCEPT":return"Accept channel rules";case"PRESENT":return`Require ${Og[i.credential_type]||i.credential_type?.replace(/_/g," ")} credential`;case"PROVE":return`Prove: ${i.proof_type}`;case"ALL":return(i.requirements||[]).map(ys).join(" + ");case"ANY":return"Any of: "+(i.requirements||[]).map(ys).join(" or ");case"NOT":return`Not: ${ys(i.requirement)}`;default:return JSON.stringify(i).slice(0,60)}}function cc(i){if(!i)return"";switch(i.type){case"ACCEPT":return`ACCEPT hash=${i.hash?.slice(0,16)}`;case"PRESENT":return`PRESENT type=${i.credential_type} issuer=${i.issuer||"any"}`;case"ALL":return`ALL(${(i.requirements||[]).map(cc).join(", ")})`;case"ANY":return`ANY(${(i.requirements||[]).map(cc).join(", ")})`;default:return JSON.stringify(i).slice(0,80)}}const Lb=[{section:"Navigation",items:[{keys:["","K"],desc:"Quick switcher"},{keys:["","1-0"],desc:"Switch to channel by position"},{keys:["Alt","/"],desc:"Previous / next channel"},{keys:["Esc"],desc:"Close modal / cancel"}]},{section:"Messaging",items:[{keys:["Enter"],desc:"Send message"},{keys:["Shift","Enter"],desc:"New line"},{keys:[""],desc:"Edit last message"},{keys:["Tab"],desc:"Autocomplete nick"},{keys:["@"],desc:"Mention user"},{keys:["#"],desc:"Link channel"}]},{section:"Search & Discovery",items:[{keys:["","F"],desc:"Search messages"},{keys:["","/"],desc:"Keyboard shortcuts"}]},{section:"Files",items:[{keys:["","V"],desc:"Paste image to upload"},{keys:["Drag"],desc:"Drop file to upload"}]}];function Rb({open:i,onClose:o}){return i?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:o,children:l.jsxs("div",{className:"bg-bg-secondary border border-border rounded-xl shadow-2xl w-full max-w-md overflow-hidden",onClick:r=>r.stopPropagation(),children:[l.jsxs("div",{className:"px-6 py-4 border-b border-border flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-bold text-fg",children:"Keyboard Shortcuts"}),l.jsx("button",{onClick:o,className:"text-fg-dim hover:text-fg p-1",children:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"})})})]}),l.jsx("div",{className:"px-6 py-4 max-h-96 overflow-y-auto space-y-5",children:Lb.map(r=>l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs uppercase tracking-wider text-fg-dim font-bold mb-2",children:r.section}),l.jsx("div",{className:"space-y-1.5",children:r.items.map(u=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-fg-muted",children:u.desc}),l.jsx("div",{className:"flex items-center gap-1",children:u.keys.map(f=>l.jsx("kbd",{className:"px-1.5 py-0.5 text-xs font-mono bg-bg-tertiary border border-border rounded text-fg-dim min-w-[24px] text-center",children:f},f))})]},u.desc))})]},r.section))}),l.jsx("div",{className:"px-6 py-3 border-t border-border text-center",children:l.jsxs("span",{className:"text-xs text-fg-dim",children:["Press ",l.jsx("kbd",{className:"px-1 py-0.5 text-xs font-mono bg-bg-tertiary border border-border rounded",children:"Esc"})," to close"]})})]})}):null}function Ub(){const[i,o]=C.useState(!1),r=T(x=>x.activeChannel),u=T(x=>x.authDid),f=C.useCallback(x=>{x.preventDefault(),x.dataTransfer?.types.includes("Files")&&o(!0)},[]),m=C.useCallback(x=>{x.preventDefault(),x.relatedTarget===null&&o(!1)},[]),h=C.useCallback(x=>{x.preventDefault()},[]),y=C.useCallback(x=>{x.preventDefault(),o(!1);const p=x.dataTransfer?.files;if(!(!p||p.length===0)){if(!u){hl("Sign in with AT Protocol to upload files","warning");return}if(!r||r==="server"){hl("Switch to a channel to upload files","warning");return}window.dispatchEvent(new CustomEvent("freeq-file-drop",{detail:{file:p[0]}}))}},[u,r]);return C.useEffect(()=>(window.addEventListener("dragenter",f),window.addEventListener("dragleave",m),window.addEventListener("dragover",h),window.addEventListener("drop",y),()=>{window.removeEventListener("dragenter",f),window.removeEventListener("dragleave",m),window.removeEventListener("dragover",h),window.removeEventListener("drop",y)}),[f,m,h,y]),i?l.jsx("div",{className:"fixed inset-0 z-[300] bg-bg/80 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:l.jsx("div",{className:"border-2 border-dashed border-accent rounded-2xl p-12 bg-accent/5 animate-pulse",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("svg",{className:"w-16 h-16 mx-auto text-accent mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("path",{d:"M12 16V4m0 0L8 8m4-4l4 4"}),l.jsx("path",{d:"M20 16.7V19a2 2 0 01-2 2H6a2 2 0 01-2-2v-2.3"})]}),l.jsx("div",{className:"text-xl font-bold text-accent",children:"Drop file to upload"}),l.jsxs("div",{className:"text-sm text-fg-dim mt-1",children:["to ",r]})]})})}):null}let dl=null;typeof window<"u"&&window.addEventListener("beforeinstallprompt",i=>{i.preventDefault(),dl=i});function Bb(){const[i,o]=C.useState(!1),[r,u]=C.useState(()=>!!localStorage.getItem("freeq-install-dismissed"));if(C.useEffect(()=>{const h=setTimeout(()=>{dl&&!r&&o(!0)},3e4);return()=>clearTimeout(h)},[r]),!i||r)return null;const f=async()=>{if(!dl)return;dl.prompt(),(await dl.userChoice).outcome==="accepted"&&o(!1),dl=null},m=()=>{o(!1),u(!0),localStorage.setItem("freeq-install-dismissed","1")};return l.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-80 z-[100] bg-bg-secondary border border-border rounded-xl shadow-2xl p-4 animate-slideIn",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("img",{src:"/freeq.png",alt:"",className:"w-10 h-10 shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-semibold text-sm text-fg",children:"Install freeq"}),l.jsx("div",{className:"text-xs text-fg-dim mt-0.5",children:"Get the full app experience with notifications and quick access."}),l.jsxs("div",{className:"flex gap-2 mt-3",children:[l.jsx("button",{onClick:f,className:"bg-accent text-black text-xs font-bold px-4 py-1.5 rounded-lg hover:bg-accent-hover",children:"Install"}),l.jsx("button",{onClick:m,className:"text-xs text-fg-dim hover:text-fg-muted px-2",children:"Not now"})]})]})]})})}const $h="freeq-onboarding-done",Jo=[{title:"Welcome to freeq! ",body:"freeq is IRC reimagined with AT Protocol identity. Your Bluesky login is your chat identity  portable, verifiable, yours.",icon:""},{title:"Channels & DMs",body:"Channels start with #  join as many as you like. Click any user to start a private conversation.",icon:""},{title:"Your Identity Matters",body:"Signed in with AT Protocol? You get a verified badge (), your Bluesky avatar, and cryptographic proof of who you are.",icon:""},{title:"Power Features",body:"K to quick-switch channels. F to search. Right-click messages for actions. Drag files to upload. Type / for commands.",icon:""},{title:"Invite Your Friends",body:"Right-click any channel  Copy invite link. Share it on Bluesky, Twitter, or anywhere. They can join with one click.",icon:""}];function Hb(){const i=T(x=>x.registered),[o,r]=C.useState(0),[u,f]=C.useState(!1);if(C.useEffect(()=>{if(i&&!localStorage.getItem($h)){const x=setTimeout(()=>f(!0),1500);return()=>clearTimeout(x)}},[i]),!u)return null;const m=Jo[o],h=o===Jo.length-1,y=()=>{f(!1),localStorage.setItem($h,"1")};return l.jsx("div",{className:"fixed inset-0 z-[500] flex items-center justify-center bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-bg-secondary border border-border rounded-2xl shadow-2xl w-[420px] max-w-[92vw] overflow-hidden animate-fadeIn",children:[l.jsx("div",{className:"flex justify-center gap-1.5 pt-5",children:Jo.map((x,p)=>l.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${p===o?"bg-accent":p<o?"bg-accent/40":"bg-border"}`},p))}),l.jsxs("div",{className:"px-8 pt-6 pb-8 text-center",children:[l.jsx("div",{className:"text-4xl mb-4",children:m.icon}),l.jsx("h2",{className:"text-xl font-bold text-fg mb-2",children:m.title}),l.jsx("p",{className:"text-sm text-fg-muted leading-relaxed",children:m.body}),l.jsxs("div",{className:"flex gap-3 justify-center mt-8",children:[o>0&&l.jsx("button",{onClick:()=>r(o-1),className:"text-sm text-fg-dim hover:text-fg-muted px-4 py-2",children:"Back"}),h?l.jsx("button",{onClick:y,className:"bg-accent text-black font-bold text-sm px-8 py-2.5 rounded-xl hover:bg-accent-hover",children:"Let's go! "}):l.jsx("button",{onClick:()=>r(o+1),className:"bg-accent text-black font-bold text-sm px-8 py-2.5 rounded-xl hover:bg-accent-hover",children:"Next"}),!h&&l.jsx("button",{onClick:y,className:"text-sm text-fg-dim hover:text-fg-muted px-4 py-2",children:"Skip"})]})]})]})})}function qb(){const i=T(m=>m.bookmarksPanelOpen),o=T(m=>m.bookmarks),r=T(m=>m.removeBookmark),u=T(m=>m.setActiveChannel),f=T(m=>m.setBookmarksPanelOpen);return i?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm",onClick:()=>f(!1)}),l.jsxs("div",{className:"fixed right-0 top-0 bottom-0 z-50 w-80 bg-bg-secondary border-l border-border shadow-2xl animate-slideIn overflow-y-auto",children:[l.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[l.jsxs("h2",{className:"font-semibold flex items-center gap-2",children:[l.jsx("span",{children:""})," Bookmarks"]}),l.jsx("button",{onClick:()=>f(!1),className:"text-fg-dim hover:text-fg text-lg",children:""})]}),o.length===0?l.jsxs("div",{className:"p-8 text-center",children:[l.jsx("div",{className:"text-3xl mb-3",children:""}),l.jsx("div",{className:"text-sm text-fg-muted",children:"No bookmarks yet"}),l.jsx("div",{className:"text-xs text-fg-dim mt-1",children:"Right-click a message  Bookmark"})]}):l.jsx("div",{className:"divide-y divide-border/50",children:[...o].reverse().map(m=>l.jsxs("div",{className:"px-4 py-3 hover:bg-bg-tertiary/50",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-sm font-semibold text-accent",children:m.from}),l.jsx("span",{className:"text-[10px] text-fg-dim",children:m.channel}),l.jsx("span",{className:"text-[10px] text-fg-dim ml-auto",children:m.timestamp.toLocaleDateString([],{month:"short",day:"numeric"})})]}),l.jsx("div",{className:"text-sm text-fg-muted line-clamp-3",children:m.text}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx("button",{onClick:()=>{u(m.channel),f(!1)},className:"text-[11px] text-accent hover:underline",children:"Go to channel"}),l.jsx("button",{onClick:()=>r(m.msgId),className:"text-[11px] text-fg-dim hover:text-danger",children:"Remove"})]})]},m.msgId))})]})]}):null}function Yb(i){const o=i.join(`
`);let r=5381;for(let u=0;u<o.length;u++)r=(r<<5)+r+o.charCodeAt(u)>>>0;return r.toString(36)}function Kb(){const i=T(h=>h.motd),o=T(h=>h.motdDismissed),r=T(h=>h.dismissMotd),u=C.useMemo(()=>Yb(i),[i]),f=C.useMemo(()=>i.length===0?!0:localStorage.getItem("freeq-motd-seen")===u,[u,i.length]),m=()=>{localStorage.setItem("freeq-motd-seen",u),r()};return o||f||i.length===0?null:l.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fadeIn",onClick:m,children:l.jsxs("div",{className:"bg-bg-secondary border border-border rounded-2xl shadow-2xl w-[480px] max-w-[90vw] max-h-[80vh] overflow-hidden animate-fadeIn",onClick:h=>h.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center gap-3 px-6 pt-6 pb-3",children:[l.jsx("img",{src:"/freeq.png",alt:"",className:"w-10 h-10"}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-bold text-fg",children:["Welcome to ",l.jsx("span",{className:"text-accent",children:"freeq"})]}),l.jsx("p",{className:"text-xs text-fg-dim",children:"Message of the Day"})]}),l.jsx("div",{className:"flex-1"}),l.jsx("button",{onClick:m,className:"text-fg-dim hover:text-fg-muted text-lg leading-none p-1",children:""})]}),l.jsx("div",{className:"px-6 pb-6 overflow-y-auto max-h-[50vh]",children:l.jsx("div",{className:"text-sm text-fg-muted leading-relaxed space-y-1 font-mono",children:i.map((h,y)=>l.jsx("div",{className:h.trim()===""?"h-2":"",children:h.trim()===""?null:Gb(h)},y))})}),l.jsx("div",{className:"px-6 py-4 border-t border-border flex justify-end",children:l.jsx("button",{onClick:m,className:"bg-accent text-black font-bold text-sm px-5 py-2 rounded-lg hover:bg-accent-hover transition-colors",children:"Let's go"})})]})})}function Gb(i){return i.split(/(#\S+|https?:\/\/\S+)/g).map((r,u)=>r.startsWith("#")&&r.length>1?l.jsx("span",{className:"text-accent font-semibold",children:r},u):r.startsWith("http")?l.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline",children:r},u):l.jsx("span",{children:r},u))}function Vb(){const i=T(J=>J.registered),o=T(J=>J.theme),[r,u]=C.useState(!1),[f,m]=C.useState(!1),[h,y]=C.useState(!1),[x,p]=C.useState(!0),[j,b]=C.useState(()=>window.innerWidth>=768),N=T(J=>J.threadMsgId),_=T(J=>J.threadChannel),X=T(J=>J.channels),z=T(J=>J.activeChannel),I=T(J=>J.setActiveChannel),te=C.useRef(null);C.useEffect(()=>{const J=Z=>{te.current={x:Z.touches[0].clientX,y:Z.touches[0].clientY}},V=Z=>{if(!te.current)return;const de=Z.changedTouches[0].clientX-te.current.x,F=Math.abs(Z.changedTouches[0].clientY-te.current.y);Math.abs(de)>80&&F<60&&window.innerWidth<768&&(de>0&&te.current.x<40?p(!0):de<0&&x&&p(!1)),te.current=null};return document.addEventListener("touchstart",J,{passive:!0}),document.addEventListener("touchend",V,{passive:!0}),()=>{document.removeEventListener("touchstart",J),document.removeEventListener("touchend",V)}},[x]),C.useEffect(()=>{document.documentElement.setAttribute("data-theme",o)},[o]),C.useEffect(()=>{const J=window.visualViewport;if(!J)return;const V=()=>{const Z=window.innerHeight-J.height;document.documentElement.style.setProperty("--vk-offset",`${Z}px`)};return J.addEventListener("resize",V),J.addEventListener("scroll",V),()=>{J.removeEventListener("resize",V),J.removeEventListener("scroll",V)}},[]),C.useEffect(()=>{},[i]),C.useEffect(()=>{if(!i)return;const J=window.location.hash;if(J.startsWith("#auto-join=")){const V=decodeURIComponent(J.slice(11));window.history.replaceState(null,"",window.location.pathname),gl(async()=>{const{joinChannel:Z}=await Promise.resolve().then(()=>fy);return{joinChannel:Z}},void 0).then(({joinChannel:Z})=>{Z(V),I(V)})}},[i,I]),C.useEffect(()=>{window.innerWidth<768&&(p(!1),b(!1))},[z]),C.useEffect(()=>{i||(u(!1),m(!1),y(!1),T.getState().setSearchOpen(!1),T.getState().setChannelListOpen(!1),T.getState().setLightboxUrl(null),T.getState().closeThread())},[i]);const $=[...X.values()].reduce((J,V)=>J+V.unreadCount,0);B0($);const L=C.useCallback(J=>{const V=T.getState().favorites,Z=[...X.values()].filter(ue=>ue.isJoined),de=Z.filter(ue=>ue.name.startsWith("#")||ue.name.startsWith("&")).sort((ue,ye)=>ue.name.localeCompare(ye.name)),F=de.filter(ue=>V.has(ue.name.toLowerCase())),Le=de.filter(ue=>!V.has(ue.name.toLowerCase())),Ce=Z.filter(ue=>!ue.name.startsWith("#")&&!ue.name.startsWith("&")&&ue.name!=="server").sort((ue,ye)=>ue.name.localeCompare(ye.name)),pe=[...F,...Le,...Ce];pe[J]&&I(pe[J].name)},[X,I]),ae=C.useCallback(J=>{const V=[...X.values()].filter(F=>F.isJoined).sort((F,Le)=>F.name.localeCompare(Le.name)),Z=V.findIndex(F=>F.name.toLowerCase()===z.toLowerCase()),de=V[Z+J];de&&I(de.name)},[X,z,I]);return O0(i?{"mod+k":()=>u(!0),"mod+f":()=>T.getState().setSearchOpen(!0),"alt+ArrowUp":()=>ae(-1),"alt+ArrowDown":()=>ae(1),"mod+/":()=>y(!0),"mod+b":()=>T.getState().setBookmarksPanelOpen(!0),"alt+1":()=>L(0),"alt+2":()=>L(1),"alt+3":()=>L(2),"alt+4":()=>L(3),"alt+5":()=>L(4),"alt+6":()=>L(5),"alt+7":()=>L(6),"alt+8":()=>L(7),"alt+9":()=>L(8),"alt+0":()=>L(9),escape:()=>{u(!1),m(!1),y(!1),T.getState().setSearchOpen(!1),T.getState().setChannelListOpen(!1),T.getState().setLightboxUrl(null),T.getState().closeThread()}}:{},[X,L,i]),i?l.jsxs("div",{className:"flex flex-col bg-bg",style:{height:"calc(100dvh - var(--vk-offset, 0px))"},children:[l.jsx(jb,{}),l.jsx(Sb,{}),l.jsxs("div",{className:"flex flex-1 min-h-0",children:[x&&l.jsx("div",{className:"fixed inset-0 bg-black/40 z-30 md:hidden",onClick:()=>p(!1)}),l.jsx("div",{className:`${x?"translate-x-0":"-translate-x-full"} fixed md:relative md:translate-x-0 z-30 h-full transition-transform duration-200`,children:l.jsx(xy,{onOpenSettings:()=>m(!0)})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0",children:[l.jsx(Kb,{}),l.jsx(jy,{onToggleSidebar:()=>p(!x),onToggleMembers:()=>b(!j),membersOpen:j}),l.jsx(ob,{}),l.jsx(hb,{})]}),j&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/40 z-30 md:hidden",onClick:()=>b(!1)}),l.jsx("div",{className:"fixed right-0 top-0 bottom-0 z-30 md:relative md:z-auto",children:l.jsx(pb,{})})]}),N&&_&&l.jsx(Ab,{rootMsgId:N,channel:_,onClose:()=>T.getState().closeThread()})]}),l.jsx(bb,{open:r,onClose:()=>u(!1)}),l.jsx(vb,{open:f,onClose:()=>m(!1)}),l.jsx(wb,{}),l.jsx(Nb,{}),l.jsx(Eb,{}),l.jsx(Mb,{}),l.jsx(zb,{}),l.jsx(Rb,{open:h,onClose:()=>y(!1)}),l.jsx(Tg,{}),l.jsx(Ub,{}),l.jsx(Bb,{}),l.jsx(Hb,{}),l.jsx(qb,{})]}):l.jsx("div",{className:"h-dvh flex flex-col bg-bg",children:l.jsx(hy,{})})}class Xb extends hs.Component{state={hasError:!1};static getDerivedStateFromError(o){return{hasError:!0,error:o}}componentDidCatch(o,r){console.error("[ErrorBoundary]",o,r.componentStack)}render(){return this.state.hasError?l.jsx("div",{className:"h-screen bg-bg flex items-center justify-center p-6",children:l.jsxs("div",{className:"max-w-md text-center space-y-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-fg",children:"Something went wrong"}),l.jsx("p",{className:"text-fg-dim text-sm",children:this.state.error?.message||"An unexpected error occurred."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:void 0}),du()},className:"px-4 py-2 bg-accent text-white rounded hover:opacity-90",children:"Reconnect"}),l.jsx("button",{onClick:()=>{xl(),this.setState({hasError:!1,error:void 0}),window.location.reload()},className:"px-4 py-2 bg-surface text-fg rounded hover:opacity-90",children:"Reload"})]}),l.jsxs("details",{className:"text-left text-xs text-fg-dim mt-4",children:[l.jsx("summary",{className:"cursor-pointer",children:"Technical details"}),l.jsx("pre",{className:"mt-2 p-2 bg-surface rounded overflow-auto max-h-40",children:this.state.error?.stack})]})]})}):this.props.children}}const Wh=document.getElementById("root");Wh&&d0.createRoot(Wh).render(l.jsx(C.StrictMode,{children:l.jsx(Xb,{children:l.jsx(Vb,{})})}));"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{});
